window.__require=function e(t,n,a){function i(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=n[r]={exports:{}};t[r][0].call(u.exports,function(e){return i(t[r][1][e]||e)},u,u.exports,e,t,n,a)}return n[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<a.length;r++)i(a[r]);return i}({AudioMgr:[function(e,t,n){"use strict";cc._RF.push(t,"2fcf47bjJBFQLVlDEKoJgp6","AudioMgr"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("../const"),i=e("./CocosZ"),o=function(){function e(){this._curMusicId=-1,this._curMusicClip=null,this._videoOn=!1,this._guideAudioId=-1,this.audioIdList=[]}return Object.defineProperty(e,"inst",{get:function(){return e._inst||(e._inst=new e),e._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoOn",{get:function(){return this._videoOn},set:function(e){this._videoOn=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AudioOn",{get:function(){return i.cocosz.dataMgr.AudioOn},set:function(e){i.cocosz.dataMgr.AudioOn=e,e?this._curMusicClip&&(this._curMusicId=this._play(this._curMusicClip,!0,1)):this.stopAll()},enumerable:!1,configurable:!0}),e.prototype.playBgm=function(e){if(void 0===e&&(e=!0),this.AudioOn){var t=a.audio_bgm_home;if(cc.director.getScene().name==a.scene_home)t=a.audio_bgm_home;else{if(cc.director.getScene().name!=a.scene_game)return;t=a.audio_bgm_game}var n=i.cocosz.resMgr.getRes(t,cc.AudioClip);n&&(this.stopAll(),setTimeout(function(){cc.audioEngine.playMusic(n,!0)},0))}},e.prototype.playGuideAudio=function(e){-1!=this._guideAudioId&&(cc.audioEngine.stop(this._guideAudioId),this._guideAudioId=-1),this._guideAudioId=i.cocosz.audioMgr.playEffect(e)},e.prototype.playEffect=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=1),!this.videoOn&&this.AudioOn){var a=i.cocosz.resMgr.getRes(e,cc.AudioClip);return a?(this.audioIdList[e]=cc.audioEngine.play(a,t,n),this.audioIdList[e]):void 0}},e.prototype.playClip=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=1),!this.videoOn&&this.AudioOn)return e&&e.isValid?(this.audioIdList[e.name]=cc.audioEngine.play(e,t,n),this.audioIdList[e.name]):void 0},e.prototype.stopEffect=function(e){this.audioIdList[e]>=0&&(cc.audioEngine.stop(this.audioIdList[e]),this.audioIdList[e]=null)},e.prototype.checkEffect=function(e){return!!this.audioIdList[e]},e.prototype.playBtnEffect=function(){var e=this;return new Promise(function(t){e.playEffect("btn"),setTimeout(function(){t(1)},200)})},e.prototype.playEffectWinner=function(e){var t=this;void 0===e&&(e=1),this.stopAll(),setTimeout(function(){t.playEffect(a.audio_zombie_win)})},e.prototype.playEffectFailed=function(e){var t=this;void 0===e&&(e=1),this.stopAll(),setTimeout(function(){t.playEffect(a.audio_zombie_fail)})},e.prototype.pauseAll=function(){cc.audioEngine.pauseAll()},e.prototype.resumeAll=function(){this._videoOn||cc.audioEngine.resumeAll()},e.prototype.stopAll=function(){cc.audioEngine.stopAll(),this.audioIdList=[]},e.prototype._play=function(e,t,n){return this.AudioOn?cc.audioEngine.play(e,t,n):-1},e}();n.default=o,cc._RF.pop()},{"../const":"const","./CocosZ":"CocosZ"}],BgScroll:[function(e,t,n){"use strict";cc._RF.push(t,"acdbc3aRD5AGp4ypzXGP/2Q","BgScroll");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprite=null,t._material=null,t._start=0,t.speed=1,t}return i(t,e),t.prototype.onLoad=function(){this.sprite=this.getComponent(cc.Sprite),this.sprite&&(this._material=this.sprite.getMaterial(0)),this.initParams()},t.prototype.initParams=function(){this.sprite&&this._material&&this.speed&&this._material.setProperty("speed",this.speed)},t.prototype.update=function(e){this.node.active&&this._material&&null!=this._material.getProperty("time",0)&&(this._material.setProperty("time",this._start),this._start+=e)},o([c({displayName:"\u901f\u5ea6"})],t.prototype,"speed",void 0),o([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{}],CocosZ:[function(e,t,n){"use strict";cc._RF.push(t,"54a8bcZAI1KMJdjQ5CMJRqd","CocosZ");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function s(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}c((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,i,o,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(6===o[0]&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(s){o=[6,s],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.cocosz=void 0;var c,l=e("./GameMgr"),u=e("./DataMgr"),p=e("./UIMgr"),d=e("./ResMgr"),h=e("./Constant"),g=e("./SceneMgr"),f=e("./AudioMgr"),m=e("./Msg"),_=e("../const"),y=e("./Web3Mgr"),b=e("LanguageData"),v=cc._decorator,M=v.ccclass,k=v.property;(function(e){e[e.zh=0]="zh",e[e.en=1]="en"})(c||(c={})),n.cocosz=null;var C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._web3Mgr=null,t._gameMgr=null,t._dataMgr=null,t._uiMgr=null,t._resMgr=null,t._audioMgr=null,t._sceneMgr=null,t.btnDebug=!1,t._languagesArr=["zh","en"],t.curLanguage="zh",t._curLang=c.zh,t.audioList=[],t._isResourceLoaded=!1,t._useCJTimes=0,t._totalCJTimes=0,t._zombieKillNum=0,t._totalTime=0,t.curLevel=0,t._pauseCount=0,t.serverConfig_shareMaxNum=0,t.isDeBug=!1,t.isADON=!0,t._dtBack=1/60,t.bundleConfig={"ui/UILoadingPage":_.bundle_load},t.serverConfig={shareMaxNum:5,shareTime:2,isVideoAd_advanced_weapon:"true",isVideoAd_Qpbz:"true",isVideoAd_Citie:"true",skillLockNum:2,isBanner_game:!0,isInterstitial_UIHomePage:"true",isInterstitial_UITurntablePanel:"true",isInterstitial_UIGamePage:"true",isInterstitial_UIRevivePanel:"true",isInterstitial_UIPausePanel:"true",isInterstitial_UIUpgradePanel:"true",try_skin_level_count:1,try_skin_show_ad_interval:1},t.serverConfig_shareTime=2,t}return i(t,e),Object.defineProperty(t.prototype,"web3Mgr",{get:function(){return this._web3Mgr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gameMgr",{get:function(){return this._gameMgr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataMgr",{get:function(){return this._dataMgr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uiMgr",{get:function(){return this._uiMgr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resMgr",{get:function(){return this._resMgr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioMgr",{get:function(){return this._audioMgr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sceneMgr",{get:function(){return this._sceneMgr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curLang",{get:function(){return this._curLang},set:function(e){this._curLang=e,this.curLanguage=this._languagesArr[e]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isResourceLoaded",{get:function(){return this._isResourceLoaded},set:function(e){this._isResourceLoaded=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useCJTimes",{get:function(){return this._useCJTimes},set:function(e){this._useCJTimes=e,localStorage.setItem(h.default.ST_GameData+_.storage_useCJTimes_dmm,this._useCJTimes.toString())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalCJTimes",{get:function(){return this._totalCJTimes},set:function(e){this._totalCJTimes=e,localStorage.setItem(h.default.ST_GameData+_.storage_totalCJTimes_dmm,this._totalCJTimes.toString())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zombieKillNum",{get:function(){return this._zombieKillNum},set:function(e){this._zombieKillNum=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalTime",{get:function(){return this._totalTime},set:function(e){this._totalTime=e},enumerable:!1,configurable:!0}),t.prototype.getLevelId=function(){return n.cocosz.dataMgr.TotoalCount_6},Object.defineProperty(t.prototype,"pauseCount",{get:function(){return this._pauseCount},set:function(e){e<0&&(e=0),this._pauseCount=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPause",{get:function(){return this.pauseCount>0},set:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canShare",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){return r(this,void 0,void 0,function(){var e,t=this;return s(this,function(){return n.cocosz=this,this._web3Mgr=y.default.inst,this._gameMgr=l.default.inst,this._dataMgr=u.default.inst,this._resMgr=d.default.inst,this._uiMgr=p.default.inst,this._audioMgr=f.default.inst,this._sceneMgr=g.default.inst,cc.game.addPersistRootNode(this.node),cc.sys.languageCode="en",cc.sys.languageCode&&(cc.sys.languageCode.toLowerCase().indexOf("zh")>-1?this.curLanguage="zh":this.curLanguage="en"),b.init(this.curLanguage),this.isDeBug=this.btnDebug,this._initConfigKey(),cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!1,(e=cc.director.getPhysicsManager()).enabled=!0,e.gravity=cc.v2(),e.debugDrawFlags=0,cc.assetManager.loadBundle(_.bundle_load,null,function(e){e||t._initLoadingPage()}),[2]})})},t.prototype.update=function(e){var t=cc.director.getPhysicsManager();t.enabledAccumulator=!0,t.FIXED_TIME_STEP=cc.misc.lerp(this._dtBack,e,.01),this._dtBack=e},t.prototype._initLoadingPage=function(){var e=this;this.resMgr.loadAndCacheRes("ui/UILoadingPage",cc.Prefab,null,function(){e._uiMgr.openPage(h.PageName.UILoadingPage),e._initCache(),e._loadBundleRes()})},t.prototype._loadBundleRes=function(){var e=this;cc.assetManager.loadBundle(_.bundle_res,function(t){t||(e._initBundleConfig(),e._loadRes())})},t.prototype._loadRes=function(){var e,t=this,a=0,i=[];n.cocosz.getDirWithPath("UI/",cc.Prefab,i),n.cocosz.resMgr.loadAndCacheResArray(i,cc.Prefab,null,function(){a++});var o=[];n.cocosz.getDirWithPath("i18n/tex_name/"+n.cocosz.curLanguage,cc.SpriteAtlas,o),n.cocosz.resMgr.loadAndCacheResArray(o,cc.SpriteAtlas,null,function(){a++});var r=[];n.cocosz.getDirWithPath("tex_common",cc.SpriteAtlas,r),n.cocosz.resMgr.loadAndCacheResArray(r,cc.SpriteAtlas,null,function(){a++});var s=[];n.cocosz.getDirWithPath("prefab_weapon",cc.Prefab,s),n.cocosz.resMgr.loadAndCacheResArray(s,cc.Prefab,null,function(){a++});var c=[];n.cocosz.getDirWithPath("audio_common",cc.AudioClip,c),n.cocosz.resMgr.loadAndCacheResArray(c,cc.AudioClip,null,function(){a++});var l=[];n.cocosz.getDirWithPath("tex_skin",cc.SpriteFrame,l),n.cocosz.resMgr.loadAndCacheResArray(l,cc.SpriteFrame,null,function(){a++});var u=[];n.cocosz.getDirWithPath("tex_chain_logo",cc.SpriteFrame,u),n.cocosz.resMgr.loadAndCacheResArray(u,cc.SpriteFrame,null,function(){a++}),e=i.length+o.length+r.length+s.length+c.length+l.length+u.length,this.resMgr.cacheCocoszAudio();var p=0;this.schedule(function(){p=a/e,cc.game.emit(h.default.E_GAME_LOGIC,{type:h.default.E_UPDATE_PROGRESS,data:p}),a>=e&&(t.isResourceLoaded=!0,setInterval(function(){n.cocosz.dataMgr.OnlineToday++},1e3))},0)},t.prototype.goToHome=function(){var e=this;this._sceneMgr.loadScene(_.scene_home,function(){e._uiMgr.openPage(h.PageName.UIHomePage)})},t.prototype._initBundleConfig=function(){for(var e=0,t=[_.bundle_resources,_.bundle_res,_.bundle_load];e<t.length;e++){var n=t[e],a=cc.assetManager.bundles.get(n);if(a){var i=a._config.paths._map;if(i)for(var o in i)this.bundleConfig[o]=n}}},t.prototype.getBundleWithPath=function(e){if(this.bundleConfig[e])return cc.assetManager.bundles.get(this.bundleConfig[e]);for(var t in this.bundleConfig)if(t[0]===e[0]&&t.includes(e,0))return cc.assetManager.bundles.get(this.bundleConfig[t]);return null},t.prototype.getDirWithPath=function(e,t,n){var a=this.getBundleWithPath(e);return a?a.getDirWithPath(e,t,n):null},t.prototype.getConfigByKey=function(){return null},t.prototype._initConfigKey=function(){},t.prototype._initCache=function(){n.cocosz.dataMgr&&n.cocosz.dataMgr.init(),n.cocosz.dataMgr.LastLoadDate!=(new Date).toDateString()&&(n.cocosz.dataMgr.LastLoadDate=(new Date).toDateString(),n.cocosz.dataMgr.shareNum=0),localStorage.getItem(h.default.ST_GameData+_.storage_totalCJTimes_dmm)&&(this._totalCJTimes=Number(localStorage.getItem(h.default.ST_GameData+_.storage_totalCJTimes_dmm))),localStorage.getItem(h.default.ST_GameData+_.storage_useCJTimes_dmm)&&(this._useCJTimes=Number(localStorage.getItem(h.default.ST_GameData+_.storage_useCJTimes_dmm))),(new Date).toDateString()!=n.cocosz.dataMgr.LastLoadDate&&(this.useCJTimes=0,n.cocosz.dataMgr.OnlineToday=0,n.cocosz.dataMgr.receiveToday=[0,0,0,0,0],n.cocosz.dataMgr.LastLoadDate=(new Date).toDateString())},Object.defineProperty(t.prototype,"isShowAd",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowGameBanner",{get:function(){return"false"!=n.cocosz.getConfigByKey("gameBanner")},enumerable:!1,configurable:!0}),t.prototype.StoHMS=function(e){var t=0,n=0;e>=60&&(t=Math.floor(e/60),e=Math.floor(e%60),t>60&&(n=Math.floor(t/60),t=Math.floor(t%60)));var a="";return a+=0==n?"":n+":",(a+=t>=10?""+t:"0"+t)+(e>=10?":"+e:":0"+e)},t.prototype.share=function(e,t){if(void 0===e&&(e=null),void 0===t&&(t=null),this.isDeBug)e&&e(),n.cocosz.dataMgr.shareNum++;else{var a=(new Date).getTime();(new Date).getTime()-a>1e3*this.serverConfig_shareTime?(e&&e(),n.cocosz.dataMgr.shareNum++):(t&&t(),m.default.Show("\u8bf7\u5206\u4eab\u81f3\u4e0d\u540c\u597d\u53cb\u624d\u53ef\u83b7\u5f97\u5956\u52b1\u54e6"))}},o([k()],t.prototype,"btnDebug",void 0),o([k({visible:!1})],t.prototype,"curLanguage",void 0),o([k({visible:!1})],t.prototype,"_curLang",void 0),o([k({type:cc.Enum(c),displayName:"\u5f53\u524d\u8bed\u8a00",tooltip:"zh(\u4e2d\u6587) en(\u82f1\u6587)"})],t.prototype,"curLang",null),o([k({type:cc.AudioClip})],t.prototype,"audioList",void 0),o([M],t)}(cc.Component);n.default=C,cc._RF.pop()},{"../const":"const","./AudioMgr":"AudioMgr","./Constant":"Constant","./DataMgr":"DataMgr","./GameMgr":"GameMgr","./Msg":"Msg","./ResMgr":"ResMgr","./SceneMgr":"SceneMgr","./UIMgr":"UIMgr","./Web3Mgr":"Web3Mgr",LanguageData:"LanguageData"}],CoinBord:[function(e,t,n){"use strict";cc._RF.push(t,"96bb6h8GYdOW47cjyMPjHjl","CoinBord");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Manager/Constant"),s=e("../Manager/CocosZ"),c=(e("LanguageData"),cc._decorator),l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._label=null,t._icon=null,t._adBtn=null,t.isDiamond=!1,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this._label=this.node.getChildByName("Label").getComponent(cc.Label),this._icon=this.node.getChildByName("Icon"),this._adBtn=this.node.getChildByName("BtnAD"),this._adBtn&&(this._adBtn.on(cc.Node.EventType.TOUCH_END,function(){var t=cc.instantiate(s.cocosz.resMgr.getRes("UIADPanel",cc.Prefab));cc.find("Canvas").addChild(t),e.isDiamond&&t.getComponent("UIADPanel").setDiamond()}),this._adBtn.active=s.cocosz.isADON)},t.prototype.onEnable=function(){cc.game.on(r.default.E_GAME_LOGIC,this._onGameMessageHandler,this),this._updateLabel()},t.prototype.onDisable=function(){cc.game.targetOff(this)},t.prototype._onGameMessageHandler=function(e){switch(e.type){case r.default.E_COIN_CHANGE:case r.default.E_Diamond_CHANGE:this._updateLabel()}},t.prototype._updateLabel=function(){var e=this;null!=window.getPlayerAllAssets&&null!=window.getPlayerAllAssets&&window.getPlayerAllAssets(function(t){s.cocosz.web3Mgr.gold=parseInt(t[0]),s.cocosz.web3Mgr.diamond=parseInt(t[1]),e.isDiamond?e._label.string=t[1]:e._label.string=t[0]})},t.prototype.getLocation=function(){return this._icon.convertToWorldSpaceAR(cc.Vec3.ZERO)},o([u],t.prototype,"isDiamond",void 0),o([l],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant",LanguageData:"LanguageData"}],Constant:[function(e,t,n){"use strict";cc._RF.push(t,"64cadnkviJL44jGEeMwtjtg","Constant"),Object.defineProperty(n,"__esModule",{value:!0}),n.SkillInfo=n.GunInfo=n.SkinInfo=n.Levelitem=n.PanelName=n.PageName=n.ZindexLayer=n.Starstate=n.GameState=void 0;var a=function(){function e(){}return e.CT_TotalLevelCount=20,e.CT_RewardCoinCount=100,e.CT_FailRewardCoinCount=50,e.commonCJTimes=1,e.weaponLevelPriceArr=[100,300,600],e.skinLevelPriceArr=[100,200,300,400,500,600],e.ST_GameData="GameData_dxcyxtgd",e.ST_BuildDate="ST_BuildDate",e.ST_TotoalCount="ST_TotoalCount",e.ST_CurModel1MapId="ST_CurModel1MapId",e.ST_CurModel2MapId="ST_CurModel2MapId",e.ST_CurLevelId="ST_CurLevelId",e.ST_AudioOn="ST_AudioOn",e.ST_CoinCount="ST_CoinCount",e.ST_DiamondCount="ST_DiamondCount",e.ST_OnlineToday="ST_OnlineToday",e.ST_ReceiveToday="ST_ReceiveToday",e.ST_LastLoadDate="ST_LastLoadDate",e.ST_LastDailyBonusTime="ST_LastDailyBonusTime",e.ST_LastDailyBonusIndex="ST_LastDailyBonusIndex",e.ST_SkinInfo="ST_SkinInfo",e.ST_CurSkinId="ST_CurSkinId",e.ST_SkillInfo="ST_SkillInfo",e.ST_CurSkillId="ST_CurSkillId",e.ST_GunInfo="ST_GunInfo",e.ST_CurMeleeId="ST_CurMeleeId",e.ST_CurRangeId="ST_CurRangeId",e.ST_LevelItem="LevelItem",e.ST_ShareNum="ST_ShareNum",e.E_GAME_LOGIC="E_GAME_LOGIC",e.E_UPDATE_PROGRESS="E_UPDATE_PROGRESS",e.E_Fly_Coin="E_Fly_Coin",e.E_COIN_CHANGE="E_COIN_CHANGE",e.E_Diamond_CHANGE="E_Diamond_CHANGE",e.E_EXP_CHANGE="E_EXP_CHANGE",e.E_CJ_SKIN="E_CJ_SKIN",e.E_CJ_Weapon="E_CJ_Weapon",e.E_ShareOrVideo="E_ShareOrVideo",e.E_Player_Death="E_Player_Death",e.E_Player_Hart="E_Player_Hart",e.E_Bullet_Last="E_Bullet_Last",e.E_Bullet_Reload="E_Bullet_Reload",e.E_Zombie_Hart="E_Zombie_Hart",e.E_Zombie_Death="E_Zombie_Death",e.E_Jingyan_Finish="E_Jingyan_Finish",e.E_Commonzombie_Destory="E_Commonzombie_Destory",e.E_Allzombie_Destory="E_Allzombie_Destory",e.E_Skill_Citie="E_Skill_Citie",e.ST_Guide_Skill="ST_Guide_Skill",e}();n.default=a,function(e){e[e.None=-1]="None",e[e.Prepare=0]="Prepare",e[e.Start=1]="Start",e[e.Success=2]="Success",e[e.Failed=3]="Failed",e[e.Pause=4]="Pause",e[e.Relive=5]="Relive"}(n.GameState||(n.GameState={})),function(e){e[e.default=0]="default",e[e.bright=1]="bright",e[e.drown=2]="drown"}(n.Starstate||(n.Starstate={})),function(e){e[e.zindex_min=cc.macro.MIN_ZINDEX]="zindex_min",e[e.zinedx_floorTip=cc.macro.MIN_ZINDEX+1]="zinedx_floorTip",e[e.zinedx_floorLiewen=cc.macro.MIN_ZINDEX+2]="zinedx_floorLiewen",e[e.zinedx_floorSkill=cc.macro.MIN_ZINDEX+3]="zinedx_floorSkill",e[e.zinedx_footPrint=cc.macro.MIN_ZINDEX+4]="zinedx_footPrint",e[e.zinedx_gh=cc.macro.MIN_ZINDEX+5]="zinedx_gh",e[e.zinedx_footYc=cc.macro.MIN_ZINDEX+6]="zinedx_footYc",e[e.zinedx_jingyan=cc.macro.MIN_ZINDEX+7]="zinedx_jingyan",e[e.zindex_shellcase=cc.macro.MIN_ZINDEX+8]="zindex_shellcase",e[e.default=0]="default",e[e.zindex_mb=1]="zindex_mb",e[e.zinedx_item=100]="zinedx_item",e[e.zinedx_dropbox=200]="zinedx_dropbox",e[e.zindex_zombie=300]="zindex_zombie",e[e.zindex_monster=400]="zindex_monster",e[e.zindex_enemy=500]="zindex_enemy",e[e.zindex_soldier=600]="zindex_soldier",e[e.zindex_ai=700]="zindex_ai",e[e.zindex_player=800]="zindex_player",e[e.zindex_tower=900]="zindex_tower",e[e.zindex_bullet=1e3]="zindex_bullet",e[e.zindex_hp=1100]="zindex_hp",e[e.zindex_bomb=1200]="zindex_bomb",e[e.zindex_blood=1300]="zindex_blood",e[e.zindex_effect=1400]="zindex_effect",e[e.zindex_effect_fire=1500]="zindex_effect_fire",e[e.zindex_effect_spark=1600]="zindex_effect_spark",e[e.zindex_effect_hit=1800]="zindex_effect_hit",e[e.zindex_bullet_sky=1900]="zindex_bullet_sky",e[e.zindex_skill=cc.macro.MAX_ZINDEX-6]="zindex_skill",e[e.zindex_roleLabel=cc.macro.MAX_ZINDEX-2]="zindex_roleLabel",e[e.zindex_max=cc.macro.MAX_ZINDEX]="zindex_max"}(n.ZindexLayer||(n.ZindexLayer={}));var i=function(){function e(){}return e.UILoadingPage="UILoadingPage",e.UIHomePage="UIHomePage",e.UIGamePage="UIGamePage",e.UIOverPage="UIOverPage",e.UIGameLoadingPage="UIGameLoadingPage",e}();n.PageName=i;var o=function(){function e(){}return e.UIRankingsPanel="UIRankingsPanel",e.UITurntablePanel="UITurntablePanel",e.UIRevivePanel="UIRevivePanel",e.UIUpgradePanel="UIUpgradePanel",e.UIPausePanel="UIPausePanel",e}();n.PanelName=o;var r=function(){function e(e){var t=JSON.parse(e);t&&(t.Id&&(this.Id=parseInt(t.Id)),t.State&&(this.State=parseInt(t.State)),t.Grade&&(this.Grade=parseInt(t.Grade)))}return e.prototype.ToString=function(){return'{"Id":"'+this.Id+'","State":"'+this.State+'","Grade":"'+this.Grade+'"}'},e}();n.Levelitem=r;var s=function(){function e(e){var t=JSON.parse(e);t&&(t.Id&&(this.Id=parseInt(t.Id)),t.State&&(this.State=parseInt(t.State)),t.Price&&(this.Price=parseInt(t.Price)),t.Level&&(this.Level=parseInt(t.Level)),t.VideoCount&&(this.VideoCount=parseInt(t.VideoCount)))}return e.prototype.ToString=function(){return'{"Id":"'+this.Id+'","State":'+this.State+'","Price":"'+this.Price+'","VideoCount":"'+this.VideoCount+'"}'},e}();n.SkinInfo=s;var c=function(){function e(e){var t=JSON.parse(e);t&&(t.Id&&(this.Id=parseInt(t.Id)),t.State&&(this.State=parseInt(t.State)),t.Price&&(this.Price=parseInt(t.Price)),t.Level&&(this.Level=parseInt(t.Level)),t.VideoCount&&(this.VideoCount=parseInt(t.VideoCount)))}return e.prototype.ToString=function(){return'{"Id":"'+this.Id+'","State":"'+this.State+'","Price":"'+this.Price+'","Level":"'+this.Level+'","VideoCount":"'+this.VideoCount+'"}'},e}();n.GunInfo=c;var l=function(){function e(e){var t=JSON.parse(e);t&&(t.Id&&(this.Id=parseInt(t.Id)),t.State&&(this.State=parseInt(t.State)),t.Price&&(this.Price=parseInt(t.Price)))}return e.prototype.ToString=function(){return'{"Id":"'+this.Id+'","State":"'+this.State+'","Price":"'+this.Price+'"}'},e}();n.SkillInfo=l,cc._RF.pop()},{}],DataMgr:[function(e,t,n){"use strict";cc._RF.push(t,"0b76fObtN5FOKzSrvF3Frcp","DataMgr"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("../game/weapon"),i=e("./Constant"),o=function(){function e(){this._dataPool={}}return Object.defineProperty(e,"inst",{get:function(){return e._inst||(e._inst=new e),e._inst},enumerable:!1,configurable:!0}),e.prototype.init=function(){cc.sys.localStorage.getItem(i.default.ST_GameData)?this._dataPool=JSON.parse(cc.sys.localStorage.getItem(i.default.ST_GameData)):(this._dataPool[i.default.ST_CoinCount]="1000",this._dataPool[i.default.ST_DiamondCount]="0",this._dataPool[i.default.ST_CurSkinId]="0",this._dataPool[i.default.ST_CurMeleeId]="13",this._dataPool[i.default.ST_CurRangeId]="0",this._dataPool[i.default.ST_LastDailyBonusIndex]="-1",this._dataPool[i.default.ST_LastDailyBonusTime]="0",this._initLevelData(),this._initSkinData(),this._initGunData(),this._save())},e.prototype._initLevelData=function(){var e={},t=new i.Levelitem('{"Id":"1001","State":"1","Grade":"0"}');e[1001]=t;for(var n=1002;n<=1e3+i.default.CT_TotalLevelCount;n++){var a=new i.Levelitem('{"Id":"'+n+'","State":"0","Grade":"0"}');e[n.toString()]=a}for(n=2001;n<=2e3+i.default.CT_TotalLevelCount;n++){var o=new i.Levelitem('{"Id":"'+n+'","State":"0","Grade":"0"}');e[n.toString()]=o}for(n=3001;n<=3e3+i.default.CT_TotalLevelCount;n++){var r=new i.Levelitem('{"Id":"'+n+'","State":"0","Grade":"0"}');e[n.toString()]=r}this._dataPool[i.default.ST_LevelItem]=JSON.stringify(e)},e.prototype._initSkinData=function(){var e=[0,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3],t=[],n=new i.SkinInfo('{"Id":"0","State":"2","Price":"'+e[0]+'","Level":"0","VideoCount":"0"}');t.push(n);for(var a=1;a<e.length;a++){var o=new i.SkinInfo('{"Id":"'+a+'","State":"0","Price":"'+e[a]+'","Level":"0","VideoCount":"0"}');t.push(o)}this._dataPool[i.default.ST_SkinInfo]=JSON.stringify(t)},e.prototype._initGunData=function(){for(var e=[0,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,0,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3,1e3],t=[],n=0;n<e.length;n++){var a;a=0==n||13==n?new i.GunInfo('{"Id":"'+n+'","State":"2","Price":"'+e[n]+'","Level":"0","VideoCount":"0"}'):new i.GunInfo('{"Id":"'+n+'","State":"0","Price":"'+e[n]+'","Level":"0","VideoCount":"0"}'),t.push(a)}this._dataPool[i.default.ST_GunInfo]=JSON.stringify(t)},Object.defineProperty(e.prototype,"AudioOn",{get:function(){return"1"==this.getItem(i.default.ST_AudioOn,"1")},set:function(e){this.setItem(i.default.ST_AudioOn,e?"1":"0")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CoinCount",{get:function(){return parseInt(this.getItem(i.default.ST_CoinCount,"0"))},set:function(e){this.setItem(i.default.ST_CoinCount,e+""),cc.game.emit(i.default.E_GAME_LOGIC,{type:i.default.E_COIN_CHANGE})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DiamondCount",{get:function(){return parseInt(this.getItem(i.default.ST_DiamondCount,"0"))},set:function(e){this.setItem(i.default.ST_DiamondCount,e+""),cc.game.emit(i.default.E_GAME_LOGIC,{type:i.default.E_Diamond_CHANGE})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TotoalCount_6",{get:function(){return parseInt(this.getItem(i.default.ST_TotoalCount+"6","1"))},set:function(e){this.setItem(i.default.ST_TotoalCount+"6",e+"")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LastDailyBonusIndex",{get:function(){return parseInt(this.getItem(i.default.ST_LastDailyBonusIndex,"-1"))},set:function(e){this.setItem(i.default.ST_LastDailyBonusIndex,e+"")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LastDailyBonusTime",{get:function(){return this.getItem(i.default.ST_LastDailyBonusTime,"0")},set:function(e){this.setItem(i.default.ST_LastDailyBonusTime,e+"")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LastLoadDate",{get:function(){return this.getItem(i.default.ST_LastLoadDate,"")},set:function(e){this.setItem(i.default.ST_LastLoadDate,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"OnlineToday",{get:function(){return parseInt(this.getItem(i.default.ST_OnlineToday,"0"))},set:function(e){this.setItem(i.default.ST_OnlineToday,e+"")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"receiveToday",{get:function(){return JSON.parse(this.getItem(i.default.ST_ReceiveToday,"[0, 0, 0, 0, 0]"))},set:function(e){this.setItem(i.default.ST_ReceiveToday,JSON.stringify(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CurSkinId",{get:function(){return parseInt(this.getItem(i.default.ST_CurSkinId,"0"))},set:function(e){if(e!=this.CurSkinId){var t=this.CurSkinId,n=this.getSkinInfo(t);n&&(n.State=1,this.setSkinInfo(t,n));var a=this.getSkinInfo(e);a&&(a.State=2,this.setSkinInfo(e,a)),this.setItem(i.default.ST_CurSkinId,e+"")}},enumerable:!1,configurable:!0}),e.prototype.getSkinInfo=function(e){var t=this.getItem(i.default.ST_SkinInfo,"");if(t){var n=JSON.parse(t);if(e>=0&&e<n.length)return n[e]}return null},e.prototype.setSkinInfo=function(e,t){var n=this.getItem(i.default.ST_SkinInfo,"");if(n){var a=JSON.parse(n);e>=0&&e<a.length&&(a[e]=t,this.setItem(i.default.ST_SkinInfo,JSON.stringify(a)))}},e.prototype.getRandomLockSkin=function(){var e=[],t=this.getItem(i.default.ST_SkinInfo,"");if(t)for(var n=JSON.parse(t),a=0;a<n.length;a++)0==n[a].State&&e.push(n[a].Id);return e},e.prototype.getGunInfo=function(e){var t=this.getItem(i.default.ST_GunInfo,"");if(t){var n=JSON.parse(t);if(e>=0&&e<n.length)return n[e]}return null},e.prototype.setGunInfo=function(e,t){var n=this.getItem(i.default.ST_GunInfo,"");if(n){var a=JSON.parse(n);e>=0&&e<a.length&&(a[e]=t,this.setItem(i.default.ST_GunInfo,JSON.stringify(a)))}},Object.defineProperty(e.prototype,"CurMelee",{get:function(){return parseInt(this.getItem(i.default.ST_CurMeleeId,"13"))},set:function(e){if(e!=this.CurMelee&&a.default.meleeWeapon.includes(e+1)){var t=this.CurMelee,n=this.getGunInfo(t);n&&(n.State=1,this.setGunInfo(t,n));var o=this.getGunInfo(e);o&&(o.State=2,this.setGunInfo(e,o)),this.setItem(i.default.ST_CurMeleeId,e+"")}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CurRange",{get:function(){return parseInt(this.getItem(i.default.ST_CurRangeId,"0"))},set:function(e){if(e!=this.CurRange&&a.default.rangeWeapon.includes(e+1)){var t=this.CurRange,n=this.getGunInfo(t);n&&(n.State=1,this.setGunInfo(t,n));var o=this.getGunInfo(e);o&&(o.State=2,this.setGunInfo(e,o)),this.setItem(i.default.ST_CurRangeId,e+"")}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curWeapon",{get:function(){return this.CurRange},set:function(e){a.default.meleeWeapon.includes(e+1)?this.CurMelee=e:a.default.rangeWeapon.includes(e+1)&&(this.CurRange=e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"guide_skill",{get:function(){return this.getItem(i.default.ST_Guide_Skill,!0)},set:function(e){this.setItem(i.default.ST_Guide_Skill,e),cc.game.emit(i.default.E_ShareOrVideo)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"best_time",{get:function(){return parseInt(this.getItem("best_time","0"))},set:function(e){e>this.best_time&&this.setItem("best_time",e+"")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"best_kill",{get:function(){return parseInt(this.getItem("best_kill","0"))},set:function(e){e>this.best_kill&&this.setItem("best_kill",e+"")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"best_level",{get:function(){return parseInt(this.getItem("best_level","0"))},set:function(e){e>this.best_level&&this.setItem("best_level",e+"")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"best_coin",{get:function(){return parseInt(this.getItem("best_coin","0"))},set:function(e){e>this.best_coin&&this.setItem("best_coin",e+"")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shareNum",{get:function(){return this.getItem(i.default.ST_ShareNum,0)},set:function(e){this.setItem(i.default.ST_ShareNum,e),cc.game.emit(i.default.E_ShareOrVideo)},enumerable:!1,configurable:!0}),e.prototype.getItem=function(e,t){return null!=this._dataPool[e]&&null!=this._dataPool[e]?this._dataPool[e]:t},e.prototype.setItem=function(e,t){this._dataPool[e]=t,this._save()},e.prototype._save=function(){cc.sys.localStorage.setItem(i.default.ST_GameData,JSON.stringify(this._dataPool))},e}();n.default=o,cc._RF.pop()},{"../game/weapon":"weapon","./Constant":"Constant"}],FlyCoin:[function(e,t,n){"use strict";cc._RF.push(t,"ed685HUdhhBDJfsYmbDGwcF","FlyCoin"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./CocosZ"),i=function(){function e(){}return e.Show=function(e,t,n,i){var o=a.cocosz.resMgr.getRes("FlyIcon",cc.Prefab);if(o)for(var r=0,s=function(){var s=cc.instantiate(o);if(s){s.children.forEach(function(t){t.name==e?t.opacity=255:t.opacity=0}),n&&(s.group=n),s.position=cc.v3(.5*cc.winSize.width,.5*cc.winSize.height),s.scale=2,cc.director.getScene().addChild(s,1e4);var c=cc.tween(s);c.by(.2,{x:400*Math.random()-200,y:400*Math.random()-200}),c.delay(.5*Math.random()+.2),c.parallel(cc.tween().to(.3,{position:t}),cc.tween().to(.3,{scale:0})),c.call(function(){14==++r&&i&&i(),a.cocosz.audioMgr.playEffect(e),s.destroy()}),c.start()}},c=0;c<15;c++)s()},e}();n.default=i,cc._RF.pop()},{"./CocosZ":"CocosZ"}],GameABI:[function(e,t,n){"use strict";cc._RF.push(t,"4c86fXm0XhEAJH0Ex0ba5hU","GameABI"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameABI=void 0,n.GameABI=[{inputs:[{internalType:"uint256",name:"_currentChainSelectorIndex",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"router",type:"address"}],name:"InvalidRouter",type:"error"},{inputs:[{internalType:"uint256",name:"currentBalance",type:"uint256"},{internalType:"uint256",name:"calculatedFees",type:"uint256"}],name:"NotEnoughBalance",type:"error"},{inputs:[{internalType:"address",name:"have",type:"address"},{internalType:"address",name:"want",type:"address"}],name:"OnlyVRFWrapperCanFulfill",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"startTime",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endTime",type:"uint256"},{indexed:!1,internalType:"address",name:"player",type:"address"},{indexed:!1,internalType:"uint256",name:"grade",type:"uint256"},{indexed:!1,internalType:"uint256",name:"reLive",type:"uint256"}],name:"GameLogEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"messageId",type:"bytes32"},{indexed:!0,internalType:"uint64",name:"sourceChainSelector",type:"uint64"},{indexed:!1,internalType:"address",name:"sender",type:"address"},{components:[{internalType:"address",name:"player",type:"address"},{internalType:"uint256",name:"time",type:"uint256"},{internalType:"uint256",name:"chainIndex",type:"uint256"}],indexed:!1,internalType:"struct ZKGameClient.MessageItem",name:"messageItem",type:"tuple"}],name:"MessageReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"messageId",type:"bytes32"},{indexed:!0,internalType:"uint64",name:"destinationChainSelector",type:"uint64"},{indexed:!1,internalType:"address",name:"receiver",type:"address"},{components:[{internalType:"address",name:"player",type:"address"},{internalType:"uint256",name:"time",type:"uint256"},{internalType:"uint256",name:"chainIndex",type:"uint256"}],indexed:!1,internalType:"struct ZKGameClient.MessageItem",name:"messageItem",type:"tuple"},{indexed:!1,internalType:"address",name:"feeToken",type:"address"},{indexed:!1,internalType:"uint256",name:"fees",type:"uint256"}],name:"MessageSent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"requestId",type:"uint256"},{indexed:!1,internalType:"uint256[]",name:"randomWords",type:"uint256[]"},{indexed:!1,internalType:"uint256",name:"payment",type:"uint256"},{components:[{internalType:"uint256",name:"itemType",type:"uint256"},{internalType:"uint256",name:"num",type:"uint256"}],indexed:!1,internalType:"struct ZKGameClient.LotteryItem",name:"lotteryItem",type:"tuple"}],name:"RequestLotteryFulfilled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"requestId",type:"uint256"},{indexed:!1,internalType:"uint32",name:"numWords",type:"uint32"}],name:"RequestLotterySent",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"LotteryItemList",outputs:[{internalType:"uint256",name:"itemType",type:"uint256"},{internalType:"uint256",name:"num",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"buyOrUpgradeSkin",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"buyOrUpgradeWeapon",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"messageId",type:"bytes32"},{internalType:"uint64",name:"sourceChainSelector",type:"uint64"},{internalType:"bytes",name:"sender",type:"bytes"},{internalType:"bytes",name:"data",type:"bytes"},{components:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct Client.EVMTokenAmount[]",name:"destTokenAmounts",type:"tuple[]"}],internalType:"struct Client.Any2EVMMessage",name:"message",type:"tuple"}],name:"ccipReceive",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"chainSelectors",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentChainSelectorIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentMessageItem",outputs:[{internalType:"address",name:"player",type:"address"},{internalType:"uint256",name:"time",type:"uint256"},{internalType:"uint256",name:"chainIndex",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"gameLogMap",outputs:[{internalType:"uint256",name:"startTime",type:"uint256"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"address",name:"player",type:"address"},{internalType:"uint256",name:"reLive",type:"uint256"},{internalType:"uint256",name:"grade",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"proof",type:"bytes"},{internalType:"uint256",name:"time",type:"uint256"}],name:"gameOver",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"gasTokenAggregators",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"usd",type:"uint256"}],name:"getGasTokenAmountByUsd",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLinkToken",outputs:[{internalType:"contract LinkTokenInterface",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlayerAllAssets",outputs:[{internalType:"uint256",name:"gold",type:"uint256"},{internalType:"uint256",name:"diamond",type:"uint256"},{internalType:"uint256[]",name:"weapon",type:"uint256[]"},{internalType:"uint256[]",name:"skin",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlayerAllSkinInfo",outputs:[{internalType:"uint256[]",name:"skinIdList",type:"uint256[]"},{internalType:"uint256[]",name:"skinLevelList",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlayerAllWeaponInfo",outputs:[{internalType:"uint256[]",name:"weaponIdList",type:"uint256[]"},{internalType:"uint256[]",name:"weaponLevelList",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlayerLastLotteryRequestStatus",outputs:[{internalType:"uint256",name:"paid",type:"uint256"},{internalType:"bool",name:"fulfilled",type:"bool"},{components:[{internalType:"uint256",name:"itemType",type:"uint256"},{internalType:"uint256",name:"num",type:"uint256"}],internalType:"struct ZKGameClient.LotteryItem",name:"lotteryItem",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTopListInfo",outputs:[{internalType:"uint256[10]",name:"",type:"uint256[10]"},{internalType:"uint256[10]",name:"",type:"uint256[10]"},{internalType:"address[10]",name:"",type:"address[10]"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"i_vrfV2PlusWrapper",outputs:[{internalType:"contract IVRFV2PlusWrapper",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"initLotteryList",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"linkTokens",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"lotteryRequestMap",outputs:[{internalType:"address",name:"player",type:"address"},{internalType:"uint256",name:"paid",type:"uint256"},{internalType:"bool",name:"fulfilled",type:"bool"},{components:[{internalType:"uint256",name:"itemType",type:"uint256"},{internalType:"uint256",name:"num",type:"uint256"}],internalType:"struct ZKGameClient.LotteryItem",name:"lotteryItem",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"mintGold",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerDiamondMap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerGoldMap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerLastlotteryRequestIdMap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerLatestGameLogIdMap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"playerSkinLevelMap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"playerSkinMap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"playerWeaponLevelMap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"}],name:"playerWeaponMap",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_requestId",type:"uint256"},{internalType:"uint256[]",name:"_randomWords",type:"uint256[]"}],name:"rawFulfillRandomWords",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"reLive",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"receivers",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"requestLottery",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"routers",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"startGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"topChainIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"topGradeList",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"topPlayerList",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalGame",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"receiverList",type:"address[]"}],name:"updateReceivers",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawLink",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"wrapperAddressList",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"zkTimeProofAddressList",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],cc._RF.pop()},{}],GameCtr:[function(e,t,n){"use strict";cc._RF.push(t,"127578MG9RJ17mctwhLeqSx","GameCtr"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Constant"),i=e("./CocosZ"),o=e("../game/gameMgr"),r=e("../const"),s=function(){function e(){this.curUseSkinId=-1,this.loadProgress=0,this._loadMapPro=0,this._totalCount=0,this._compCount=0,this._pathBack="",this._prefabBack=null}return e.prototype.init=function(){this.loadProgress=0,this._loadMapPro=0,this._totalCount=0,this._compCount=0,this.loadRes()},e.prototype.updateLoadRes=function(){this.loadProgress=(this._loadMapPro+this._compCount/this._totalCount)/2,this._compCount>=this._totalCount&&0==this._loadMapPro&&(this._loadMapPro=.01,this.loadMap()),cc.game.emit(a.default.E_GAME_LOGIC,{type:a.default.E_UPDATE_PROGRESS,data:this.loadProgress})},e.prototype.loadRes=function(){var e=this,t=[],n=[],a=[];i.cocosz.getDirWithPath("audio_game",cc.AudioClip,t),i.cocosz.resMgr.loadAndCacheResArray(t,cc.AudioClip,null,function(){e._compCount++,e.updateLoadRes()}),i.cocosz.getDirWithPath("audio_zombie",cc.AudioClip,n),i.cocosz.resMgr.loadAndCacheResArray(n,cc.AudioClip,null,function(){e._compCount++,e.updateLoadRes()}),i.cocosz.getDirWithPath("prefab_zombie_skill",cc.Prefab,a),i.cocosz.resMgr.loadAndCacheResArray(a,cc.Prefab,null,function(){e._compCount++,e.updateLoadRes()}),this._totalCount=t.length+n.length+a.length},e.prototype.loadMap=function(){var e=this,t=r.map_path;this._pathBack!=t&&this._prefabBack&&this._prefabBack.isValid&&cc.assetManager.releaseAsset(this._prefabBack),i.cocosz.resMgr.loadRes(t,cc.Prefab,function(t,n){t/n>e._loadMapPro&&(e._loadMapPro=t/n),e._loadMapPro>.99&&(e._loadMapPro=.99),e.updateLoadRes()},function(n,s){n?i.cocosz.sceneMgr.loadScene(r.scene_home,function(){i.cocosz.uiMgr.openPage(a.PageName.UIHomePage)}):(e._pathBack=t,e._prefabBack=s,o.gameMgr.map=cc.instantiate(s),o.gameMgr.mapSize=o.gameMgr.map.getContentSize(),o.gameMgr.node.addChild(o.gameMgr.map,-5),e._loadMapPro=1,e.updateLoadRes())})},e}();n.default=s,cc._RF.pop()},{"../const":"const","../game/gameMgr":"gameMgr","./CocosZ":"CocosZ","./Constant":"Constant"}],GameMgr:[function(e,t,n){"use strict";cc._RF.push(t,"2a6femhqDpCk53HbKVrUmes","GameMgr");var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function s(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}c((a=a.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,a,i,o,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(6===o[0]&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(s){o=[6,s],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.YZ_Reward=n.RewardType=void 0;var o,r=e("./GameCtr"),s=e("./CocosZ"),c=e("./Constant"),l=e("./Msg"),u=e("../const"),p=e("LanguageData");(function(e){e.Gold="gold",e.Skin="Skin"})(o=n.RewardType||(n.RewardType={}));n.YZ_Reward=function(){this.rewardType=o.Gold,this.rewardValue=0};var d=function(){function e(){this._state=c.GameState.None,this._gameCtr=new r.default,this.gameStartTime=0,this.canTry=!0,this.canGame=!0}return Object.defineProperty(e,"inst",{get:function(){return e._inst||(e._inst=new e),e._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"State",{get:function(){return this._state},set:function(e){this._state=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameCtr",{get:function(){return this._gameCtr},enumerable:!1,configurable:!0}),e.prototype.gameStart=function(e){return a(this,void 0,void 0,function(){return i(this,function(){return s.cocosz.curLevel=e,this.canGame=!1,this._loadGameScene(),[2]})})},e.prototype._loadGameScene=function(){var e=this;this.gameCtr.curUseSkinId<0&&(this.gameCtr.curUseSkinId=s.cocosz.dataMgr.CurSkinId),s.cocosz.sceneMgr.loadScene(u.scene_game,function(){e.gameStartTime=(new Date).getTime(),e.canTry=!0,e.canGame=!0,e._gamePrepare(),s.cocosz.uiMgr.openPage(c.PageName.UIGameLoadingPage)})},e.prototype._gamePrepare=function(){try{this.State=c.GameState.Prepare,this.gameCtr.init()}catch(e){cc.error("erro >>",e),s.cocosz.sceneMgr.loadScene(u.scene_home,function(){s.cocosz.uiMgr.openPage(c.PageName.UIHomePage),l.default.Show(p.t("msg.net_error"))})}},e.prototype.gameSuccess=function(){this.State=c.GameState.Success,s.cocosz.audioMgr.playEffectWinner(),Math.round(((new Date).getTime()-this.gameStartTime)/1e3/60),s.cocosz.uiMgr.openPage(c.PageName.UIOverPage)},e.prototype.gameFailed=function(){this.State=c.GameState.Failed,s.cocosz.audioMgr.playEffectFailed(),Math.round(((new Date).getTime()-this.gameStartTime)/1e3/60),s.cocosz.uiMgr.openPage(c.PageName.UIOverPage)},e}();n.default=d,cc._RF.pop()},{"../const":"const","./CocosZ":"CocosZ","./Constant":"Constant","./GameCtr":"GameCtr","./Msg":"Msg",LanguageData:"LanguageData"}],GuideLayer:[function(e,t,n){"use strict";cc._RF.push(t,"acaa0jcS+FD1plO6fY1CE9z","GuideLayer");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.getGuideLayer=void 0;var r=cc._decorator,s=r.ccclass,c=r.property,l=null,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgLoadNode=null,t.points=null,t.curIndex=0,t}return i(t,e),t.prototype.onLoad=function(){l?this.destroy():(l=this,cc.game.addPersistRootNode(this.node),this.node.setPosition(cc.winSize.width/2,cc.winSize.height/2),this.node.setContentSize(cc.winSize))},t.prototype.start=function(){this.showPoint(),this.schedule(this.showPoint,.5)},t.prototype.onDestroy=function(){this.unschedule(this.showPoint),l===this&&(l=null)},t.prototype.showPoint=function(){for(var e=this.points.children,t=e.length,n=0;n<t;n++)e[n].opacity=n<=this.curIndex?255:0;this.curIndex=(this.curIndex+1)%t},t.prototype.showBgAni=function(){this.bgLoadNode.active=!0,this.curIndex=0},t.prototype.hideBgAni=function(){this.bgLoadNode.active=!1},o([c(cc.Node)],t.prototype,"bgLoadNode",void 0),o([c(cc.Node)],t.prototype,"points",void 0),o([s],t)}(cc.Component);n.default=u,n.getGuideLayer=function(){return l},cc._RF.pop()},{}],LanguageData:[function(e,t){"use strict";cc._RF.push(t,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var n=e("polyglot.min"),a=null;function i(e){return window.i18n.languages[e]}function o(e){e&&(a?a.replace(e):a=new n({phrases:e,allowMissing:!0}))}window.i18n||(window.i18n={languages:{},curLang:""}),t.exports={init:function(e){if(e!==window.i18n.curLang){var t=i(e)||{};window.i18n.curLang=e,o(t),this.inst=a}},t:function(e,t){if(a)return a.t(e,t)},inst:a,updateSceneRenderers:function(){for(var e=cc.director.getScene().children,t=[],n=0;n<e.length;++n){var a=e[n].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(t,a)}for(var i=0;i<t.length;++i){var o=t[i];o.node.active&&o.updateLabel()}for(var r=[],s=0;s<e.length;++s){var c=e[s].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(r,c)}for(var l=0;l<r.length;++l){var u=r[l];u.node.active&&u.updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],LocalizedLabel:[function(e,t){"use strict";cc._RF.push(t,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var n=e("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateLabel())}},_dataID:""},onLoad:function(){n.inst||n.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Label);if(e)return this.label=e,void this.updateLabel()},updateLabel:function(){this.label?n.t(this.dataID)&&(this.label.string=n.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(e,t){"use strict";cc._RF.push(t,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var n=e("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:n}},onLoad:function(){this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(e){for(var t=0;t<this.spriteFrameSet.length;++t)if(this.spriteFrameSet[t].language===e)return this.spriteFrameSet[t].spriteFrame},updateSprite:function(e){if(this.sprite){var t=this.getSpriteFrameByLang(e);!t&&this.spriteFrameSet[0]&&(t=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=t}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],Msg:[function(e,t,n){"use strict";cc._RF.push(t,"b942cZiiK1H/oXLv3KFwjp+","Msg"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./CocosZ"),i=function(){function e(){}return e.Show=function(t){var n=a.cocosz.resMgr.getRes("TipsPanel",cc.Prefab);if(n){var i=cc.instantiate(n);if(i.group="ui",i){i.position=cc.v3(cc.winSize.width/2,cc.winSize.height/2+300),cc.director.getScene().addChild(i,1e4),cc.find("label",i).getComponent(cc.Label).string=t,i.scale=0;var o=cc.tween(i);o.to(.25,{scale:1},{easing:"backOut"}),o.delay(2),o.to(.25,{scale:0},{easing:"backIn"}),o.call(function(){i.destroy()}),o.start();for(var r=e.tipList.length-1;r>=0;r--)e.tipList[r].isValid?e.tipList[r].y+=120:e.tipList.splice(r,1);e.tipList.push(i)}}},e.isShow=!1,e.isTouch=!1,e.tipList=[],e}();n.default=i,cc._RF.pop()},{"./CocosZ":"CocosZ"}],ResMgr:[function(e,t,n){"use strict";cc._RF.push(t,"16b2fTucYZJHKNGhllUA2TP","ResMgr"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./CocosZ"),i=function(){function e(){this._prefabDic={},this._imgDic={},this._atlasDic={},this._audioDic={},this._jsonDic={}}return Object.defineProperty(e,"inst",{get:function(){return e._inst||(e._inst=new e,e._inst._init()),e._inst},enumerable:!1,configurable:!0}),e.prototype._init=function(){},e.prototype.cacheCocoszAudio=function(){for(var e=0;e<a.cocosz.audioList.length;e++){var t=a.cocosz.audioList[e];this._cacheRes(t,cc.AudioClip)}a.cocosz.audioList=null},e.prototype.loadRes=function(e,t,n,i){var o=a.cocosz.getBundleWithPath(e);o&&o.load(e,t,function(e,t,a){n&&n(e,t,a)},function(e,t){i&&i(e,t)})},e.prototype.loadAndCacheResArray=function(e,t,n,a){for(var i=0;i<e.length;i++)this.loadAndCacheRes(e[i],t,n,a)},e.prototype.loadAndCacheRes=function(e,t,n,i){var o=this,r=e.path?e.path:e,s=a.cocosz.getBundleWithPath(r);s&&s.load(r,t,function(e,t,a){n&&n(e,t,a)},function(e,n){e||o._cacheRes(n,t),i&&i(e,n)})},e.prototype._cacheRes=function(e,t){t==cc.Prefab?this._cachPrefab(e):t==cc.SpriteFrame?this._cachTexture(e):t==cc.SpriteAtlas?this._cachSpriteAtlas(e):t==cc.AudioClip?this._cachAudioClip(e):t==cc.JsonAsset&&this._cachJsonAsset(e)},e.prototype._cachPrefab=function(e){e&&(e.addRef(),this._prefabDic[e.name]=e)},e.prototype._cachTexture=function(e){e&&(e.addRef(),this._imgDic[e.name]=e)},e.prototype._cachSpriteAtlas=function(e){if(e){e.addRef(),this._atlasDic[e.name]=e;for(var t=e.getSpriteFrames(),n=0;n<t.length;n++)this._cachTexture(t[n])}},e.prototype._cachAudioClip=function(e){e&&(e.addRef(),this._audioDic[e.name]=e)},e.prototype._cachJsonAsset=function(e){e&&(e.addRef(),this._jsonDic[e.name]=e)},e.prototype.getRes=function(e,t){switch(t){case cc.Prefab:return this._check(e,this._prefabDic[e]);case cc.SpriteFrame:return this._check(e,this._imgDic[e]);case cc.AudioClip:return this._check(e,this._audioDic[e]);case cc.JsonAsset:return this._check(e,this._jsonDic[e]);default:return null}},e.prototype._check=function(e,t){return t&&t.isValid?t:null},e.prototype.releaseResArray=function(e,t){var n=this;e.forEach(function(e){var a=e.path.split("/").pop();a&&n.releaseSingleRes(a,t)})},e.prototype.releaseSingleRes=function(e,t){switch(t){case cc.Prefab:this._prefabDic[e]&&cc.isValid(this._prefabDic[e])&&(this._prefabDic[e].decRef(),cc.assetManager.releaseAsset(this._prefabDic[e]),this._prefabDic[e]=null);break;case cc.SpriteFrame:this._imgDic[e]&&cc.isValid(this._imgDic[e])&&(this._imgDic[e].decRef(),cc.assetManager.releaseAsset(this._imgDic[e]),this._imgDic[e]=null);break;case cc.SpriteAtlas:this._atlasDic[e]&&cc.isValid(this._atlasDic[e])&&(this._atlasDic[e].decRef(),cc.assetManager.releaseAsset(this._atlasDic[e]),this._atlasDic[e]=null);break;case cc.AudioClip:this._audioDic[e]&&cc.isValid(this._audioDic[e])&&(this._audioDic[e].decRef(),cc.assetManager.releaseAsset(this._audioDic[e]),this._audioDic[e]=null);break;case cc.JsonAsset:this._jsonDic[e]&&cc.isValid(this._jsonDic[e])&&(this._jsonDic[e].decRef(),cc.assetManager.releaseAsset(this._jsonDic[e]),this._jsonDic[e]=null)}},e}();n.default=i,cc._RF.pop()},{"./CocosZ":"CocosZ"}],SceneMgr:[function(e,t,n){"use strict";cc._RF.push(t,"a162cN35T1OAIoKBFHGNLm8","SceneMgr"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("../const"),i=e("../game/gameMgr"),o=e("../game/setMap"),r=e("../UI/GuideLayer"),s=e("./CocosZ"),c=function(){function e(){this._activeScene="",this._timeInterval=0}return Object.defineProperty(e,"inst",{get:function(){return e._inst||(e._inst=new e),e._inst},enumerable:!1,configurable:!0}),e.prototype.loadScene=function(e,t){var n=this;this._activeScene==e&&(new Date).getTime()-this._timeInterval<1e3||(this._timeInterval=(new Date).getTime(),this.loadBefore(e,function(){cc.director.loadScene(e,function(){n._activeScene=e,t(),n.loadFinish(e)})}))},e.prototype.loadBefore=function(e,t){var n=r.getGuideLayer();if(n&&n.isValid&&(n.node.zIndex=cc.macro.MAX_ZINDEX,n.showBgAni()),e==a.scene_home&&i.gameMgr&&i.gameMgr.map&&i.gameMgr.map.isValid){var s=i.gameMgr.map.getComponent(o.default);if(s)return void setTimeout(function(){s.release(t)},100)}t&&t()},e.prototype.loadFinish=function(e){var t=r.getGuideLayer();e==a.scene_home?t&&t.isValid&&(t.node.zIndex=cc.macro.MIN_ZINDEX):e==a.scene_game&&(t.node.zIndex=cc.macro.MIN_ZINDEX),s.cocosz.audioMgr.playBgm()},e.prototype.releaseRes=function(){var e=[];s.cocosz.getDirWithPath("audio_game",cc.AudioClip,e),s.cocosz.resMgr.releaseResArray(e,cc.AudioClip);var t=[];s.cocosz.getDirWithPath("audio_zombie",cc.AudioClip,t),s.cocosz.resMgr.releaseResArray(t,cc.AudioClip);var n=[];s.cocosz.getDirWithPath("prefab_zombie",cc.Prefab,n),s.cocosz.resMgr.releaseResArray(n,cc.Prefab);var a=[];s.cocosz.getDirWithPath("prefab_zombie_skill",cc.Prefab,a),s.cocosz.resMgr.releaseResArray(a,cc.Prefab);var i=[];s.cocosz.getDirWithPath("tex_zombie",cc.SpriteFrame,i),s.cocosz.resMgr.releaseResArray(i,cc.SpriteFrame)},e}();n.default=c,cc._RF.pop()},{"../UI/GuideLayer":"GuideLayer","../const":"const","../game/gameMgr":"gameMgr","../game/setMap":"setMap","./CocosZ":"CocosZ"}],ShareOrVideo:[function(e,t,n){"use strict";cc._RF.push(t,"af730WeuddAYrpP8Nt749SI","ShareOrVideo");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Manager/Constant"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._btn=!1,t.isGuideSKill=!1,t}return i(t,e),Object.defineProperty(t.prototype,"btn",{get:function(){return this._btn},set:function(){this._btn=!1},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,function(){cc.game.emit(r.default.E_ShareOrVideo)})},t.prototype.onDestroy=function(){cc.game.targetOff(this)},t.prototype.start=function(){},o([l()],t.prototype,"btn",null),o([l({type:cc.Boolean,tooltip:"\u662f\u5426\u65b0\u624b\u6307\u5f15\u514d\u8d39\u4f7f\u7528"})],t.prototype,"isGuideSKill",void 0),o([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../Manager/Constant":"Constant"}],SpriteFrameSet:[function(e,t){"use strict";cc._RF.push(t,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var n=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});t.exports=n,cc._RF.pop()},{}],TweenEffect:[function(e,t,n){"use strict";cc._RF.push(t,"54110rONwJBArNNreXEArQY","TweenEffect");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.EaseType=void 0;var r,s,c,l=cc._decorator,u=l.ccclass,p=l.property,d=l.menu;l.executeInEditMode,function(e){e[e.none=0]="none",e[e.fade=1]="fade",e[e.easeIn=2]="easeIn",e[e.easeOut=3]="easeOut",e[e.easeInOut=4]="easeInOut",e[e.easeExponentialIn=5]="easeExponentialIn",e[e.easeExponentialOut=6]="easeExponentialOut",e[e.easeExponentialInOut=7]="easeExponentialInOut",e[e.easeSineIn=8]="easeSineIn",e[e.easeSineOut=9]="easeSineOut",e[e.easeSineInOut=10]="easeSineInOut",e[e.easeElasticIn=11]="easeElasticIn",e[e.easeElasticOut=12]="easeElasticOut",e[e.easeElasticInOut=13]="easeElasticInOut",e[e.easeBounceIn=14]="easeBounceIn",e[e.easeBounceOut=15]="easeBounceOut",e[e.easeBounceInOut=16]="easeBounceInOut",e[e.easeBackIn=17]="easeBackIn",e[e.easeBackOut=18]="easeBackOut",e[e.easeBackInOut=19]="easeBackInOut",e[e.easeBezierAction=20]="easeBezierAction",e[e.easeQuadraticActionIn=21]="easeQuadraticActionIn",e[e.easeQuadraticActionOut=22]="easeQuadraticActionOut",e[e.easeQuadraticActionInOut=23]="easeQuadraticActionInOut",e[e.easeQuarticActionIn=24]="easeQuarticActionIn",e[e.easeQuarticActionOut=25]="easeQuarticActionOut",e[e.easeQuarticActionInOut=26]="easeQuarticActionInOut",e[e.easeQuinticActionIn=27]="easeQuinticActionIn",e[e.easeQuinticActionOut=28]="easeQuinticActionOut",e[e.easeQuinticActionInOut=29]="easeQuinticActionInOut",e[e.easeCircleActionIn=30]="easeCircleActionIn",e[e.easeCircleActionOut=31]="easeCircleActionOut",e[e.easeCircleActionInOut=32]="easeCircleActionInOut",e[e.easeCubicActionIn=33]="easeCubicActionIn",e[e.easeCubicActionOut=34]="easeCubicActionOut",e[e.easeCubicActionInOut=35]="easeCubicActionInOut"}(r=n.EaseType||(n.EaseType={})),function(e){e[e.none=0]="none",e[e.line=1]="line",e[e.angle=2]="angle",e[e.opacity=3]="opacity",e[e.scale=4]="scale",e[e.skewY=5]="skewY",e[e.shake=6]="shake",e[e.flip=7]="flip"}(s||(s={})),function(e){e[e.onLoad=0]="onLoad",e[e.start=1]="start",e[e.onEnable=2]="onEnable"}(c||(c={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=s.none,t.easeType=r.none,t.run=c.start,t.delay=0,t.time=1,t.repeat=-1,t.isReverse=!1,t.num=0,t.toPos=cc.Vec3.ZERO,t._tw=null,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){switch(this._tw=cc.tween(this.node),this._tw.delay(this.delay),this.type){case s.line:this._line();break;case s.angle:this._angle();break;case s.opacity:this._opacity();break;case s.scale:this._scale();break;case s.skewY:this._skewY();break;case s.shake:this._shake();break;case s.flip:this._flip()}this.repeat>0?this._tw.union().repeat(this.repeat):-1==this.repeat&&this._tw.union().repeatForever(),this.run==c.onLoad&&this._tw.start()},t.prototype.start=function(){this.run==c.start&&this._tw.start()},t.prototype.onEnable=function(){this.run==c.onEnable&&(this.node.stopAllActions(),this._tw.start())},t.prototype._line=function(){this._tw.by(this.time,{position:this.toPos},{easing:n.getEase(this.easeType)}),this.isReverse&&this._tw.by(this.time,{position:this.toPos.neg()},{easing:n.getEase(this.easeType)})},t.prototype._angle=function(){this._tw.by(this.time,{angle:this.num},{easing:n.getEase(this.easeType)}),this.isReverse&&this._tw.by(this.time,{angle:-this.num},{easing:n.getEase(this.easeType)})},t.prototype._opacity=function(){this._tw.by(this.time,{opacity:this.num},{easing:n.getEase(this.easeType)}),this.isReverse&&this._tw.by(this.time,{opacity:-this.num},{easing:n.getEase(this.easeType)})},t.prototype._scale=function(){this._tw.by(this.time,{scale:this.num},{easing:n.getEase(this.easeType)}),this.isReverse&&this._tw.by(this.time,{scale:-this.num},{easing:n.getEase(this.easeType)})},t.prototype._skewY=function(){this._tw.by(this.time,{skewY:this.num},{easing:n.getEase(this.easeType)}),this.isReverse&&this._tw.by(this.time,{skewY:-this.num},{easing:n.getEase(this.easeType)})},t.prototype._shake=function(){this._tw.by(this.time,{angle:this.num},{easing:n.getEase(this.easeType)}).by(2*this.time,{angle:-2*this.num},{easing:n.getEase(this.easeType)}).by(this.time,{angle:this.num},{easing:n.getEase(this.easeType)})},t.prototype._flip=function(){this._tw.to(this.time,{scaleX:-this.node.scaleX},{easing:n.getEase(this.easeType)}).to(this.time,{scaleX:this.node.scaleX},{easing:n.getEase(this.easeType)})},t.panel_mask_opacity=function(e,t){var n=e.opacity;e.opacity=0,cc.tween(e).to(.2,{opacity:n}).call(function(){t&&t()}).start()},t.panel_open_moveY=function(e,t){e.y+=1e3,cc.tween(e).to(.5,{y:e.y-1e3},{easing:"sineOut"}).call(function(){t&&t()}).start()},t.panel_close_moveY=function(e,t){cc.tween(e).to(.5,{y:e.y+1e3},{easing:"sineIn"}).call(function(){t&&t()}).start()},t.panel_open_scaleY=function(e,t){e.scaleY=0,cc.tween(e).to(.5,{scaleY:1},{easing:"sineOut"}).call(function(){t&&t()}).start()},t.panel_close_scaleY=function(e,t){cc.tween(e).to(.5,{scaleY:0},{easing:"sineIn"}).call(function(){t&&t()}).start()},t.panel_open_scale=function(e,t){e.scale=0,cc.tween(e).to(.5,{scale:1},{easing:"sineOut"}).call(function(){t&&t()}).start()},t.panel_close_scale=function(e,t){cc.tween(e).to(.5,{scale:0},{easing:"sineIn"}).call(function(){t&&t()}).start()},t.panel_open_opacity_scale=function(e,t){e.opacity=0,e.scale=1.5,cc.tween(e).to(.5,{opacity:255,scale:1},{easing:"fade"}).call(function(){t&&t()}).start()},t.panel_close_opacity_scale=function(e,t){cc.tween(e).to(.5,{opacity:0,scale:2},{easing:"fade"}).call(function(){t&&t()}).start()},t.getEase=function(e){switch(e){case r.none:return"linear";case r.fade:return"fade";case r.easeOut:return"easeOut";case r.easeInOut:return"easeInOut";case r.easeExponentialIn:return"easeExponentialIn";case r.easeExponentialOut:return"easeExponentialOut";case r.easeExponentialInOut:return"easeExponentialInOut";case r.easeSineIn:return"sineIn";case r.easeSineOut:return"sineOut";case r.easeSineInOut:return"sineInOut";case r.easeElasticIn:return"elasticIn";case r.easeElasticOut:return"elasticOut";case r.easeElasticInOut:return"elasticInOut";case r.easeBounceIn:return"bounceIn";case r.easeBounceOut:return"bounceOut";case r.easeBackIn:return"backIn";case r.easeBackOut:return"backOut";case r.easeBackInOut:return"backInOut";case r.easeQuadraticActionIn:return"quadraticActionIn";case r.easeQuadraticActionOut:return"quadraticActionOut";case r.easeQuadraticActionInOut:return"quadraticActionInOut";case r.easeQuarticActionIn:return"quarticActionIn";case r.easeQuarticActionOut:return"quarticActionOut";case r.easeQuarticActionInOut:return"quarticActionInOut";case r.easeQuinticActionIn:return"quinticActionIn";case r.easeQuinticActionOut:return"quinticActionOut";case r.easeQuinticActionInOut:return"quinticActionInOut";case r.easeCircleActionIn:return"easeCircleActionIn";case r.easeCircleActionOut:return"circleActionOut";case r.easeCircleActionInOut:return"circleActionInOut";case r.easeCubicActionIn:return"cubicActionIn";case r.easeCubicActionOut:return"cubicActionOut";case r.easeCubicActionInOut:return"cubicActionInOut"}},o([p({type:cc.Enum(s),tooltip:"\u52a8\u4f5c\u7c7b\u578b"})],t.prototype,"type",void 0),o([p({type:cc.Enum(r)})],t.prototype,"easeType",void 0),o([p({type:cc.Enum(c),tooltip:"\u8fd0\u884c\u6761\u4ef6"})],t.prototype,"run",void 0),o([p({type:cc.Float,tooltip:"\u5f00\u59cb\u5ef6\u8fdf\u65f6\u95f4"})],t.prototype,"delay",void 0),o([p({type:cc.Float,tooltip:"\u5355\u6b21\u8fd0\u884c\u65f6\u95f4"})],t.prototype,"time",void 0),o([p({type:cc.Integer,tooltip:"\u91cd\u590d\u6b21\u6570 -1\u6c38\u4e45\u91cd\u590d 0\u4e0d\u91cd\u590d"})],t.prototype,"repeat",void 0),o([p({tooltip:"\u662f\u5426\u5012\u7f6e"})],t.prototype,"isReverse",void 0),o([p({tooltip:"\u76ee\u6807\u503c",visible:function(){return this.type==s.angle||this.type==s.opacity||this.type==s.scale||this.type==s.skewY}})],t.prototype,"num",void 0),o([p({tooltip:"\u76ee\u6807\u5750\u6807",visible:function(){return this.type==s.line}})],t.prototype,"toPos",void 0),n=o([u,d("Tools/TweenEffect")],t)}(cc.Component);n.default=h,cc._RF.pop()},{}],UIADPanel:[function(e,t,n){"use strict";cc._RF.push(t,"003c2RLzLtIya/ty0NNYWCD","UIADPanel");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Manager/CocosZ"),s=e("../Manager/Msg"),c=e("LanguageData"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnAD=null,t.btnSkip=null,t.bg=null,t.bg1=null,t.BtnDouble=null,t.BtnBack=null,t.BtnBackBg1=null,t.isDiamond=!1,t}return i(t,e),t.prototype.start=function(){r.cocosz.isADON?(this.node.scale=0,cc.tween(this.node).to(.3,{scale:1},{easing:"backOut"}).start()):this.node.destroy()},t.prototype.setDiamond=function(){this.isDiamond=!0,this.bg.active=!1,this.BtnDouble.active=!1,this.BtnBack.active=!1,this.bg1.active=!0,this.BtnBackBg1.active=!0},t.prototype.watchAD=function(){this.isDiamond,window.mintGold(function(){r.cocosz.dataMgr.DiamondCount+=500,s.default.Show(c.t("msg.gxhdzs")+500)},function(){}),this.node.destroy()},t.prototype.exit=function(){r.cocosz.audioMgr.playBtnEffect(),this.node.destroy()},o([p(cc.Node)],t.prototype,"btnAD",void 0),o([p(cc.Node)],t.prototype,"btnSkip",void 0),o([p(cc.Node)],t.prototype,"bg",void 0),o([p(cc.Node)],t.prototype,"bg1",void 0),o([p(cc.Node)],t.prototype,"BtnDouble",void 0),o([p(cc.Node)],t.prototype,"BtnBack",void 0),o([p(cc.Node)],t.prototype,"BtnBackBg1",void 0),o([u],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Msg":"Msg",LanguageData:"LanguageData"}],UIGameLoadingPage:[function(e,t,n){"use strict";cc._RF.push(t,"c5a1dCIX/VATJjbaL5OivFz","UIGameLoadingPage");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Manager/UIPage"),s=e("../Manager/Constant"),c=e("../Manager/CocosZ"),l=e("./GuideLayer"),u=e("../const"),p=cc._decorator,d=p.ccclass,h=(p.property,function(e){function t(){var t=e.call(this,s.PageName.UIGameLoadingPage)||this;return t._startTime=0,t.isValid()&&t.onLoad(),t}return i(t,e),t.prototype.onLoad=function(){this._startTime=(new Date).getTime()},t.prototype.onOpen=function(){cc.game.on(s.default.E_GAME_LOGIC,this._onGameMessageHandler,this)},t.prototype.onClose=function(){cc.game.targetOff(this),l.getGuideLayer().hideBgAni(),l.getGuideLayer().node.zIndex=cc.macro.MIN_ZINDEX},t.prototype._onGameMessageHandler=function(e){e.type===s.default.E_UPDATE_PROGRESS&&this._updateProgress(e.data)},t.prototype._updateProgress=function(e){if(e>=1){var t=(new Date).getTime()-this._startTime,n=u.loading_min_time_to_game_scene-t,a=function(){c.cocosz.uiMgr.openPage(s.PageName.UIGamePage)};n<=0?a():setTimeout(a,n)}},o([d],t)}(r.default));n.default=h,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","../Manager/UIPage":"UIPage","../const":"const","./GuideLayer":"GuideLayer"}],UIGamePage:[function(e,t,n){"use strict";cc._RF.push(t,"ca02eHXE+9E+Yrp8V9uxTLx","UIGamePage");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function s(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}c((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,i,o,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(6===o[0]&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(s){o=[6,s],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Manager/UIPage"),l=e("../Manager/Constant"),u=e("../Manager/CocosZ"),p=e("../game/gameMgr"),d=(e("LanguageData"),cc._decorator),h=d.ccclass,g=(d.property,function(e){function t(){var t=e.call(this,l.PageName.UIGamePage)||this;return t._handAni=null,t._btnCt=null,t._btnQpbz=null,t.isValid()&&t.onLoad(),t}return i(t,e),t.prototype.onLoad=function(){var e=this;this._handAni=cc.find("handAni",this._page),["rangedWeapon","BtnPause","BtnBullet","BtnShuxing","BtnCt","BtnQpbz"].forEach(function(t){var n=e._page.getChildByName(t);if(n)if(n.on(cc.Node.EventType.TOUCH_END,e._onBtnClickHandler,e),"BtnCt"==n.name)e._btnCt=n,u.cocosz.isShowAd&&u.cocosz.isADON&&!u.cocosz.dataMgr.guide_skill&&"false"!=u.cocosz.getConfigByKey("isVideoAd_Citie")?(e._btnCt.active=!0,e._btnCt.childrenCount&&e._btnCt.children.forEach(function(e){e.active=!1})):(e._btnCt.active=!1,(a=e._btnCt.getComponent(cc.Widget))&&(a.enabled=!1));else if("BtnQpbz"==n.name){var a;e._btnQpbz=n,u.cocosz.isShowAd&&u.cocosz.isADON&&!u.cocosz.dataMgr.guide_skill&&"false"!=u.cocosz.getConfigByKey("isVideoAd_Qpbz")?(e._btnQpbz.active=!0,e._btnQpbz.childrenCount&&e._btnQpbz.children.forEach(function(e){e.active=!1})):(e._btnQpbz.active=!1,(a=e._btnQpbz.getComponent(cc.Widget))&&(a.enabled=!1))}})},t.prototype.onOpen=function(){var e=this;p.gameMgr.uiGamePage=this._page,p.gameMgr.moveArea=cc.find("moveArea",this._page),p.gameMgr.yaogan=cc.find("move",this._page);var t=p.gameMgr.yaogan.getComponent(cc.Widget);t&&(p.gameMgr.yaogan.getComponent(cc.Widget).updateAlignment(),t.enabled=!1),p.gameMgr.rangedWeaponMess=this._page.getChildByName("rangedWeapon"),p.gameMgr.ammo=p.gameMgr.rangedWeaponMess.getChildByName("ammo").getComponent(cc.Label),p.gameMgr.qlzc=this._page.getChildByName("qlzc"),p.gameMgr.BtnBullet=this._page.getChildByName("BtnBullet"),p.gameMgr.model6_bossBar=this._page.getChildByName("bossBar").getComponent(cc.ProgressBar),p.gameMgr.model6_jingyanBar=this._page.getChildByName("jingyanBar").getComponent(cc.ProgressBar),p.gameMgr.model6_skillScrollView=this._page.getChildByName("skillScrollView").getComponent(cc.ScrollView),p.gameMgr.model6_skillScrollView_content=cc.find("skillScrollView/view/content",this._page),p.gameMgr.model6_skillScrollView_item=this._page.getChildByName("item");var n=this._page.getChildByName("BtnShuxing");if(p.gameMgr.model6_touxiang=n.getChildByName("touxiang"),n.getChildByName("avatar").getComponent(cc.Sprite).spriteFrame=u.cocosz.resMgr.getRes("player_"+u.cocosz.gameMgr.gameCtr.curUseSkinId,cc.SpriteFrame),n.getChildByName("avatar").active=!0,p.gameMgr.model6_btnShuxing=this._page.getChildByName("BtnShuxing"),p.gameMgr.model6_btnShuxing&&(p.gameMgr.model6_btnShuxing.active=!0),p.gameMgr.model6_shuxing=n.getChildByName("shuxing"),p.gameMgr.model6_shuxing.active=!1,p.gameMgr.model6_levelLabel=this._page.getChildByName("levelLabel").getComponent(cc.Label),p.gameMgr.model6_timeLabel=this._page.getChildByName("timeLabel").getComponent(cc.Label),p.gameMgr.model6_ts=this._page.getChildByName("ts"),u.cocosz.dataMgr.guide_skill&&("false"!=u.cocosz.getConfigByKey("isVideoAd_Qpbz")||"false"!=u.cocosz.getConfigByKey("isVideoAd_Citie")))var a=0,i=cc.tween(this._page).delay(1).call(function(){p.gameMgr.isGameStart&&!u.cocosz.isPause&&(5==++a?"false"!=u.cocosz.getConfigByKey("isVideoAd_Qpbz")&&e.showSkill(e._btnQpbz):8==a?"false"!=u.cocosz.getConfigByKey("isVideoAd_Citie")&&e.showSkill(e._btnCt):a>8&&(u.cocosz.dataMgr.guide_skill=!1,i&&i.stop()))}).union().repeatForever().start();p.gameMgr.startGame(),cc.game.on(l.default.E_GAME_LOGIC,this._onGameMessageHandler,this)},t.prototype.onClose=function(){cc.game.targetOff(this)},t.prototype.showSkill=function(e){var t=this,n=e.getComponent(cc.Widget);if(n&&(n.enabled=!1),e&&e.isValid){u.cocosz.pauseCount++,e.setPosition(0,cc.winSize.height/2),e.scale=2,e.active=!0;var a=function(){e.stopAllActions(),cc.tween(e).call(function(){t._handAni&&t._handAni.isValid&&(t._handAni.active=!1)}).to(.5,{scale:1,x:-cc.winSize.width/2+n.left+e.width/2,y:-cc.winSize.height/2+n.bottom+e.height/2}).call(function(){n&&(n.enabled=!0),u.cocosz.pauseCount--}).start()};e.once(cc.Node.EventType.TOUCH_END,a,this),e.stopAllActions(),cc.tween(e).to(1,{y:0},{easing:"backOut"}).call(function(){if(t._handAni&&t._handAni.isValid){t._handAni.setPosition(0,0),t._handAni.active=!0;var e=t._handAni.getComponent(sp.Skeleton);e&&e.setAnimation(0,"animation",!0)}}).delay(4).call(function(){e.off(cc.Node.EventType.TOUCH_END,a,t),a()}).start()}},t.prototype.effect_qpbz=function(){var e=u.cocosz.resMgr.getRes("effect_qpbz",cc.Prefab);if(e){var t=cc.instantiate(e);t.setPosition(p.gameMgr.playerTs.node.position),cc.director.getScene().getChildByName("Canvas").addChild(t),cc.tween(t).delay(.3).call(function(){p.gameMgr.playEffect("QuanPingBaoZha"),cc.game.emit(l.default.E_GAME_LOGIC,{type:l.default.E_Allzombie_Destory})}).union().repeat(4).call(function(){t.destroy()}).start()}},t.prototype._onGameMessageHandler=function(e){e.type},t.prototype._onBtnClickHandler=function(e){return r(this,void 0,void 0,function(){return s(this,function(){switch(u.cocosz.audioMgr.playBtnEffect(),e.target.name){case"rangedWeapon":p.gameMgr.useRangedWeapon();break;case"BtnPause":u.cocosz.uiMgr.openPanel(l.PanelName.UIPausePanel);break;case"BtnBullet":p.gameMgr.BtnBullet&&p.gameMgr.playerTs&&p.gameMgr.playerTs.curWeapon&&p.gameMgr.playerTs.curWeapon.isRangeWeapon&&p.gameMgr.playerTs.curWeapon.reloadBullet();break;case"BtnShuxing":p.gameMgr.model6_shuxing.active=!p.gameMgr.model6_shuxing.active,p.gameMgr.update_model6_shuxing();break;case"BtnCt":this._btnCt.active=!1,cc.game.emit(l.default.E_Skill_Citie);break;case"BtnQpbz":this._btnQpbz.active=!1,this.effect_qpbz()}return[2]})})},o([h],t)}(c.default));n.default=g,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","../Manager/UIPage":"UIPage","../game/gameMgr":"gameMgr",LanguageData:"LanguageData"}],UIHomePage:[function(e,t,n){"use strict";cc._RF.push(t,"1b644snyrFBGKi85JS90G3O","UIHomePage");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function s(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}c((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,i,o,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(6===o[0]&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(s){o=[6,s],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Manager/UIPage"),l=e("../Manager/Constant"),u=e("../Manager/CocosZ"),p=e("../Manager/FlyCoin"),d=e("../game/gameDate"),h=e("../game/weapon"),g=e("../Manager/Msg"),f=e("LanguageData"),m=cc._decorator.ccclass,_=function(e){function t(){var t=e.call(this,l.PageName.UIHomePage)||this;return t._icon_set=null,t._frame_set=null,t._btnAudio=null,t._btnSkin=null,t._btnWeapon=null,t._playerSkin=null,t._aniUpgrade=null,t._aniCaidai=null,t._weaponScroll=null,t._skinScroll=null,t._skinInfo_name=null,t._skinInfo_xuedi=null,t._skinInfo_value1=null,t._skinInfo_value2=null,t._skinInfo_change1=null,t._skinInfo_change2=null,t._skinInfo_level_pro=null,t._weaponInfo_name=null,t._weaponInfo_value0=null,t._weaponInfo_value1=null,t._weaponInfo_value2=null,t._weaponInfo_value3=null,t._weaponInfo_change0=null,t._weaponInfo_change1=null,t._weaponInfo_change2=null,t._weaponInfo_change3=null,t._weaponInfo_level_pro=null,t._showSkinId=u.cocosz.dataMgr.CurSkinId,t._showWeaponId=u.cocosz.dataMgr.CurRange,t.isValid()&&t.onLoad(),t}return i(t,e),t.prototype.onLoad=function(){var e=this;if(console.log("UIHOMEPAGE ONLOAD"),["BtnSet","BtnSet/frame_set/BtnAudio","skin/skinInfo/BtnSkinBuy","weapon/weaponInfo/BtnWeaponBuy","home/BtnGameStart","BtnHome","BtnLottery","BtnWeapon","BtnSkin","BtnRankings"].forEach(function(t){var n=cc.find(t,e._page);n&&(n.on(cc.Node.EventType.TOUCH_END,e._onBtnClickHandler,e),"BtnSet"==n.name?(e._icon_set=cc.find("Background/icon_set",n),e._frame_set=cc.find("frame_set",n)):"BtnAudio"==n.name?(e._btnAudio=n,e._updateAudioBtn(!1)):"BtnSkinBuy"==n.name?e._btnSkin=n:"BtnWeaponBuy"==n.name&&(e._btnWeapon=n))}),this._playerSkin=cc.find("player/skin",this._page),this._playerSkin){var t=this._playerSkin.scale;cc.tween(this._playerSkin).repeatForever(cc.tween().parallel(cc.tween().by(1,{position:cc.v2(0,6)}).by(1,{position:cc.v2(0,-6)}),cc.tween().to(1,{scale:1.01*t}).to(1,{scale:t}))).start()}this._aniCaidai=cc.find("player/aniCaidai",this._page).getComponent(sp.Skeleton),this._aniCaidai.setCompleteListener(function(){e._aniCaidai.node.active=!1}),this._aniUpgrade=cc.find("player/aniUpgrade",this._page).getComponent(sp.Skeleton),this._aniUpgrade.setCompleteListener(function(){e._aniUpgrade.node.active=!1});var n=["ak","sq","cfq","sd","hdl","rsq","ju","ld","szg","jtl"];this._weaponScroll=cc.find("weapon/weaponScroll",this._page);for(var a=cc.find("view/content",this._weaponScroll),i=0;i<n.length;i++){var o=u.cocosz.resMgr.getRes("WeaponListItem",cc.Prefab),r=cc.instantiate(o);r.name=n[i];var s=r.getChildByName("weapon");s&&(s.getComponent(cc.Sprite).spriteFrame=u.cocosz.resMgr.getRes("w_"+n[i],cc.SpriteFrame),r.on(cc.Node.EventType.TOUCH_END,function(t){u.cocosz.audioMgr.playBtnEffect();var n=d.default.Weapon[t.target.name].id;e._showWeaponId=n,e._updateWeapon(),e._updateWeaponFrame();var a=u.cocosz.dataMgr.getGunInfo(n);a&&1==a.State&&(u.cocosz.dataMgr.curWeapon=n)},this),r.parent=a)}this._skinScroll=cc.find("skin/skinScroll",this._page);var c=cc.find("view/content",this._skinScroll);Object.keys(d.default.SkinMess).forEach(function(t){d.default.SkinMess[t];var n=t,a=u.cocosz.resMgr.getRes("SkinListItem",cc.Prefab),i=cc.instantiate(a);i.name=n.toString();var o=i.getChildByName("skin");o&&(o.getComponent(cc.Sprite).spriteFrame=u.cocosz.resMgr.getRes("player_"+n,cc.SpriteFrame),i.on(cc.Node.EventType.TOUCH_END,function(t){var n=t.target.name;e._showSkinId=n,e._updatePlayer();var a=u.cocosz.dataMgr.getSkinInfo(e._showSkinId);a&&1==a.State&&(u.cocosz.dataMgr.CurSkinId=e._showSkinId)},e),i.parent=c)}),this._skinInfo_name=cc.find("player/skinName",this._page).getComponent(cc.Label),this._skinInfo_xuedi=cc.find("skin/skinInfo/data/xuedi",this._page),this._skinInfo_value1=cc.find("skin/skinInfo/data/value1",this._page).getComponent(cc.Label),this._skinInfo_value2=cc.find("skin/skinInfo/data/value2",this._page).getComponent(cc.Label),this._skinInfo_change1=cc.find("skin/skinInfo/data/change1",this._page).getComponent(cc.Label),this._skinInfo_change2=cc.find("skin/skinInfo/data/change2",this._page).getComponent(cc.Label),this._skinInfo_level_pro=cc.find("skin/skinInfo/data/levelProgressBar",this._page).getComponent(cc.ProgressBar),this._weaponInfo_name=cc.find("weapon/weaponInfo/weaponName",this._page).getComponent(cc.Sprite),this._weaponInfo_value0=cc.find("weapon/weaponInfo/data/value0",this._page).getComponent(cc.Label),this._weaponInfo_value1=cc.find("weapon/weaponInfo/data/value1",this._page).getComponent(cc.Label),this._weaponInfo_value2=cc.find("weapon/weaponInfo/data/value2",this._page).getComponent(cc.Label),this._weaponInfo_value3=cc.find("weapon/weaponInfo/data/value3",this._page).getComponent(cc.Label),this._weaponInfo_change0=cc.find("weapon/weaponInfo/data/change0",this._page).getComponent(cc.Label),this._weaponInfo_change1=cc.find("weapon/weaponInfo/data/change1",this._page).getComponent(cc.Label),this._weaponInfo_change2=cc.find("weapon/weaponInfo/data/change2",this._page).getComponent(cc.Label),this._weaponInfo_change3=cc.find("weapon/weaponInfo/data/change3",this._page).getComponent(cc.Label),this._weaponInfo_level_pro=cc.find("weapon/weaponInfo/data/levelProgressBar",this._page).getComponent(cc.ProgressBar),this._showSkinId=0,this._updatePlayer();var l=u.cocosz.dataMgr.getSkinInfo(this._showSkinId);l&&1==l.State&&(u.cocosz.dataMgr.CurSkinId=this._showSkinId),this.updateAccount()},t.prototype.updateAccount=function(){if(null!=window.userAccount&&null!=window.userAccount){var e=cc.find("BtnWallet/name",this._page),t=window.userAccount.slice(0,6)+"..."+window.userAccount.slice(-4);e.getComponent(cc.Label).string!==t&&(e.getComponent(cc.Label).string=t)}},t.prototype._aniEffect=function(e){switch(e){case 1:this._aniUpgrade&&(this._aniUpgrade.node.active=!0,this._aniUpgrade.setAnimation(0,"animation",!1),u.cocosz.audioMgr.playEffect("ui_upgrade"));break;case 2:this._aniCaidai&&(this._aniCaidai.node.active=!0,this._aniCaidai.setAnimation(0,"animation",!1),u.cocosz.audioMgr.playEffect("ui_caidai"))}},t.prototype.onOpen=function(){this._updatePlayer(),this._updateWeapon(),this._updateWeaponFrame(),cc.game.on(l.default.E_GAME_LOGIC,this._onGameMessageHandler,this)},t.prototype.onClose=function(){cc.game.targetOff(this)},t.prototype._onGameMessageHandler=function(e){switch(e.type){case l.default.E_Fly_Coin:this._flyCoins(e.iconName,e.frameNodeName);break;case l.default.E_CJ_SKIN:this._showSkinId=u.cocosz.dataMgr.CurSkinId,this._updatePlayer();break;case l.default.E_CJ_Weapon:this._showWeaponId=u.cocosz.dataMgr.curWeapon,this._updateWeapon(),this._updateWeaponFrame()}},t.prototype._onBtnClickHandler=function(e){return r(this,void 0,void 0,function(){var t,n,a,i,o,r,c,p,m=this;return s(this,function(s){switch(s.label){case 0:return[4,u.cocosz.audioMgr.playBtnEffect().catch()];case 1:switch(s.sent(),t=cc.find("home",this._page),n=cc.find("weapon",this._page),a=cc.find("skin",this._page),e.target.name){case"BtnGameStart":null!=window.startGame&&window.startGame(function(){u.cocosz.gameMgr.gameStart(u.cocosz.getLevelId())},function(){alert("Start Game Failed!")});break;case"BtnLottery":u.cocosz.uiMgr.openPanel(l.PanelName.UITurntablePanel);break;case"BtnRankings":u.cocosz.uiMgr.openPanel(l.PanelName.UIRankingsPanel);break;case"BtnSkinBuy":i=u.cocosz.dataMgr.getSkinInfo(this._showSkinId),o=""+(this._showSkinId+1),0==i.State?d.default.SkinMess[o].priceType==d.PriceType.Gold?u.cocosz.web3Mgr.gold>=d.default.SkinMess[o].price?(this._aniEffect(2),window.buyOrUpgradeSkin(BigInt(this._showSkinId),function(){u.cocosz.dataMgr.CoinCount-=d.default.SkinMess[o].price,g.default.Show(f.t("msg.gxhdxjs")),u.cocosz.dataMgr.CurSkinId=m._showSkinId,m._updatePlayer()},function(){})):this.showCoinPanel(!1):d.default.SkinMess[o].priceType==d.PriceType.Diamond&&(u.cocosz.web3Mgr.diamond>=d.default.SkinMess[o].price?(this._aniEffect(2),window.buyOrUpgradeSkin(BigInt(this._showSkinId),function(){u.cocosz.dataMgr.DiamondCount-=d.default.SkinMess[o].price,g.default.Show(f.t("msg.gxhdxjs")),u.cocosz.dataMgr.CurSkinId=m._showSkinId,m._updatePlayer()},function(){})):this.showCoinPanel(!0)):i.Level<6&&(u.cocosz.web3Mgr.gold>=l.default.skinLevelPriceArr[i.Level]?(this._aniEffect(1),window.buyOrUpgradeSkin(BigInt(this._showSkinId),function(){u.cocosz.dataMgr.CoinCount-=l.default.skinLevelPriceArr[i.Level],i.Level++,u.cocosz.dataMgr.setSkinInfo(i.Id,i),m._updatePlayer()},function(){})):this.showCoinPanel(!1));break;case"BtnWeaponBuy":r=u.cocosz.dataMgr.getGunInfo(this._showWeaponId),c=h.default.WeaponName[this._showWeaponId],0==r.State?d.default.Weapon[c].priceType==d.PriceType.Gold?u.cocosz.web3Mgr.gold>=d.default.Weapon[c].price?(this._aniEffect(2),window.buyOrUpgradeWeapon(BigInt(this._showWeaponId),function(){u.cocosz.dataMgr.CoinCount-=d.default.Weapon[c].price,g.default.Show(f.t("msg.gxhdxwq")),u.cocosz.dataMgr.curWeapon=m._showWeaponId,m._updateWeapon(),m._updateWeaponFrame()},function(){})):this.showCoinPanel(!1):d.default.Weapon[c].priceType==d.PriceType.Diamond&&(u.cocosz.web3Mgr.diamond>=d.default.Weapon[c].price?(this._aniEffect(2),window.buyOrUpgradeWeapon(BigInt(this._showWeaponId),function(){u.cocosz.dataMgr.DiamondCount-=d.default.Weapon[c].price,g.default.Show(f.t("msg.gxhdxwq")),u.cocosz.dataMgr.curWeapon=m._showWeaponId,m._updateWeapon(),m._updateWeaponFrame()},function(){})):this.showCoinPanel(!0)):r.Level<3&&(u.cocosz.web3Mgr.gold>=l.default.weaponLevelPriceArr[r.Level]?(this._aniEffect(1),window.buyOrUpgradeWeapon(BigInt(this._showWeaponId),function(){u.cocosz.dataMgr.CoinCount-=l.default.weaponLevelPriceArr[r.Level],r.Level++,u.cocosz.dataMgr.setGunInfo(r.Id,r),m._updateWeapon(),m._updateWeaponFrame()},function(){})):this.showCoinPanel(!1));break;case"BtnSet":this._icon_set.stopAllActions(),this._frame_set.stopAllActions(),p=(this._frame_set.scaleY?this._frame_set.scaleY:1)/2,cc.tween(this._icon_set).to(p,{angle:this._frame_set.scaleY?90:-90},{easing:"sineInOut"}).start(),cc.tween(this._frame_set).to(p,{scaleY:this._frame_set.scaleY?0:1},{easing:"sineInOut"}).start();break;case"BtnAudio":u.cocosz.dataMgr.AudioOn=!u.cocosz.dataMgr.AudioOn,this._updateAudioBtn();break;case"BtnHome":t.active=!0,n.active=!1,a.active=!1,this._showSkinId=u.cocosz.dataMgr.CurSkinId,this._showWeaponId=u.cocosz.dataMgr.curWeapon,this._updatePlayer(),this._updateWeapon();break;case"BtnWeapon":window.getPlayerAllWeaponInfo(function(e){console.log(e);for(var i=e[0],o=e[1],r=0;r<i.length;r++){var s=i[r],c=o[r],l=u.cocosz.dataMgr.getGunInfo(s);l.State=1,l.Level=parseInt(c),u.cocosz.dataMgr.setGunInfo(l.Id,l)}t.active=!1,n.active=!0,a.active=!1});break;case"BtnSkin":window.getPlayerAllSkinInfo(function(e){t.active=!1,n.active=!1,a.active=!0;for(var i=e[0],o=e[1],r=0;r<i.length;r++){var s=i[r],c=o[r],l=u.cocosz.dataMgr.getSkinInfo(s);l.State=1,l.Level=parseInt(c),u.cocosz.dataMgr.setSkinInfo(l.Id,l)}})}return[2]}})})},t.prototype._updatePlayer=function(){var e=this;this._playerSkin.getComponent(cc.Sprite).spriteFrame=u.cocosz.resMgr.getRes("player_"+this._showSkinId,cc.SpriteFrame);var t=u.cocosz.dataMgr.getSkinInfo(u.cocosz.dataMgr.CurSkinId),n=u.cocosz.dataMgr.getSkinInfo(this._showSkinId),a=t.Level,i=n.Level,o=(u.cocosz.dataMgr.CurSkinId,this._showSkinId),r=d.default.SkinMess[o];this._skinInfo_xuedi.children.forEach(function(t,n){n<r.xuedi?e._skinInfo_xuedi.children[n].opacity=255:e._skinInfo_xuedi.children[n].opacity=0}),this._skinInfo_value1.string=""+r.atk[i],this._skinInfo_value2.string=""+r.speed[i];var s=r.atk[i]-r.atk[a];s<0?(this._skinInfo_change1.string=""+s,this._skinInfo_change1.node.children[0].active=!1,this._skinInfo_change1.node.children[1].active=!0,this._skinInfo_change1.node.color=cc.Color.RED,this._skinInfo_change1.node.opacity=255):0==s?this._skinInfo_change1.node.opacity=0:(this._skinInfo_change1.string="+"+s,this._skinInfo_change1.node.children[0].active=!0,this._skinInfo_change1.node.children[1].active=!1,this._skinInfo_change1.node.color=cc.Color.GREEN,this._skinInfo_change1.node.opacity=255);var c=r.speed[i]-r.speed[a];if(c<0?(this._skinInfo_change2.string=""+c,this._skinInfo_change2.node.children[0].active=!1,this._skinInfo_change2.node.children[1].active=!0,this._skinInfo_change2.node.color=cc.Color.RED,this._skinInfo_change2.node.opacity=255):0==c?this._skinInfo_change2.node.opacity=0:(this._skinInfo_change2.string="+"+c,this._skinInfo_change2.node.children[0].active=!0,this._skinInfo_change2.node.children[1].active=!1,this._skinInfo_change2.node.color=cc.Color.GREEN,this._skinInfo_change2.node.opacity=255),this._skinInfo_level_pro.progress=i/6,n){this._btnSkin.children.forEach(function(e){return e.active=!1});var p=this._btnSkin.getChildByName("btn_huang"),h=this._btnSkin.getChildByName("btn_huang_small"),g=this._btnSkin.getChildByName("btn_hong"),f=this._btnSkin.getChildByName("txt_buy"),m=this._btnSkin.getChildByName("txt_sjwc"),_=this._btnSkin.getChildByName("txt_upgrade"),y=this._btnSkin.getChildByName("txt_zpjl"),b=this._btnSkin.getChildByName("icon_jinbi"),v=this._btnSkin.getChildByName("icon_zuanshi"),M=this._btnSkin.getChildByName("price");0==n.State?r&&r.videoCount?(h&&(h.active=!0),r.priceType==d.PriceType.Gold?(b&&(b.active=!0,b.x=-50),M&&(M.active=!0,M.x=-10,M.getComponent(cc.Label).string=""+r.price)):r.priceType==d.PriceType.Diamond&&(v&&(v.active=!0,v.x=-50),M&&(M.active=!0,M.x=-10,M.getComponent(cc.Label).string=""+r.price))):(p&&(p.active=!0),r.priceType==d.PriceType.Gold?(f&&(f.active=!0),b&&(b.active=!0,b.x=0),M&&(M.active=!0,M.x=30,M.getComponent(cc.Label).string=""+r.price)):r.priceType==d.PriceType.Diamond?(f&&(f.active=!0),v&&(v.active=!0,v.x=0),M&&(M.active=!0,M.x=30,M.getComponent(cc.Label).string=""+r.price)):r.priceType==d.PriceType.ZhuanPanReward&&y&&(y.active=!0)):n.Level<6?(g&&(g.active=!0),_&&(_.active=!0),b&&(b.active=!0,b.x=0),M&&(M.active=!0,M.x=30,M.getComponent(cc.Label).string=""+l.default.skinLevelPriceArr[n.Level])):m&&(m.active=!0)}},t.prototype._setWeaponAni=function(e){var t=e.position.clone(),n=e.angle;cc.tween(e).repeatForever(cc.tween().to(1,{position:t.add(cc.v3(0,5,0)),angle:n+2},{easing:"sineInOut"}).to(1,{position:t.add(cc.v3(0,-5,0)),angle:n-2},{easing:"sineInOut"})).start()},t.prototype._setWeaponByName=function(e){var t,n=this._playerSkin,a=this._playerSkin.getPosition();if(d.default.Weapon[e].atkRange>300){if(n.active=!0,t=u.cocosz.resMgr.getRes("weapon_"+e,cc.Prefab)){var i=cc.instantiate(t);i.removeComponent(h.default),n.children[0]&&n.children[0].isValid&&n.children[0].destroy(),i.setPosition(a.x,a.y+450),this._setWeaponAni(i),n.addChild(i)}}else if(n.active=!1,t=u.cocosz.resMgr.getRes("weapon_"+e,cc.Prefab)){var o=cc.instantiate(t);o.removeComponent(h.default),n.children[0]&&n.children[0].isValid&&n.children[0].destroy(),o.setPosition(a.x,a.y),this._setWeaponAni(o),n.addChild(o)}},t.prototype._updateWeapon=function(){this._setWeaponByName(h.default.WeaponName[this._showWeaponId]),this._playerSkin.getComponent(cc.Sprite).spriteFrame=u.cocosz.resMgr.getRes("player_"+this._showSkinId,cc.SpriteFrame),this._weaponInfo_name.spriteFrame=u.cocosz.resMgr.getRes("w_"+(this._showWeaponId+1),cc.SpriteFrame);var e=u.cocosz.dataMgr.getGunInfo(u.cocosz.dataMgr.CurRange),t=u.cocosz.dataMgr.getGunInfo(this._showWeaponId),n=e.Level,a=t.Level,i=h.default.WeaponName[u.cocosz.dataMgr.CurRange],o=h.default.WeaponName[this._showWeaponId];this._weaponInfo_value0.string=""+d.default.Weapon[o].atk[a],this._weaponInfo_value1.string=(1/d.default.Weapon[o].atkSpeed[a]).toFixed(1),this._weaponInfo_value2.string=""+d.default.Weapon[o].atkRange,this._weaponInfo_value3.string=""+d.default.Weapon[o].bulletTotal[a];var r=d.default.Weapon[o].atk[a]-d.default.Weapon[i].atk[n],s=1/d.default.Weapon[o].atkSpeed[a]-1/d.default.Weapon[i].atkSpeed[n],c=d.default.Weapon[o].atkRange-d.default.Weapon[i].atkRange,p=d.default.Weapon[o].bulletTotal[a]-d.default.Weapon[i].bulletTotal[n];if(r<0?(this._weaponInfo_change0.string=""+r,this._weaponInfo_change0.node.children[0].active=!1,this._weaponInfo_change0.node.children[1].active=!0,this._weaponInfo_change0.node.color=cc.Color.RED,this._weaponInfo_change0.node.opacity=255):0==r?this._weaponInfo_change0.node.opacity=0:(this._weaponInfo_change0.string="+"+r,this._weaponInfo_change0.node.children[0].active=!0,this._weaponInfo_change0.node.children[1].active=!1,this._weaponInfo_change0.node.color=cc.Color.GREEN,this._weaponInfo_change0.node.opacity=255),s<0?(this._weaponInfo_change1.string=""+s,this._weaponInfo_change1.node.children[0].active=!1,this._weaponInfo_change1.node.children[1].active=!0,this._weaponInfo_change1.node.color=cc.Color.RED,this._weaponInfo_change1.node.opacity=255):0==s?this._weaponInfo_change1.node.opacity=0:(this._weaponInfo_change1.string="+"+s,this._weaponInfo_change1.node.children[0].active=!0,this._weaponInfo_change1.node.children[1].active=!1,this._weaponInfo_change1.node.color=cc.Color.GREEN,this._weaponInfo_change1.node.opacity=255),c<0?(this._weaponInfo_change2.string=""+c,this._weaponInfo_change2.node.children[0].active=!1,this._weaponInfo_change2.node.children[1].active=!0,this._weaponInfo_change2.node.color=cc.Color.RED,this._weaponInfo_change2.node.opacity=255):0==c?this._weaponInfo_change2.node.opacity=0:(this._weaponInfo_change2.string="+"+c,this._weaponInfo_change2.node.children[0].active=!0,this._weaponInfo_change2.node.children[1].active=!1,this._weaponInfo_change2.node.color=cc.Color.GREEN,this._weaponInfo_change2.node.opacity=255),p<0?(this._weaponInfo_change3.string=""+p,this._weaponInfo_change3.node.children[0].active=!1,this._weaponInfo_change3.node.children[1].active=!0,this._weaponInfo_change3.node.color=cc.Color.RED,this._weaponInfo_change3.node.opacity=255):0==p?this._weaponInfo_change3.node.opacity=0:(this._weaponInfo_change3.string="+"+p,this._weaponInfo_change3.node.children[0].active=!0,this._weaponInfo_change3.node.children[1].active=!1,this._weaponInfo_change3.node.color=cc.Color.GREEN,this._weaponInfo_change3.node.opacity=255),this._weaponInfo_level_pro.progress=a/3,t){this._btnWeapon.children.forEach(function(e){return e.active=!1});var g=this._btnWeapon.getChildByName("btn_huang"),f=this._btnWeapon.getChildByName("btn_huang_small"),m=this._btnWeapon.getChildByName("btn_hong"),_=this._btnWeapon.getChildByName("txt_buy"),y=this._btnWeapon.getChildByName("txt_sjwc"),b=this._btnWeapon.getChildByName("txt_upgrade"),v=this._btnWeapon.getChildByName("txt_zpjl"),M=this._btnWeapon.getChildByName("icon_jinbi"),k=this._btnWeapon.getChildByName("icon_zuanshi"),C=this._btnWeapon.getChildByName("price");0==t.State?d.default.Weapon[o]&&d.default.Weapon[o].videoCount?(this._btnWeapon.width=169,f&&(f.active=!0),d.default.Weapon[o].priceType==d.PriceType.Gold?(M&&(M.active=!0,M.x=-50),C&&(C.active=!0,C.x=-10,C.getComponent(cc.Label).string=""+d.default.Weapon[o].price)):d.default.Weapon[o].priceType==d.PriceType.Diamond&&(k&&(k.active=!0,k.x=-50),C&&(C.active=!0,C.x=-10,C.getComponent(cc.Label).string=""+d.default.Weapon[o].price))):(this._btnWeapon.width=252,g&&(g.active=!0),d.default.Weapon[o].priceType==d.PriceType.Gold?(_&&(_.active=!0),M&&(M.active=!0,M.x=0),C&&(C.active=!0,C.x=30,C.getComponent(cc.Label).string=""+d.default.Weapon[o].price)):d.default.Weapon[o].priceType==d.PriceType.Diamond?(_&&(_.active=!0),k&&(k.active=!0,k.x=0),C&&(C.active=!0,C.x=30,C.getComponent(cc.Label).string=""+d.default.Weapon[o].price)):d.default.Weapon[o].priceType==d.PriceType.ZhuanPanReward&&v&&(v.active=!0)):t.Level<3?(m&&(m.active=!0),b&&(b.active=!0),M&&(M.active=!0,M.x=0),C&&(C.active=!0,C.x=30,C.getComponent(cc.Label).string=""+l.default.weaponLevelPriceArr[t.Level])):(this._btnWeapon.width=252,y&&(y.active=!0))}this._updateWeaponFrame()},t.prototype._updateWeaponFrame=function(){var e=u.cocosz.dataMgr.getItem(l.default.ST_GunInfo,"");if(e){var t=JSON.parse(e);if(t){this._weaponScroll=cc.find("weapon/weaponScroll",this._page);for(var n=cc.find("view/content",this._weaponScroll).children,a=0;a<n.length;a++){var i=n[a];if(d.default.Weapon[i.name]&&d.default.Weapon[i.name].id>=0){var o=d.default.Weapon[i.name].id;if(t[o]){var r=t[o].State;if(i.getChildByName("kuang_hui").active=!(r>=1),i.name==h.default.WeaponName[this._showWeaponId]){i.getChildByName("kuang_huang").active=!0;var s=i.getChildByName("ani_arrow");s&&(t[o].State>0&&t[o].Level<3?s.active=!0:s.active=!1)}else i.getChildByName("kuang_huang").active=!1}else i.getChildByName("kuang_hui").active=!1,i.getChildByName("kuang_huang").active=!1}else i.getChildByName("kuang_hui").active=!1,i.getChildByName("kuang_huang").active=!1}}}},t.prototype.showCoinPanel=function(e){var t=cc.instantiate(u.cocosz.resMgr.getRes("UIADPanel",cc.Prefab));cc.find("Canvas").addChild(t),e&&t.getComponent("UIADPanel").setDiamond()},t.prototype._flyCoins=function(e,t){var n=cc.find(t,this._page);if(n){var a=n.parent.convertToWorldSpaceAR(n.position);p.default.Show(e,a)}},t.prototype._updateAudioBtn=function(e){void 0===e&&(e=!0),cc.find("Background/off",this._btnAudio).active=0==u.cocosz.dataMgr.AudioOn,e&&(u.cocosz.dataMgr.AudioOn?u.cocosz.audioMgr.playBgm():u.cocosz.audioMgr.stopAll())},o([m],t)}(c.default);n.default=_,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","../Manager/FlyCoin":"FlyCoin","../Manager/Msg":"Msg","../Manager/UIPage":"UIPage","../game/gameDate":"gameDate","../game/weapon":"weapon",LanguageData:"LanguageData"}],UILoadingPage:[function(e,t,n){"use strict";cc._RF.push(t,"672f4K2Ni5IvZKg5f59uM3H","UILoadingPage");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function s(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}c((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,i,o,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(6===o[0]&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(s){o=[6,s],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Manager/UIPage"),l=e("../Manager/Constant"),u=e("../Manager/CocosZ"),p=cc._decorator.ccclass,d=function(e){function t(){var t=e.call(this,l.PageName.UILoadingPage)||this;return t._loadingBar=null,t._progressStep=.01,t._tweenID=null,t._wallet_icon=null,t._wallet_name=null,t.isValid()&&t.onLoad(),t}return i(t,e),t.prototype.onLoad=function(){var e=this;["BtnWallet","BtnLogin","BtnStartGame"].forEach(function(t){var n=cc.find(t,e._page);n&&(n.on(cc.Node.EventType.TOUCH_END,e._onBtnClickHandler,e),"BtnWallet"==n.name?e._BtnWallet=n:"BtnLogin"==n.name?e._BtnLogin=n:"BtnStartGame"==n.name&&(e._BtnStartGame=n))}),this._initializeLoadingBar()},t.prototype.onOpen=function(){var e=this;this.isValid()&&(this._LoadingBar=cc.find("LoadingBar",this._page),this._BtnWallet=cc.find("BtnWallet",this._page),this._BtnStartGame=cc.find("BtnStartGame",this._page),this._wallet_icon=cc.find("Background/icon",this._BtnWallet),this._wallet_name=cc.find("Background/name",this._BtnWallet),cc.game.on(l.default.E_GAME_LOGIC,this._onGameMassageHandler,this),this._loadingBar.progress=this._progressStep,this._startLoadingAnimation(),u.cocosz.schedule(function(){if(u.cocosz.isResourceLoaded)if(cc.find("LoadingBar",e._page).active=!1,null!=window.userAccount&&null!=window.userAccount){var t=window.userAccount.slice(0,6)+"..."+window.userAccount.slice(-4);e._BtnLogin.active=!1,e._BtnWallet.active=!0,e._BtnStartGame.active=!0,e._wallet_name.getComponent(cc.Label).string!==t&&(e._wallet_name.getComponent(cc.Label).string=t)}else e._BtnLogin.active=!0,e._BtnWallet.active=!1,e._BtnStartGame.active=!1},.1))},t.prototype.onClose=function(){cc.game.targetOff(this),null!==this._tweenID&&cc.Tween.stopAllByTag(this._tweenID)},t.prototype._onBtnClickHandler=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,u.cocosz.audioMgr.playBtnEffect().catch()];case 1:switch(t.sent(),e.target.name){case"BtnLogin":null!=window.onConnectButtonClick&&window.onConnectButtonClick();break;case"BtnWallet":null!=window.onConnectedButtonClick&&window.onConnectedButtonClick();break;case"BtnStartGame":u.cocosz.unscheduleAllCallbacks(),u.cocosz.goToHome()}return[2]}})})},t.prototype._initializeLoadingBar=function(){this._loadingBar=cc.find("LoadingBar",this._page).getComponent(cc.ProgressBar)},t.prototype._startLoadingAnimation=function(){var e=this;this._tweenID=Date.now(),cc.tween(this._page).tag(this._tweenID).delay(.2).call(function(){e._updateLoadingProgressStep()}).union().repeatForever().start()},t.prototype._updateLoadingProgressStep=function(){var e=this._loadingBar.progress+this._progressStep;e<1&&this._updateProgress(e)},t.prototype._onGameMassageHandler=function(e){switch(e.type){case l.default.E_UPDATE_PROGRESS:this._updateProgress(e.data);break;default:console.warn("Unhandled event type: "+e.type)}},t.prototype._updateProgress=function(e){e>this._loadingBar.progress&&e<=1&&(this._loadingBar.progress=e)},o([p],t)}(c.default);n.default=d,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","../Manager/UIPage":"UIPage"}],UIMgr:[function(e,t,n){"use strict";cc._RF.push(t,"33548NTHxpPnbtMDUrsJscE","UIMgr");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Constant"),r=e("../UI/UILoadingPage"),s=e("../UI/UIHomePage"),c=e("../UI/UIGamePage"),l=e("../UI/UIRevivePanel"),u=e("../UI/UIGameLoadingPage"),p=e("../UI/UIPausePanel"),d=e("../UI/UIUpgradePanel"),h=e("../UI/UIOverPage"),g=e("../UI/UITurntablePage"),f=e("../UI/UIRankingsPage"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._pageDict={},t._panelDict={},t}return i(t,e),Object.defineProperty(t,"inst",{get:function(){return t._inst||(t._inst=new t),t._inst},enumerable:!1,configurable:!0}),t.prototype.openPage=function(e){if(!this._panelDict[e]||!this._panelDict[e].isOpen())if(this.closeAllPanel(),this.closeAllPage(),this._pageDict[e]&&this._pageDict[e].isValid())this._pageDict[e].open();else{var t=this._createUI(e);t&&(this._pageDict[e]=t,t.isValid()&&t.open())}},t.prototype.openPanel=function(e){if(!this._panelDict[e]||!this._panelDict[e].isOpen())if(this._panelDict[e]&&this._panelDict[e].isValid())this._panelDict[e].open();else{var t=this._createUI(e);t&&(this._panelDict[e]=t,t.isValid()&&t.open())}},t.prototype.closeAllPage=function(){for(var e in this._pageDict)e&&this._pageDict[e]&&this._pageDict[e].close()},t.prototype.closeAllPanel=function(){for(var e in this._panelDict)e&&this._panelDict[e]&&this._panelDict[e].close()},t.prototype.closePanel=function(e){this._panelDict[e]&&this._panelDict[e].isValid()&&this._panelDict[e].close()},t.prototype._createUI=function(e){switch(e){case o.PageName.UILoadingPage:return new r.default;case o.PageName.UIHomePage:return new s.default;case o.PanelName.UITurntablePanel:return new g.default;case o.PanelName.UIRankingsPanel:return new f.default;case o.PageName.UIGameLoadingPage:return new u.default;case o.PageName.UIGamePage:return new c.default;case o.PanelName.UIPausePanel:return new p.default;case o.PanelName.UIUpgradePanel:return new d.default;case o.PanelName.UIRevivePanel:return new l.default;case o.PageName.UIOverPage:return new h.default;default:return cc.error("Can not found class "+e),null}},t}(cc.Component);n.default=m,cc._RF.pop()},{"../UI/UIGameLoadingPage":"UIGameLoadingPage","../UI/UIGamePage":"UIGamePage","../UI/UIHomePage":"UIHomePage","../UI/UILoadingPage":"UILoadingPage","../UI/UIOverPage":"UIOverPage","../UI/UIPausePanel":"UIPausePanel","../UI/UIRankingsPage":"UIRankingsPage","../UI/UIRevivePanel":"UIRevivePanel","../UI/UITurntablePage":"UITurntablePage","../UI/UIUpgradePanel":"UIUpgradePanel","./Constant":"Constant"}],UIOverPage:[function(e,t,n){"use strict";cc._RF.push(t,"a9632KbIPtPCovZ1PzJnE6R","UIOverPage");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function s(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}c((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,i,o,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(6===o[0]&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(s){o=[6,s],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Manager/UIPage"),l=e("../Manager/Constant"),u=e("../Manager/CocosZ"),p=e("../game/gameMgr"),d=e("../game/upgradeMgr"),h=e("../const"),g=(e("LanguageData"),cc._decorator),f=g.ccclass,m=(g.property,function(e){function t(){var t=e.call(this,l.PageName.UIOverPage)||this;return t._panel=null,t._mask=null,t._btnContinue=null,t._btnHome=null,t._isToHome=!1,t.isValid()&&t.onLoad(),t}return i(t,e),t.prototype.onLoad=function(){this._mask=cc.find("Mask",this._page),this._panel=cc.find("Panel",this._page),this._btnContinue=cc.find("BtnContinue",this._panel),this._btnContinue.on(cc.Node.EventType.TOUCH_END,this._onBtnClickHandler,this),this._btnHome=cc.find("BtnHome",this._panel),this._btnHome.on(cc.Node.EventType.TOUCH_END,this._onBtnClickHandler,this)},t.prototype.onOpen=function(){this._initPanel(),u.cocosz.dataMgr.TotoalCount_6++},t.prototype.onClose=function(){cc.game.targetOff(this)},t.prototype.getSkillIDName=function(e){return e+(d.upgradeMgr.upgradeSkillMaxLevelArr[e]>1?"_"+(d.upgradeMgr.upgradeSkillArr[e]+1):"")},t.prototype._initPanel=function(){if(this._mask.opacity=0,cc.tween(this._mask).to(.2,{opacity:120}).start(),this._panel.scale=0,cc.tween(this._panel).to(.3,{scale:1},{easing:"backOut"}).start(),d.upgradeMgr&&d.upgradeMgr.isValid){var e=this._panel.getChildByName("kuang_boss");if(d.upgradeMgr.bossKillId.length){var t=e.getChildByName("layout");t&&(t.active=!0,t.children.forEach(function(e){d.upgradeMgr.bossKillId.includes(parseInt(e.name))?e.active=!0:e.active=!1}))}else{var n=e.getChildByName("no");n&&(n.active=!0)}var a=this._panel.getChildByName("kuang_skill");if(d.upgradeMgr.upgradeSkillArr.includes(1)||d.upgradeMgr.upgradeSkillArr.includes(2)||d.upgradeMgr.upgradeSkillArr.includes(3)){var i=a.getChildByName("skillScrollView");if(i){i.active=!0;var o=cc.find("view/content",i);o&&d.upgradeMgr.upgradeSkillArr.forEach(function(e,t){if(3==d.upgradeMgr.upgradeSkillMaxLevelArr[t])(n=u.cocosz.resMgr.getRes("zombieSkill_icon_"+t+"_"+e,cc.SpriteFrame))&&((i=(a=new cc.Node).addComponent(cc.Sprite)).spriteFrame=n,i.sizeMode=cc.Sprite.SizeMode.CUSTOM,a.setContentSize(70,70),o.addChild(a));else if(e>0){var n,a,i;(n=u.cocosz.resMgr.getRes("zombieSkill_icon_"+t,cc.SpriteFrame))&&((i=(a=new cc.Node).addComponent(cc.Sprite)).spriteFrame=n,i.sizeMode=cc.Sprite.SizeMode.CUSTOM,a.setContentSize(70,70),o.addChild(a))}})}}else{var r=a.getChildByName("no");r&&(r.active=!0)}var s=cc.find("info",this._panel);if(s){s.getChildByName("time2").getComponent(cc.Label).string=u.cocosz.StoHMS(u.cocosz.dataMgr.best_time),s.getChildByName("kill2").getComponent(cc.Label).string=u.cocosz.dataMgr.best_kill.toString(),s.getChildByName("level2").getComponent(cc.Label).string=u.cocosz.dataMgr.best_level.toString(),s.getChildByName("coin2").getComponent(cc.Label).string=u.cocosz.dataMgr.best_coin.toString(),s.getChildByName("time1").getComponent(cc.Label).string=u.cocosz.StoHMS(p.gameMgr.GameTime),p.gameMgr.GameTime>u.cocosz.dataMgr.best_time&&(s.getChildByName("time1").color=cc.Color.RED,u.cocosz.dataMgr.best_time=p.gameMgr.GameTime),s.getChildByName("kill1").getComponent(cc.Label).string=d.upgradeMgr.zombieKillNum.toString(),d.upgradeMgr.zombieKillNum>u.cocosz.dataMgr.best_kill&&(s.getChildByName("kill1").color=cc.Color.RED,u.cocosz.dataMgr.best_kill=d.upgradeMgr.zombieKillNum),s.getChildByName("level1").getComponent(cc.Label).string=d.upgradeMgr.curLevel.toString(),d.upgradeMgr.curLevel>u.cocosz.dataMgr.best_level&&(s.getChildByName("level1").color=cc.Color.RED,u.cocosz.dataMgr.best_level=d.upgradeMgr.curLevel);var c=d.upgradeMgr.zombieKillNum+10*d.upgradeMgr.curLevel+Math.min(500,Math.ceil(p.gameMgr.GameTime/10));u.cocosz.dataMgr.CoinCount+=c,s.getChildByName("coin1").getComponent(cc.Label).string=c.toString(),c>u.cocosz.dataMgr.best_coin&&(s.getChildByName("coin1").color=cc.Color.RED,u.cocosz.dataMgr.best_coin=c)}}},t.prototype._onBtnClickHandler=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,u.cocosz.audioMgr.playBtnEffect().catch()];case 1:if(t.sent(),this._isToHome)return[2];switch(e.target.name){case"BtnContinue":null!=window.startGame&&null!=window.startGame&&window.startGame(function(){u.cocosz.gameMgr.gameStart(u.cocosz.dataMgr.TotoalCount_6)},function(){alert("Start game Failed")});break;case"BtnHome":if(0==u.cocosz.totalTime)return alert("Game is invalid!"),[2];null!=window.gameOver&&null!=window.gameOver&&window.gameOver(BigInt(u.cocosz.totalTime),BigInt(u.cocosz.zombieKillNum),function(){u.cocosz.sceneMgr.loadScene(h.scene_home,function(){u.cocosz.uiMgr.openPage(l.PageName.UIHomePage)})},function(){alert("End game Failed")})}return[2]}})})},o([f],t)}(c.default));n.default=m,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","../Manager/UIPage":"UIPage","../const":"const","../game/gameMgr":"gameMgr","../game/upgradeMgr":"upgradeMgr",LanguageData:"LanguageData"}],UIPage:[function(e,t,n){"use strict";cc._RF.push(t,"bbcc9AF2MhO8ouP3e6ksQiO","UIPage"),Object.defineProperty(n,"__esModule",{value:!0});var a=e("./CocosZ"),i=function(){function e(e){var t=this;this._page=null,this._pageName="",this._isOpen=!1;var n=a.cocosz.resMgr.getRes(e,cc.Prefab);if(n){var i=cc.instantiate(n);i&&(this._page=i,this._pageName=e,i.active=!1,i.position=cc.Vec3.ZERO,this._isOpen=!1,this.getUIRoot().addChild(i),i.group="ui")}else a.cocosz.resMgr.loadAndCacheRes("UI/"+e,cc.Prefab,null,function(n,a){if(a){var i=cc.instantiate(a);i&&(t._page=i,t._pageName=e,i.active=!1,i.position=cc.Vec3.ZERO,t._isOpen=!1,t.getUIRoot().addChild(i),i.group="ui",t.onLoad(),t.open())}else cc.error("Prefab "+e+" is not found!")})}return e.prototype.open=function(){this.isValid()&&(this._isOpen||(this._isOpen=!0,this._page.active=!0,this.onOpen()))},e.prototype.close=function(){this._isOpen&&(this._isOpen=!1,this.onClose()),this.isValid()&&(this._page.active=!1,this.destroy()),"UILoadingPage"===this._pageName&&a.cocosz.resMgr.releaseSingleRes(this._pageName,cc.Prefab)},e.prototype.destroy=function(){this._isOpen&&(this._isOpen=!1),this.onDestroy(),this.isValid()&&this._page.destroy()},e.prototype.getUIRoot=function(){return cc.find("Canvas")},e.prototype.isValid=function(){return this._page&&cc.isValid(this._page)},e.prototype.isOpen=function(){return this.isValid()&&this._isOpen},e.prototype.onLoad=function(){},e.prototype.onOpen=function(){},e.prototype.onClose=function(){},e.prototype.onDestroy=function(){},e.interstitialCount={},e}();n.default=i,cc._RF.pop()},{"./CocosZ":"CocosZ"}],UIPausePanel:[function(e,t,n){"use strict";cc._RF.push(t,"45557zGvJFMOq7sodhqFlFw","UIPausePanel");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function s(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}c((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,i,o,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(6===o[0]&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(s){o=[6,s],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../const"),l=e("../Manager/CocosZ"),u=e("../Manager/Constant"),p=e("../Manager/TweenEffect"),d=e("../Manager/UIPage"),h=e("../game/gameMgr"),g=e("../game/upgradeMgr"),f=cc._decorator,m=f.ccclass,_=(f.property,function(e){function t(){var t=e.call(this,u.PanelName.UIPausePanel)||this;return t._mask=null,t._panel=null,t.isValid()&&t.onLoad(),t}return i(t,e),t.prototype.onLoad=function(){this._mask=this._page.getChildByName("mask"),this._panel=this._page.getChildByName("Panel");for(var e=["BtnRestart","BtnResume","BtnHome"],t=0;t<e.length;t++)cc.find(e[t],this._panel).on(cc.Node.EventType.TOUCH_END,this._onBtnClickedHandler,this)},t.prototype.onOpen=function(){p.default.panel_mask_opacity(this._mask),p.default.panel_open_moveY(this._panel),l.cocosz.pauseCount++},t.prototype.onClose=function(){l.cocosz.pauseCount--},t.prototype._onBtnClickedHandler=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,l.cocosz.audioMgr.playBtnEffect().catch()];case 1:switch(t.sent(),e.target.name){case"BtnRestart":null!=window.startGame&&null!=window.startGame&&window.startGame(function(){h.gameMgr.isFail=!0,h.gameMgr.unscheduleAllCallbacks(),g.upgradeMgr&&g.upgradeMgr.unscheduleAllCallbacks(),l.cocosz.uiMgr.closePanel(u.PanelName.UIPausePanel),l.cocosz.gameMgr.gameStart(l.cocosz.dataMgr.TotoalCount_6)},function(){alert("Start game Failed")});break;case"BtnResume":cc.tween(this._panel).to(.5,{y:this._panel.y+1e3},{easing:"sineOut"}).call(function(){l.cocosz.uiMgr.closePanel(u.PanelName.UIPausePanel)}).start();break;case"BtnHome":if(0==l.cocosz.totalTime)return alert("Game is invalid!"),[2];null!=window.gameOver&&null!=window.gameOver&&window.gameOver(BigInt(l.cocosz.totalTime),BigInt(l.cocosz.zombieKillNum),function(){h.gameMgr.isFail=!0,h.gameMgr.unscheduleAllCallbacks(),g.upgradeMgr&&g.upgradeMgr.unscheduleAllCallbacks(),l.cocosz.uiMgr.closePanel(u.PanelName.UIPausePanel),l.cocosz.sceneMgr.loadScene(c.scene_home,function(){l.cocosz.uiMgr.openPage(u.PageName.UIHomePage)})},function(){alert("End game Failed")})}return[2]}})})},o([m],t)}(d.default));n.default=_,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","../Manager/TweenEffect":"TweenEffect","../Manager/UIPage":"UIPage","../const":"const","../game/gameMgr":"gameMgr","../game/upgradeMgr":"upgradeMgr"}],UIRankingsPage:[function(e,t,n){"use strict";cc._RF.push(t,"4c1cdO4mlhGypg1lf/k7Y7t","UIRankingsPage");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function s(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}c((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,i,o,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(6===o[0]&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(s){o=[6,s],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Manager/CocosZ"),l=e("../Manager/Constant"),u=e("../Manager/UIPage"),p=(e("LanguageData"),cc._decorator),d=p.ccclass,h=(p.property,function(e){function t(){var t=e.call(this,l.PanelName.UIRankingsPanel)||this;return t._panel=null,t.isValid()&&t.onLoad(),t}return i(t,e),t.prototype.onLoad=function(){this._panel=this._page.getChildByName("panel");for(var e=["BtnBack"],t=0;t<e.length;t++){var n=this._panel.getChildByName(e[t]);n&&n.on(cc.Node.EventType.TOUCH_END,this._onBtnClickHandler,this)}},t.prototype.parseGameTime=function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=e%60,i="";return t>0&&(i+=t+":"),i+=n<10?"0"+n:n,(i+=":")+(a<10?"0"+a:a)},t.prototype.formatTime=function(e){return new Date(1e3*parseInt(e)).toLocaleString("en-US",{hourCycle:"h24"})},t.prototype.onOpen=function(){var e=this;this._panel.scale=0,cc.tween(this._panel).to(.3,{scale:1},{easing:"backOut"}).start(),null!=window.getTopListInfo&&null!=window.getTopListInfo&&window.getTopListInfo(function(t){console.log("result:",t);for(var n=[],a=t[0],i=t[1],o=t[2],r=t[3],s=0;s<10;s++){var l=parseInt(a[s]);l>0&&n.push({time:parseInt(i[s]),address:o[s],grade:l})}if(null!=r&&""!=r){var u=e.formatTime(r),p=cc.find("panel/latestTime",e._page);p.getComponent(cc.Label).string="Last updated on   "+u,p.active=!0}n.sort(function(e,t){return t.grade-e.grade}),console.log("rankingsList:",n);var d=cc.find("panel/list",e._page),h=cc.find("view/content",d);for(s=0;s<n.length;s++){var g=c.cocosz.resMgr.getRes("RankingListItem",cc.Prefab),f=cc.instantiate(g);console.log("rankingsList[i].time: ",n[s].time),console.log("this.parseGameTime(rankingsList[i].time): ",e.parseGameTime(n[s].time));var m=n[s].address;f.getChildByName("rank").getComponent(cc.Label).string="NO."+(s+1),f.getChildByName("address").getComponent(cc.Label).string=m.slice(0,6)+"..."+m.slice(-4),f.getChildByName("time").getComponent(cc.Label).string=e.parseGameTime(n[s].time),f.getChildByName("grade").getComponent(cc.Label).string=n[s].grade,f.parent=h}})},t.prototype._onBtnClickHandler=function(e){return r(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,c.cocosz.audioMgr.playBtnEffect().catch()];case 1:switch(t.sent(),e.target.name){case"BtnBack":c.cocosz.uiMgr.closePanel(l.PanelName.UIRankingsPanel)}return[2]}})})},o([d],t)}(u.default));n.default=h,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","../Manager/UIPage":"UIPage",LanguageData:"LanguageData"}],UIRevivePanel:[function(e,t,n){"use strict";cc._RF.push(t,"f624aGi/QlIuZDbTFGHQJuX","UIRevivePanel");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function s(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}c((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,i,o,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(6===o[0]&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(s){o=[6,s],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Manager/UIPage"),l=e("../Manager/Msg"),u=e("../Manager/Constant"),p=e("../Manager/CocosZ"),d=e("../game/gameMgr"),h=e("LanguageData"),g=cc._decorator,f=g.ccclass,m=(g.property,function(e){function t(){var t=e.call(this,u.PanelName.UIRevivePanel)||this;return t._mask=null,t._panel=null,t._timeLabel=null,t._proIcon=null,t._btnVideo=null,t._btnPass=null,t._tw1=null,t._tw2=null,t.isValid()&&t.onLoad(),t}return i(t,e),t.prototype.onLoad=function(){this._mask=this._page.getChildByName("Mask"),this._panel=this._page.getChildByName("Panel"),this._timeLabel=this._panel.getChildByName("time").getComponent(cc.Label),this._proIcon=this._panel.getChildByName("shangquan").getComponent(cc.Sprite),this._btnVideo=this._panel.getChildByName("BtnVideo"),this._btnVideo.on(cc.Node.EventType.TOUCH_END,this._onBtnClickedHandler,this),this._btnPass=this._panel.getChildByName("BtnPass"),this._btnPass.on(cc.Node.EventType.TOUCH_END,this._onBtnClickedHandler,this)},t.prototype.onOpen=function(){this._initPanel(),p.cocosz.pauseCount++},t.prototype.onClose=function(){p.cocosz.pauseCount--},t.prototype._initPanel=function(){var e=this,t=this._mask.opacity;this._mask.opacity=0,cc.tween(this._mask).to(.2,{opacity:t}).start(),this._panel.scale=0,cc.tween(this._panel).to(.3,{scale:1},{easing:"backOut"}).start();var n=9;this._tw1=cc.tween(this._timeLabel).delay(1).call(function(){e._timeLabel.string=(--n).toString()}).union().repeat(9).call(function(){p.cocosz.uiMgr.closePanel(u.PanelName.UIRevivePanel),d.gameMgr.fail()}).start(),this._tw2=cc.tween(this._proIcon).to(9,{fillRange:0}).start()},t.prototype.stopTween=function(){this._tw1&&this._tw1.stop(),this._tw2&&this._tw2.stop()},t.prototype._onBtnClickedHandler=function(e){return r(this,void 0,void 0,function(){return s(this,function(){switch(p.cocosz.audioMgr.playBtnEffect(),this.stopTween(),e.target.name){case"BtnVideo":null!=window.reLive&&null!=window.reLive&&window.reLive(function(){l.default.Show(h.t("msg.fhcg")),p.cocosz.uiMgr.closePanel(u.PanelName.UIRevivePanel),d.gameMgr.revive()},function(){p.cocosz.uiMgr.closePanel(u.PanelName.UIRevivePanel),d.gameMgr.fail()});break;case"BtnPass":p.cocosz.uiMgr.closePanel(u.PanelName.UIRevivePanel),d.gameMgr.fail()}return[2]})})},t.prototype._reLive=function(){l.default.Show(h.t("msg.fhcg")),p.cocosz.uiMgr.closePanel(u.PanelName.UIRevivePanel),d.gameMgr.revive()},o([f],t)}(c.default));n.default=m,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","../Manager/Msg":"Msg","../Manager/UIPage":"UIPage","../game/gameMgr":"gameMgr",LanguageData:"LanguageData"}],UITurntablePage:[function(e,t,n){"use strict";cc._RF.push(t,"a2b2aQ0OHtIGIW0RibIyjtk","UITurntablePage");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function s(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}c((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,i,o,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(6===o[0]&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(s){o=[6,s],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Manager/CocosZ"),l=e("../Manager/Constant"),u=e("../Manager/Msg"),p=e("../Manager/UIPage"),d=e("../game/gameDate"),h=e("../game/weapon"),g=e("LanguageData"),f=cc._decorator,m=f.ccclass,_=(f.property,function(e){function t(){var t=e.call(this,l.PanelName.UITurntablePanel)||this;return t._panel=null,t._rewardList=null,t._btnCJ=null,t.lotteryItem=null,t.startIntervalTime=10,t.addTime=1,t.isCJ=!1,t.isValid()&&t.onLoad(),t}return i(t,e),t.prototype.onLoad=function(){this._panel=this._page.getChildByName("panel"),this._rewardList=this._panel.getChildByName("rewardList");for(var e=["BtnBack","BtnCJ"],t=0;t<e.length;t++){var n=this._panel.getChildByName(e[t]);n&&(n.on(cc.Node.EventType.TOUCH_END,this._onBtnClickHandler,this),"BtnCJ"==e[t]&&(this._btnCJ=n))}},t.prototype.onOpen=function(){this._panel.scale=0,cc.tween(this._panel).to(.3,{scale:.8},{easing:"backOut"}).start(),cc.tween(this._page.getChildByName("guang")).by(.5,{angle:60,opacity:-150}).by(.5,{angle:60,opacity:150}).union().repeatForever().start(),this.updateReward()},t.prototype.updateReward=function(){for(var e=0;e<12;e++){var t="reward"+(e+1),n=this._rewardList.getChildByName(t);if(d.default.TurntableReward[e].type==d.RewardType.Gold){var a=n.getChildByName("gold");a&&(a.active=!0),(i=n.getChildByName("label"))&&(i.active=!0,i.zIndex=2,i.setPosition(n.x+i.x,n.y+i.y),i.setParent(this._rewardList),i.getComponent(cc.Label).string="+"+d.default.TurntableReward[e].num)}else if(d.default.TurntableReward[e].type==d.RewardType.Diamond){var i,o=n.getChildByName("diamond");o&&(o.active=!0),(i=n.getChildByName("label"))&&(i.active=!0,i.zIndex=2,i.setPosition(n.x+i.x,n.y+i.y),i.setParent(this._rewardList),i.getComponent(cc.Label).string="+"+d.default.TurntableReward[e].num)}else if(d.default.TurntableReward[e].type==d.RewardType.Weapon){var r=new cc.Node,s="w_"+h.default.WeaponName[d.default.TurntableReward[e].num];r.addComponent(cc.Sprite).spriteFrame=c.cocosz.resMgr.getRes(s,cc.SpriteFrame),r.setParent(this._rewardList),r.setPosition(n.x,n.y);var l=n.getChildByName("nameSpr");l&&(l.active=!0,l.zIndex=2,l.setPosition(n.x+l.x,n.y+l.y),l.setParent(this._rewardList),l.getComponent(cc.Sprite).spriteFrame=c.cocosz.resMgr.getRes("w_"+(d.default.TurntableReward[e].num+1),cc.SpriteFrame))}}},t.prototype.CJ=function(){var e=this;this.lotteryItem=null,this.isCJ=!0;var t=0;c.cocosz.audioMgr.playEffect("turntable");var n=setInterval(function(){e._rewardList.children[t%12].children[0].opacity=0;var a=++t%12;if(e._rewardList.children[a].children[0].opacity=255,null!=e.lotteryItem){var i=d.default.TurntableReward[a];i.type==e.lotteryItem.itemType&&i.num==e.lotteryItem.num&&(clearInterval(n),d.default.TurntableReward[a].type==d.RewardType.Gold?(u.default.Show(g.t("msg.gxhdjb")+d.default.TurntableReward[a].num),c.cocosz.dataMgr.CoinCount+=d.default.TurntableReward[a].num):d.default.TurntableReward[a].type==d.RewardType.Diamond?(u.default.Show(g.t("msg.gxhdzs")+d.default.TurntableReward[a].num),c.cocosz.dataMgr.DiamondCount+=d.default.TurntableReward[a].num):d.default.TurntableReward[a].type==d.RewardType.Skin?(u.default.Show(g.t("msg.gxhdxjs")),c.cocosz.dataMgr.CurSkinId=d.default.TurntableReward[a].num-1,cc.game.emit(l.default.E_GAME_LOGIC,{type:l.default.E_CJ_SKIN}),e._rewardList.children[a].children[0].opacity=0,e._rewardList.getChildByName("mask6").active=!0,e._rewardList.getChildByName("mask6").zIndex=3):(u.default.Show(g.t("msg.gxhdxwq")),c.cocosz.dataMgr.curWeapon=d.default.TurntableReward[a].num,cc.game.emit(l.default.E_GAME_LOGIC,{type:l.default.E_CJ_Weapon}),e._rewardList.children[a].children[0].opacity=0,e._rewardList.getChildByName("mask12").active=!0,e._rewardList.getChildByName("mask12").zIndex=3),e.isCJ=!1,c.cocosz.useCJTimes++,c.cocosz.totalCJTimes++)}},30)},t.prototype.getTimeCount=function(e,t){for(var n=0,a=0;a<t;a++)n+=a*this.addTime;return(e-n)%(this.startIntervalTime+t*this.addTime)},t.prototype._onBtnClickHandler=function(e){return r(this,void 0,void 0,function(){var t=this;return s(this,function(n){switch(n.label){case 0:return[4,c.cocosz.audioMgr.playBtnEffect().catch()];case 1:if(n.sent(),this.isCJ)return[2];switch(e.target.name){case"BtnBack":c.cocosz.uiMgr.closePanel(l.PanelName.UITurntablePanel);break;case"BtnCJ":null!=window.requestLottery&&null!=window.requestLottery&&null!=window.getPlayerLastLotteryResult&&null!=window.getPlayerLastLotteryResult&&window.requestLottery(function(){t.CJ();var e=setInterval(function(){window.getPlayerLastLotteryResult(function(n){console.log("result:",n),t.lotteryItem={itemType:n[0],num:n[1]},clearInterval(e)})},4e3)},function(){alert("Request lottery failed!")})}return[2]}})})},o([m],t)}(p.default));n.default=_,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","../Manager/Msg":"Msg","../Manager/UIPage":"UIPage","../game/gameDate":"gameDate","../game/weapon":"weapon",LanguageData:"LanguageData"}],UIUpgradePanel:[function(e,t,n){"use strict";cc._RF.push(t,"6b4ebcCT0lEhoZZWJGVc0YS","UIUpgradePanel");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,o){function r(e){try{c(a.next(e))}catch(t){o(t)}}function s(e){try{c(a.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}c((a=a.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,a,i,o,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=2&o[0]?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,a=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){r=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(6===o[0]&&r.label<i[1]){r.label=i[1],i=o;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(o);break}i[2]&&r.ops.pop(),r.trys.pop();continue}o=t.call(e,r)}catch(s){o=[6,s],a=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../Manager/UIPage"),l=e("../Manager/Constant"),u=e("../Manager/CocosZ"),p=e("../Manager/TweenEffect"),d=e("../game/upgradeMgr"),h=e("../game/gameMgr"),g=cc._decorator,f=g.ccclass,m=(g.property,function(e){function t(){var t=e.call(this,l.PanelName.UIUpgradePanel)||this;return t._mask=null,t._panel=null,t._skill0=null,t._skill1=null,t._skill2=null,t._skill3=null,t._skill4=null,t._betterArr=[],t._otherArr=[],t._uiSkillIdArr=[],t._curIndex=-1,t._canClick=!0,t._lockArr=[!1,!1,!1,!1,!1],t.isValid()&&t.onLoad(),t}return i(t,e),t.prototype.onLoad=function(){this._mask=this._page.getChildByName("Mask"),this._panel=this._page.getChildByName("Panel");for(var e=["skill0","skill1","skill2","skill3","skill4"],t=0;t<e.length;t++){var n=cc.find(e[t],this._panel);n&&(n.on(cc.Node.EventType.TOUCH_END,this._onBtnClickedHandler,this),"skill0"==n.name?this._skill0=n:"skill1"==n.name?this._skill1=n:"skill2"==n.name?this._skill2=n:"skill3"==n.name?this._skill3=n:"skill4"==n.name&&(this._skill4=n))}var a=u.cocosz.getConfigByKey("skillLockNum");if(Number.isInteger(a))for(t=0;t<5;t++)this._lockArr[t]=t+a>=5},t.prototype.onOpen=function(){for(var e=[d.SkillType.\u53cc\u53d1,d.SkillType.\u5b50\u5f39\u788e\u7247,d.SkillType.\u67aa\u6797\u5f39\u96e8,d.SkillType.\u8c22\u5e55,d.SkillType.\u77ac\u65a9,d.SkillType.\u51b0\u971c\u7cbe\u901a,d.SkillType.\u706b\u7130\u7cbe\u901a,d.SkillType.\u8403\u53d6,d.SkillType.\u518d\u751f,d.SkillType.\u62a4\u7532\u9774\u5b50,d.SkillType.\u75be\u8d70,d.SkillType.\u795e\u5723\u5b88\u62a4,d.SkillType.\u901a\u7075\u5315\u9996,d.SkillType.\u98de\u8f6e,d.SkillType.\u95ea\u7535,d.SkillType.\u71c3\u70e7\u74f6],t=0;t<=34;t++)[d.SkillType.\u96f7\u7535\u7cbe\u901a,d.SkillType.\u9f99\u5375,d.SkillType.\u901a\u7075\u9570\u5200].includes(t)||d.upgradeMgr&&d.upgradeMgr.isValid&&d.upgradeMgr.upgradeSkillArr[t]>=d.upgradeMgr.upgradeSkillMaxLevelArr[t]||(e.includes(t)?this._betterArr.push(t):this._otherArr.push(t));this._initPanel()},t.prototype.onClose=function(){u.cocosz.pauseCount--},t.prototype._initPanel=function(){p.default.panel_mask_opacity(this._mask),p.default.panel_open_moveY(this._panel),this._curIndex=-1,this._skill_refresh()},t.prototype._onBtnClickedHandler=function(e){return r(this,void 0,void 0,function(){var t,n=this;return s(this,function(a){switch(a.label){case 0:return[4,u.cocosz.audioMgr.playBtnEffect().catch()];case 1:if(a.sent(),!this._canClick)return[2];switch(e.target.name){case"skill0":case"skill1":case"skill2":case"skill3":case"skill4":this._canClick=!1,(t=function(){"skill0"==e.target.name?n._curIndex=0:"skill1"==e.target.name?n._curIndex=1:"skill2"==e.target.name?n._curIndex=2:"skill3"==e.target.name?n._curIndex=3:"skill4"==e.target.name&&(n._curIndex=4),n.updateFrame(),n._selectSkill()})&&t()}return[2]}})})},t.prototype._selectSkill=function(){var e=this;this._canClick=!1,this._uiSkillIdArr[this._curIndex]&&d.upgradeMgr&&d.upgradeMgr.isValid&&d.upgradeMgr.getSkill(this._uiSkillIdArr[this._curIndex]),[this._skill0,this._skill1,this._skill2,this._skill3,this._skill4].forEach(function(t,n){n==e._curIndex?e.card_click(t):e.card_recycle(t)}),u.cocosz.scheduleOnce(function(){u.cocosz.uiMgr.closePanel(l.PanelName.UIUpgradePanel),h.gameMgr&&h.gameMgr.playerTs&&h.gameMgr.playerTs.isValid&&h.gameMgr.playerTs.avoidInjury(2)},1.5)},t.prototype._getSkillIDName=function(e){return e+(d.upgradeMgr.upgradeSkillMaxLevelArr[e]>1?"_"+(d.upgradeMgr.upgradeSkillArr[e]+1):"")},t.prototype._skill_load=function(e,t){var n=e.getChildByName("name");if(n){var a=n.getComponent(cc.Sprite);a&&u.cocosz.resMgr.loadAndCacheRes("i18n/tex_zombie/"+u.cocosz.curLanguage+"/zombieSkill_name_"+this._getSkillIDName(t),cc.SpriteFrame,null,function(e,t){a&&a.isValid&&(a.spriteFrame=t)})}var i=e.getChildByName("icon");if(i){var o=i.getComponent(cc.Sprite);o&&u.cocosz.resMgr.loadAndCacheRes("tex_zombie/zombieSkill_icon_"+this._getSkillIDName(t),cc.SpriteFrame,null,function(e,t){o&&o.isValid&&(o.spriteFrame=t)})}var r=e.getChildByName("introduce");if(r){var s=r.getComponent(cc.Sprite);s&&u.cocosz.resMgr.loadAndCacheRes("i18n/tex_zombie/"+u.cocosz.curLanguage+"/zombieSkill_introduce_"+this._getSkillIDName(t),cc.SpriteFrame,null,function(e,t){s&&s.isValid&&(s.spriteFrame=t)})}},t.prototype._skill_refresh=function(){var e;if(this._uiSkillIdArr.length=0,this._betterArr.length)for(var t=Math.min(5-this._uiSkillIdArr.length,this._betterArr.length);t>0;t--){var n=Math.floor(Math.random()*this._betterArr.length);this._betterArr[n]>=0&&(this._uiSkillIdArr.push(this._betterArr[n]),this._betterArr.splice(n,1))}if(this._otherArr.length)for(t=Math.min(5-this._uiSkillIdArr.length,this._otherArr.length);t>0;t--)n=Math.floor(Math.random()*this._otherArr.length),this._otherArr[n]>=0&&(this._uiSkillIdArr.push(this._otherArr[n]),this._otherArr.splice(n,1));for(t=0;t<this._uiSkillIdArr.length;t++)if(2==d.upgradeMgr.upgradeSkillArr[this._uiSkillIdArr[t]]&&!this._lockArr[t])for(var a=this._uiSkillIdArr.length-1;a>t;a--)this._lockArr[a]&&2!=d.upgradeMgr.upgradeSkillArr[this._uiSkillIdArr[a]]&&(e=[this._uiSkillIdArr[a],this._uiSkillIdArr[t]],this._uiSkillIdArr[t]=e[0],this._uiSkillIdArr[a]=e[1]);if(this._uiSkillIdArr[0]>=0){this._skill0.active=!0;var i=this._uiSkillIdArr[0];this._skill_load(this._skill0,i)}else this._skill0.active=!1;this._uiSkillIdArr[1]>=0?(this._skill1.active=!0,i=this._uiSkillIdArr[1],this._skill_load(this._skill1,i)):this._skill1.active=!1,this._uiSkillIdArr[2]>=0?(this._skill2.active=!0,i=this._uiSkillIdArr[2],this._skill_load(this._skill2,i)):this._skill2.active=!1,this._uiSkillIdArr[3]>=0?(this._skill3.active=!0,i=this._uiSkillIdArr[3],this._skill_load(this._skill3,i)):this._skill3.active=!1,this._uiSkillIdArr[4]>=0?(this._skill4.active=!0,i=this._uiSkillIdArr[4],this._skill_load(this._skill4,i)):this._skill4.active=!1,this.updateFrame()},t.prototype.updateFrame=function(){this._skill0.children[0].active=0==this._curIndex,this._skill1.children[0].active=1==this._curIndex,this._skill2.children[0].active=2==this._curIndex,this._skill3.children[0].active=3==this._curIndex,this._skill4.children[0].active=4==this._curIndex},t.prototype.card_click=function(e){e.zIndex=cc.macro.MAX_ZINDEX,cc.tween(e).to(.5,{x:0,y:0},{easing:"sineIn"}).to(1,{scale:2,opacity:0},{easing:"fade"}).start()},t.prototype.card_recycle=function(e){var t=e.getChildByName("btnUnLock");t&&(t.active=!1),cc.tween(e).to(.5,{opacity:0},{easing:"sineIn"}).start()},o([f],t)}(c.default));n.default=m,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","../Manager/TweenEffect":"TweenEffect","../Manager/UIPage":"UIPage","../game/gameMgr":"gameMgr","../game/upgradeMgr":"upgradeMgr"}],Web3Mgr:[function(e,t,n){"use strict";cc._RF.push(t,"ea9f2DZpFlKXa6fg4zo0on8","Web3Mgr"),Object.defineProperty(n,"__esModule",{value:!0}),e("LanguageData");var a=function(){function e(){this._network=null,this._networkMain=null,this._wallet=null,this._address=null,this._startTime=null,this._endTime=null,this._diamond=null,this._gold=null}return Object.defineProperty(e,"inst",{get:function(){return e._inst||(e._inst=new e),e._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Network",{get:function(){return this._network},set:function(e){this._network=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"NetworkMain",{get:function(){return this._networkMain},set:function(e){this._networkMain=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Wallet",{get:function(){return this._wallet},set:function(e){this._wallet=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Address",{get:function(){return this._address},set:function(e){this._address=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"StartTime",{get:function(){return this._startTime},set:function(e){this._startTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"EndTime",{get:function(){return this._endTime},set:function(e){this._endTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"diamond",{get:function(){return this._diamond},set:function(e){this._diamond=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gold",{get:function(){return this._gold},set:function(e){this._gold=e},enumerable:!1,configurable:!0}),e}();n.default=a,cc._RF.pop()},{LanguageData:"LanguageData"}],bullet:[function(e,t,n){"use strict";cc._RF.push(t,"50404UIfWNMdr6ERRkIVC1x","bullet");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Manager/CocosZ"),s=e("../Manager/Constant"),c=e("./gameMgr"),l=e("./person"),u=cc._decorator,p=u.ccclass,d=u.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletId=0,t.id=1,t.atk=10,t.atker=null,t.canMove=!0,t.canBreak=!0,t.canPenetrate=!1,t.canWall=!1,t.boomEffect=null,t.hitEffect=null,t.hitAudio="",t.isHartMusic=!0,t.hitEffectType=0,t.hartInterval=0,t.isHitEffectAngle=!1,t.isAngle=!1,t.isBoom=!1,t.isRecord=!0,t.dir=null,t._lastPos=null,t.atkedArr=[],t}var n;return i(t,e),n=t,t.prototype.start=function(){if(c.gameMgr&&c.gameMgr.setMapTs.checkNode(this.node,!0),0==this.node.zIndex&&(this.isBoom?this.node.zIndex=s.ZindexLayer.zindex_bomb:"liewen"===this.node.name?this.node.zIndex=s.ZindexLayer.zinedx_floorLiewen:this.node.zIndex=s.ZindexLayer.zindex_bullet+this.bulletId),"bullet_sd"==this.node.name||"bullet_hdl"==this.node.name){var e=this.node.getComponent(cc.BoxCollider);e&&(cc.tween(e.size).to(.3,{height:550}).start(),cc.tween(e.offset).to(.3,{x:700}).start())}},t.prototype.onDisable=function(){this._lastPos=null},t.prototype.lateUpdate=function(){if(this.isAngle)if(this._lastPos){var e=this.node.getPosition().subSelf(this._lastPos);0==e.equals(cc.Vec2.ZERO)&&(this.node.angle=-cc.v2(e).signAngle(cc.v2(1,0))/Math.PI*180,this._lastPos=this.node.getPosition())}else this._lastPos=this.node.getPosition()},t.prototype.onCollisionEnter=function(e,t){var a=this;if(1==e.tag){var i=e.getComponent(l.default);if(i.id==this.id)return;if(this.canBreak&&!this.canPenetrate)this.node.destroy();else{if(this.atkedArr.includes(e.node))return;this.isRecord&&this.atkedArr.push(e.node)}if(this.hitEffect&&!r.cocosz.isPause){if((_=cc.instantiate(this.hitEffect)).zIndex=s.ZindexLayer.zindex_effect_hit,1==this.hitEffectType)_.parent=e.node,this.isHitEffectAngle&&(_.angle=-cc.v2(this.dir).signAngle(cc.v2(1,0))/Math.PI*180);else{var o=this.node.getPosition();(f=this.node.width)<5&&(m=this.node.getComponent(cc.BoxCollider))&&(f+=m.offset.x),o=o.add(cc.v2(f,0).rotate(this.node.angle/180*Math.PI)),_.parent=this.node.parent,_.setPosition(o)}this.hitAudio&&c.gameMgr.playEffect(this.hitAudio,this.node)}if(this.boomEffect)return(h=cc.instantiate(this.boomEffect)).parent=this.node.parent,h.setPosition(this.node.getPosition()),h.zIndex=s.ZindexLayer.zindex_bomb,c.gameMgr.playEffect("explo",h),(g=h.getComponent(n)).atk=this.atk,g.atker=this.atker,g.id=this.id,void(g.dir=this.dir);if(c.gameMgr.blood&&t.world&&t.world.points&&t.world.points[0]){var u=null;if((u=cc.instantiate(c.gameMgr.blood)).parent=c.gameMgr.map,u.zIndex=s.ZindexLayer.zindex_blood,o=u.parent.convertToNodeSpaceAR(cc.v2(t.world.points[0].x,t.world.points[0].y)),this.dir){var p=-cc.v2(this.dir).signAngle(cc.v2(0,1))/Math.PI*180;u.angle=p}u.setPosition(o)}if(this.isBoom){var d=e.node.getPosition().subSelf(this.node.getPosition()).normalizeSelf();d.equals(cc.Vec2.ZERO)&&(d=cc.v2(1,0).rotateSelf(2*Math.PI*Math.random())),this.dir=d.mulSelf(3)}else!this.canMove&&this.dir&&this.dir.mag()<2&&this.dir.normalizeSelf().mulSelf(2);i.hart(this.atk,this.atker,this.dir,this.isHartMusic),this.hartInterval&&this.schedule(function(){i&&i.isValid&&a.atkedArr.includes(i.node)&&i.hart(a.atk,a.atker,a.dir,a.isHartMusic)},this.hartInterval)}else if(5==e.tag){var h,g,f,m,_;if(this.boomEffect&&((h=cc.instantiate(this.boomEffect)).parent=this.node.parent,h.setPosition(this.node.getPosition()),(g=h.getComponent(n)).atk=this.atk,g.atker=this.atker,g.id=this.id,c.gameMgr.playEffect("explo",h)),this.canBreak&&!this.canWall)o=this.node.getPosition(),(f=this.node.width)<5&&(m=this.node.getComponent(cc.BoxCollider))&&(f+=m.offset.x),o=o.add(cc.v2(f,0).rotate(this.node.angle/180*Math.PI)),this.hitEffect&&1!=this.hitEffectType?((_=cc.instantiate(this.hitEffect)).parent=this.node.parent,_.setPosition(o),_.zIndex=s.ZindexLayer.zindex_effect_hit):((_=cc.instantiate(c.gameMgr.spark)).parent=this.node.parent,_.setPosition(o),_.zIndex=s.ZindexLayer.zindex_effect_spark),this.node.destroy()}},o([d()],t.prototype,"bulletId",void 0),o([d()],t.prototype,"canMove",void 0),o([d({tooltip:"\u80fd\u5426\u963b\u65ad"})],t.prototype,"canBreak",void 0),o([d({tooltip:"\u80fd\u5426\u7a7f\u900f\u654c\u4eba"})],t.prototype,"canPenetrate",void 0),o([d({tooltip:"\u80fd\u5426\u7a7f\u900f\u5899\u58c1"})],t.prototype,"canWall",void 0),o([d(cc.Prefab)],t.prototype,"boomEffect",void 0),o([d(cc.Prefab)],t.prototype,"hitEffect",void 0),o([d({type:cc.String,tooltip:"\u5b50\u5f39\u97f3\u6548"})],t.prototype,"hitAudio",void 0),o([d({tooltip:"\u654c\u4eba\u53d7\u4f24\u662f\u5426\u53d1\u51fa\u97f3\u6548"})],t.prototype,"isHartMusic",void 0),o([d()],t.prototype,"hitEffectType",void 0),o([d()],t.prototype,"hartInterval",void 0),o([d({tooltip:"\u51fb\u4e2d\u6548\u679c\u8bbe\u7f6e\u89d2\u5ea6"})],t.prototype,"isHitEffectAngle",void 0),o([d({tooltip:"\u6bcf\u5e27\u8bbe\u7f6e\u89d2\u5ea6"})],t.prototype,"isAngle",void 0),o([d({tooltip:"\u662f\u5426\u7206\u70b8\u5b50\u5f39"})],t.prototype,"isBoom",void 0),o([d({tooltip:"\u662f\u5426\u8bb0\u5f55\u53d7\u4f24\u8005"})],t.prototype,"isRecord",void 0),n=o([p],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","./gameMgr":"gameMgr","./person":"person"}],const:[function(e,t,n){"use strict";cc._RF.push(t,"e6f5dQe9v5OLZLpmCT9kIwG","const"),Object.defineProperty(n,"__esModule",{value:!0}),n.bundle_resources=n.bundle_res=n.bundle_load=n.storage_totalCJTimes_dmm=n.storage_useCJTimes_dmm=n.audio_zombie_fail=n.audio_zombie_win=n.audio_bgm_game=n.audio_bgm_home=n.map_path=n.loading_min_time_to_game_scene=n.scene_game=n.scene_home=void 0,n.scene_home="Home",n.scene_game="Game",n.loading_min_time_to_game_scene=6e3,n.map_path="maps/mapzombie",n.audio_bgm_home="bgm_ui",n.audio_bgm_game="bgm_6",n.audio_zombie_win="zombie_win",n.audio_zombie_fail="zombie_fail",n.storage_useCJTimes_dmm="useCJTimes_dmm",n.storage_totalCJTimes_dmm="totalCJTimes_dmm",n.bundle_load="bundleLoad",n.bundle_res="bundleRes",n.bundle_resources="resources",cc._RF.pop()},{}],gameDate:[function(e,t,n){"use strict";cc._RF.push(t,"9716b694upCZocbSYxp8T5t","gameDate");var a=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.RewardType=n.PriceType=void 0;var i,o,r=cc._decorator,s=r.ccclass;r.property,function(e){e[e.Gold=0]="Gold",e[e.Diamond=1]="Diamond",e[e.RankReward=2]="RankReward",e[e.ZhuanPanReward=3]="ZhuanPanReward",e[e.Level=4]="Level"}(i=n.PriceType||(n.PriceType={})),function(e){e[e.Gold=0]="Gold",e[e.Diamond=1]="Diamond",e[e.Skin=2]="Skin",e[e.Weapon=3]="Weapon"}(o=n.RewardType||(n.RewardType={}));var c=function(){function e(){}return e.TimeReward=[{time:60,coinNum:1e3,diamondNum:100},{time:300,coinNum:1500,diamondNum:150},{time:900,coinNum:2e3,diamondNum:200},{time:1800,coinNum:3e3,diamondNum:250},{time:3600,coinNum:5e3,diamondNum:300}],e.TurntableReward=[{type:o.Gold,num:100},{type:o.Gold,num:50},{type:o.Diamond,num:10},{type:o.Gold,num:50},{type:o.Gold,num:150},{type:o.Weapon,num:18},{type:o.Gold,num:200},{type:o.Gold,num:50},{type:o.Diamond,num:20},{type:o.Gold,num:50},{type:o.Gold,num:200},{type:o.Weapon,num:9}],e.Weapon={ak:{name:"ak\u6b65\u67aa",id:0,atk:[30,33,35,40],atkRange:1e3,flySpeed:2500,atkSpeed:[1/3.5,1/3.5,.25,.25],bulletNum:30,bulletTotal:[90,90,90,120],reload:3,priceType:i.Gold,price:0},cfq:{name:"\u51b2\u950b\u67aa",id:1,atk:[20,22,25,30],atkRange:1e3,flySpeed:2500,atkSpeed:[.25,.25,1/4.5,.2],bulletNum:25,bulletTotal:[75,75,100,100],reload:2.5,priceType:i.Gold,price:1e3},dao:{name:"\u5200",id:2,atk:[60,65,72,75],atkRange:300,flySpeed:0,atkSpeed:[.5,.4,1/3,1/3],bulletNum:1,bulletTotal:[1,1,1,1],reload:3,priceType:i.Gold,price:2e3},gj:{name:"\u5149\u5251",id:3,atk:[55,66,72,80],atkRange:300,flySpeed:0,atkSpeed:[.5,.4,1/3,1/3],bulletNum:1,bulletTotal:[1,1,1,1],reload:3,priceType:i.Gold,price:3500},jgb:{name:"\u91d1\u7b8d\u68d2",id:4,atk:[100,150,200,250],atkRange:300,flySpeed:0,atkSpeed:[1,1,1/1.5,1/1.5],bulletNum:1,bulletTotal:[1,1,1,1],reload:3,priceType:i.Diamond,price:500},sd:{name:"\u6563\u5f39\u67aa",id:5,atk:[140,160,180,200],atkRange:1e3,flySpeed:2e3,atkSpeed:[.5,.5,.5,.5],bulletNum:2,bulletTotal:[10,12,14,16],reload:3,priceType:i.Gold,price:1500},hdl:{name:"HDL",id:6,atk:[40,45,48,50],atkRange:1e3,flySpeed:2e3,atkSpeed:[1/3,.25,.2,.2],bulletNum:20,bulletTotal:[60,80,100,120],reload:2.5,priceType:i.Gold,price:2e3},sq:{name:"\u624b\u67aa",id:7,atk:[40,45,50,60],atkRange:1e3,flySpeed:2e3,atkSpeed:[.5,.4,.4,.25],bulletNum:8,bulletTotal:[24,32,40,48],reload:2,priceType:i.Gold,price:500},ju:{name:"\u72d9\u51fb\u67aa",id:8,atk:[200,250,300,400],atkRange:1500,flySpeed:2500,atkSpeed:[1,1,.5,.5],bulletNum:2,bulletTotal:[8,10,12,14],reload:3,priceType:i.Gold,price:5e3},ld:{name:"\u69b4\u5f39\u67aa",id:9,atk:[100,120,130,140],atkRange:800,flySpeed:2e3,atkSpeed:[.5,.4,.25,.25],bulletNum:3,bulletTotal:[15,18,21,24],reload:3,priceType:i.Diamond,price:500},nnp:{name:"\u9e1f\u9e1f\u67aa",id:10,atk:[75,80,90,100],atkRange:1e3,flySpeed:2e3,atkSpeed:[.5,.5,1/3,.25],bulletNum:5,bulletTotal:[20,25,30,35],reload:3,priceType:i.ZhuanPanReward,price:0,videoCount:5},gtst:{name:"\u94a2\u94c1\u624b\u5957",id:11,atk:[30,40,45,60],atkRange:1e3,flySpeed:2e3,atkSpeed:[.2,.2,.2,.2],bulletNum:10,bulletTotal:[40,50,60,70],reload:3,priceType:i.Diamond,price:300},tb:{name:"\u94c1\u68d2",id:12,atk:[40,50,55,60],atkRange:300,flySpeed:0,atkSpeed:[.5,.4,1/3,1/3],bulletNum:1,bulletTotal:[1,1,1,1],reload:3,priceType:i.Gold,price:1e3},mb:{name:"\u6728\u68d2",id:13,atk:[30,35,40,50],atkRange:300,flySpeed:0,atkSpeed:[.5,.4,1/3,1/3],bulletNum:1,bulletTotal:[1,1,1,1],reload:3,priceType:i.Gold,price:500},mq:{name:"\u55b5\u67aa",id:14,atk:[40,44,46,50],atkRange:1e3,flySpeed:2e3,atkSpeed:[.2,.2,.2,.2],bulletNum:30,bulletTotal:[60,70,80,90],reload:3,priceType:i.ZhuanPanReward,price:0,videoCount:1},szg:{name:"\u5f29\u7bad",id:15,atk:[110,150,200,250],atkRange:2e3,flySpeed:3e3,atkSpeed:[1,1,1,.5],bulletNum:1,bulletTotal:[11,12,13,15],reload:3,priceType:i.Diamond,price:500},rsq:{name:"\u956d\u5c04\u67aa",id:16,atk:[35,40,45,50],atkRange:1e3,flySpeed:2e3,atkSpeed:[.2,.2,.2,.2],bulletNum:15,bulletTotal:[45,50,75,90],reload:3,priceType:i.Gold,price:3e3},cjj:{name:"\u5c16\u53eb\u9e21",id:17,atk:[50,54,63,72],atkRange:600,flySpeed:0,atkSpeed:[.5,.5,1/3,1/3],bulletNum:5,bulletTotal:[30,35,40,45],reload:3,priceType:i.Diamond,price:300,videoCount:1},jtl:{name:"\u52a0\u7279\u6797",id:18,atk:[30,35,40,45],atkRange:1e3,flySpeed:2500,atkSpeed:[1/9,1/9,1/9,1/9],bulletNum:50,bulletTotal:[150,150,200,250],reload:3,priceType:i.Diamond,price:1e3,videoCount:2},sq2:{name:"\u53cc\u67aa",music:"sq",id:19,atk:[40,45,50,60],atkRange:1e3,flySpeed:2e3,atkSpeed:[.25,.25,.25,.25],bulletNum:12,bulletTotal:[48,48,60,60],reload:2,priceType:i.Gold,price:2e3},tj:{name:"\u7a81\u51fb\u6b65\u67aa",music:"ak",id:20,atk:[30,35,40,50],atkRange:1e3,flySpeed:2500,atkSpeed:[1/7,1/7,1/7,1/7],bulletNum:15,bulletTotal:[90,90,90,105],reload:3,priceType:i.Gold,price:2e3},fs:{name:"\u8f90\u5c04",music:"rsq",id:21,atk:[35,40,45,50],atkRange:1e3,flySpeed:2e3,atkSpeed:[.2,.2,.2,.2],bulletNum:15,bulletTotal:[45,45,60,60],reload:3,priceType:i.Gold,price:2e3}},e.SkinMess={0:{name:"Hero1",xuedi:3,hp:[330,350,360,370,380,400,450],atk:[1,2,4,6,8,9,10],speed:[520,530,540,550,560,570,580],priceType:i.Gold,price:0},1:{name:"Hero2",xuedi:3,hp:[350,370,380,390,420,430,440],atk:[2,4,5,6,8,10,12],speed:[525,535,545,555,565,575,600],priceType:i.Gold,price:1e3},2:{name:"Hero3",xuedi:4,hp:[360,370,380,390,400,420,450],atk:[4,6,8,10,12,14,18],speed:[523,534,556,576,587,602,624],priceType:i.Gold,price:2500},3:{name:"Hreo4",xuedi:6,hp:[400,420,440,460,480,500,520],atk:[1,2,4,6,8,10,12],speed:[502,513,523,533,543,553,563],priceType:i.Diamond,price:1e3}},e.EnemyMess={0:{name:"\u53f2\u83b1\u59c6",hp:95,atk:34,atkSpeed:2,atkRange:300,speed:330},1:{name:"\u5c0f\u7ea2\u4eba",hp:130,atk:0,atkSpeed:1,atkRange:800,speed:450},2:{name:"\u62f3\u51fb\u624b",hp:400,atk:50,atkSpeed:2,atkRange:400,speed:400},3:{name:"\u673a\u67aa\u624b",hp:250,atk:0,atkSpeed:1,atkRange:1e3,speed:400},4:{name:"\u96ea\u4eba",hp:600,atk:40,atkSpeed:2,atkRange:300,speed:400},5:{name:"\u53cc\u67aa",hp:1e3,atk:0,atkSpeed:1,atkRange:1e3,speed:450},6:{name:"\u5821\u5792",hp:500,atk:50,atkSpeed:1,atkRange:1e3,speed:0},7:{name:"\u6d77\u8c79\u7a81\u51fb",hp:400,atk:0,atkSpeed:1,atkRange:1e3,speed:450},8:{name:"\u8f90\u5c04\u8005",hp:400,atk:0,atkSpeed:1,atkRange:1e3,speed:420},9:{name:"\u5766\u514b\u70ae",hp:800,atk:200,atkSpeed:2,atkRange:1e3,speed:440},10:{name:"\u6811\u4eba",hp:500,atk:50,atkSpeed:2,atkRange:300,speed:200},11:{name:"\u91ce\u732a",hp:400,atk:50,atkSpeed:2,atkRange:400,speed:300},12:{name:"\u6811\u7cbe",hp:1e3,atk:50,atkSpeed:2,atkRange:500,speed:250},13:{name:"\u8725\u8734",hp:1e3,atk:60,atkSpeed:1,atkRange:500,speed:450}},e.SkillMess={1:{name:"\u81ea\u6108",cd:10,num:30,introduce_zh:"\u6062\u590d\u8840\u91cf",introduce_en:"Restore HP",level:[{num:"150%",introduce_zh:"\u56de\u590d\u91cf\u63d0\u534750%",introduce_en:"Increase the number of replies by 50%"},{num:"150%",cd:"80%",introduce_zh:"\u56de\u590d\u91cf\u63d0\u534750%,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1120%",introduce_en:"Recovery increased by 50%, cooling time reduced by 20%"},{num:"150%",cd:"50%",introduce_zh:"\u56de\u590d\u91cf\u63d0\u534750%,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1150%",introduce_en:"Recovery increased by 50%, cooling time reduced by 50%"}]},2:{name:"\u8840\u8760",cd:10,num:50,target:"enemy",introduce_zh:"\u53ec\u5524\u8840\u8760\u653b\u51fb\u654c\u4eba",introduce_en:"Summon blood bats to attack enemies",level:[{num:"125%",scale:"1.5",introduce_zh:"\u4f24\u5bb3\u63d0\u534725%",introduce_en:"Damage increased by 25%"},{num:"125%",cd:"70%",scale:"1.5",introduce_zh:"\u4f24\u5bb3\u63d0\u534725%,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1130%",introduce_en:"Damage increased by 25%, cooling time reduced by 30%"},{num:"145%",cd:"50%",scale:"1.5",introduce_zh:"\u4f24\u5bb3\u63d0\u534745%,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1150%",introduce_en:"Damage increased by 45%, cooling time reduced by 50%"}]},3:{name:"\u94c1\u7532",cd:10,num:2,introduce_zh:"\u751f\u6210\u62a4\u76fe\u62b5\u6321\u4f24\u5bb3",introduce_en:"Generate shield to resist damage",level:[{num:"150%",cd:"80%",scale:"1.2",introduce_zh:"\u6301\u7eed3\u79d2,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1120%",introduce_en:"Lasts for 3 seconds, cooling time reduced by 20%"},{num:"200%",cd:"70%",scale:"1.4",introduce_zh:"\u6301\u7eed4\u79d2,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1130%",introduce_en:"Lasts for 4 seconds, cooling time reduced by 30%"},{num:"250%",cd:"60%",scale:"1.6",introduce_zh:"\u6301\u7eed5\u79d2,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1140%",introduce_en:"Lasts for 5 seconds, cooling time reduced by 40%"}]},4:{name:"\u6124\u6012",cd:10,num:40,introduce_zh:"\u589e\u52a0\u653b\u51fb\u529b",introduce_en:"Increase attack power",level:[{num:"120%",introduce_zh:"\u653b\u51fb\u529b\u63d0\u534720%",introduce_en:"Attack power increased by 20%"},{num:"130%",cd:"90%",introduce_zh:"\u653b\u51fb\u529b\u63d0\u534730%,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1110%",introduce_en:"Attack power increased by 30%, cooling time reduced by 10%"},{num:"140%",cd:"70%",introduce_zh:"\u653b\u51fb\u529b\u63d0\u534740%,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1130%",introduce_en:"Attack power increased by 40%, cooling time reduced by 30%"}]},5:{name:"\u51a5\u706b",cd:10,num:100,target:"enemy",introduce_zh:"\u53ec\u5524\u706b\u7130\u653b\u51fb\u654c\u4eba",introduce_en:"Summon fire to attack enemies",level:[{num:"120%",scale:"1.5",introduce_zh:"\u4f24\u5bb3\u63d0\u534720%",introduce_en:"Attack power increased by 20%"},{num:"150%",scale:"1.5",introduce_zh:"\u4f24\u5bb3\u63d0\u534750%",introduce_en:"Attack power increased by 50%"},{num:"150%",cd:"50%",scale:"1.5",introduce_zh:"\u4f24\u5bb3\u63d0\u534750%,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1150%",introduce_en:"Damage increased by 50%, cooling time reduced by 50%"}]},6:{name:"\u6c34\u76fe",cd:10,num:.5,introduce_zh:"\u53ec\u5524\u6c34\u7403\u62a4\u76fe",introduce_en:"Summon water polo shield",level:[{num:"120%",introduce_zh:"\u62a4\u76fe\u589e\u52a020%",introduce_en:"Shield increased by 20%"},{num:"130%",cd:"80%",introduce_zh:"\u62a4\u76fe\u589e\u52a030%,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1120%",introduce_en:"Shield increased by 30%, cooling time reduced by 20%"},{num:"130%",cd:"60%",introduce_zh:"\u62a4\u76fe\u589e\u52a030%,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1140%",introduce_en:"Shield increased by 30%, cooling time reduced by 40%"}]},7:{name:"\u98ce\u5203",cd:10,num:40,target:"enemy",introduce_zh:"\u91ca\u653e\u98ce\u5203\u653b\u51fb\u654c\u4eba",introduce_en:"Release the wind to attack the enemy",level:[{num:"120%",cd:"80%",scale:"1.5",introduce_zh:"\u4f24\u5bb3\u63d0\u534720%,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1120%",introduce_en:"Damage increased by 20%, cooling time reduced by 20%"},{num:"150%",cd:"70%",scale:"1.5",introduce_zh:"\u4f24\u5bb3\u63d0\u534750%,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1130%",introduce_en:"Damage increased by 50%, cooling time reduced by 30%"},{num:"150%",cd:"50%",scale:"1.5",introduce_zh:"\u4f24\u5bb3\u63d0\u534750%,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1150%",introduce_en:"Damage increased by 50%, cooling time reduced by 50%"}]},8:{name:"\u76f2\u76d2",cd:20,num:1,introduce_zh:"\u968f\u673a\u6389\u843d\u9053\u5177",introduce_en:"Random dropping items",level:[{num:"200%",introduce_zh:"\u6389\u843d\u9053\u5177+1",introduce_en:"Drop item+1"},{num:"300%",introduce_zh:"\u6389\u843d\u9053\u5177+2",introduce_en:"Drop item+2"},{num:"300%",cd:"80%",introduce_zh:"\u6389\u843d\u9053\u5177+2,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1120%",introduce_en:"Drop item+2, cooling time reduced by 20%"}]},9:{name:"\u6bd2\u57df",cd:15,num:4,target:"enemy",introduce_zh:"\u53ec\u5524\u6bd2\u9635",introduce_en:"Random dropping items",level:[{num:"125%",scale:"1.2",introduce_zh:"\u6301\u7eed5\u79d2,\u8303\u56f4\u6269\u592720%",introduce_en:"Lasts for 5 seconds, the range expands by 20%"},{num:"150%",scale:"1.5",introduce_zh:"\u6301\u7eed6\u79d2,\u8303\u56f4\u6269\u592750%",introduce_en:"Lasts for 6 seconds, the range expands by 50%"},{num:"150%",scale:"1.5",cd:"60%",introduce_zh:"\u6301\u7eed6\u79d2,\u8303\u56f4\u6269\u592750,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1140%",introduce_en:"Lasts for 6 seconds, the range is expanded by 50%"}]},10:{name:"\u81f3\u9ad8\u4e4b\u62f3",cd:10,num:140,target:"enemy",introduce_zh:"\u53ec\u5524\u62f3\u5934\u653b\u51fb",introduce_en:"Summon fist attack",level:[{num:"120%",scale:"1.5",introduce_zh:"\u4f24\u5bb3\u63d0\u534725%",introduce_en:"Damage increased by 25%"},{num:"130%",cd:"60%",scale:"1.5",introduce_zh:"\u4f24\u5bb3\u63d0\u534725%,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1140%",introduce_en:"Damage increased by 25%, cooling time reduced by 40%"},{num:"140%",cd:"40%",scale:"1.5",introduce_zh:"\u4f24\u5bb3\u63d0\u534725%,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1160%",introduce_en:"Damage increased by 25%, cooling time reduced by 60%"}]},11:{name:"\u77ac\u95ea",cd:2,num:300,introduce_zh:"\u95ea\u73b0\u4e00\u6bb5\u8ddd\u79bb",introduce_en:"Flash a distance",level:[{num:"120%",introduce_zh:"\u95ea\u73b0\u8303\u56f4+20%",introduce_en:"Flash range+20%"},{num:"150%",introduce_zh:"\u95ea\u73b0\u8303\u56f4+50%",introduce_en:"Flash range+50%"},{num:"150%",cd:"50%",introduce_zh:"\u95ea\u73b0\u8303\u56f4+50%,\u51b7\u5374\u65f6\u95f4\u51cf\u5c1150%",introduce_en:"Flash range+50%, cooling time reduced by 50%"}]},12:{name:"\u4e16\u754c\u7f29\u5c0f\u5668",cd:0,num:1,introduce_zh:"\u8840\u91cf\u589e\u52a0,\u4eba\u7269\u53d8\u5927",introduce_en:"The life increases and the character becomes larger",level:[{num:"120%",scale:"1",introduce_zh:"\u8840\u91cf\u589e\u52a020%,\u4eba\u7269\u53d8\u5927",introduce_en:"HP increased by 20%, and the character became larger"},{num:"140%",scale:"1.1",introduce_zh:"\u8840\u91cf\u589e\u52a040%,\u4eba\u7269\u53d8\u5927",introduce_en:"HP increased by 40%, and the character became larger"},{num:"150%",scale:"1.2",introduce_zh:"\u8840\u91cf\u589e\u52a050%,\u4eba\u7269\u53d8\u5927",introduce_en:"HP increased by 50%, and the character became larger"}]},13:{name:"\u4e16\u754c\u6269\u5927\u4eea",cd:0,num:1,introduce_zh:"\u901f\u5ea6\u589e\u52a0,\u4eba\u7269\u53d8\u5c0f",introduce_en:"The speed increases and the characters become smaller",level:[{num:"120%",scale:"0.6",introduce_zh:"\u901f\u5ea6\u589e\u52a020%,\u4eba\u7269\u53d8\u5c0f",introduce_en:"Speed increases by 20%, and the characters become smaller"},{num:"135%",scale:"0.55",introduce_zh:"\u901f\u5ea6\u589e\u52a035%,\u4eba\u7269\u53d8\u5c0f",introduce_en:"Speed increases by 35%, and the characters become smaller"},{num:"150%",scale:"0.5",introduce_zh:"\u901f\u5ea6\u589e\u52a050%,\u4eba\u7269\u53d8\u5c0f",introduce_en:"Speed increases by 50%, and the characters become smaller"}]},14:{name:"\u66b4\u8d70\u836f\u5242",cd:0,num:1,introduce_zh:"\u5c04\u901f\u63d0\u5347,\u6362\u5f39\u52a0\u5feb",introduce_en:"Increase the firing speed and speed up the cartridge change",level:[{num:"80%",introduce_zh:"\u5c04\u901f\u589e\u52a020%",introduce_en:"Fire speed increased by 20%"},{num:"70%",reload:"60%",introduce_zh:"\u5c04\u901f\u589e\u52a030%,\u6362\u5f39\u63d0\u534740%",introduce_en:"The firing speed is increased by 30%, cartridge change is increased by 40%"},{num:"60%",reload:"40%",introduce_zh:"\u5c04\u901f\u589e\u52a040%,\u6362\u5f39\u63d0\u534760%",introduce_en:"The firing speed is increased by 40%, cartridge change is increased by 60%"}]},15:{name:"\u5b50\u5f39\u80cc\u5305",cd:0,num:1,introduce_zh:"\u589e\u52a0\u5b50\u5f39",introduce_en:"Add bullets",level:[{num:"120%",introduce_zh:"\u5b50\u5f39\u6570\u91cf\u589e\u52a020%",introduce_en:"Number of bullets increased by 20%"},{num:"140%",introduce_zh:"\u5b50\u5f39\u6570\u91cf\u589e\u52a040%",introduce_en:"Number of bullets increased by 40%"},{num:"160%",introduce_zh:"\u5b50\u5f39\u6570\u91cf\u589e\u52a060%",introduce_en:"Number of bullets increased by 60%"}]},16:{name:"\u5200\u5ba2",cd:0,num:1,introduce_zh:"\u8fd1\u6218\u6b66\u5668\u4f24\u5bb3\u63d0\u5347",introduce_en:"Melee weapon damage increased",level:[{num:"120%",introduce_zh:"\u8fd1\u6218\u4f24\u5bb3\u589e\u52a020%",introduce_en:"Melee damage increased by 20%"},{num:"140%",introduce_zh:"\u8fd1\u6218\u4f24\u5bb3\u589e\u52a040%",introduce_en:"Melee damage increased by 40%"},{num:"180%",introduce_zh:"\u8fd1\u6218\u4f24\u5bb3\u589e\u52a080%",introduce_en:"Melee damage increased by 80%"}]}},e.PathMess={path:{mapWidth:6e3,mapHeight:5e3,gridWidth:200,gridHeight:200,pathArr:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,0,1,1,1,0,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,0,0,1,1,0,0,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,0,0,1,1,1,0,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}},e.ZombieMess={0:{name:"\u5c0f\u50f5",hp:120,atk:1,atkRange:200,speed:420},1:{name:"\u94c1\u901a\u50f5",hp:250,atk:1,atkRange:200,speed:380},2:{name:"\u8dd1\u6b65\u50f5",hp:140,atk:1,atkRange:220,speed:460},3:{name:"\u8df3\u8dc3\u50f5",hp:170,atk:1,atkRange:220,speed:450},4:{name:"\u83dc\u5200\u50f5",hp:350,atk:1,atkRange:220,speed:400},5:{name:"\u70b8\u5f39\u50f5",hp:200,atk:1,atkRange:1e3,speed:420},6:{name:"\u6bd2\u836f\u50f5",hp:300,atk:1,atkRange:1e3,speed:400},7:{name:"\u91d1\u5e01\u50f5",hp:300,atk:1,atkRange:200,speed:420},8:{name:"boss1",hp:2e3,atk:1,atkRange:300,speed:400},9:{name:"boss2",hp:2500,atk:1,atkRange:350,speed:400},10:{name:"boss3",hp:3e3,atk:1,atkRange:200,speed:400},11:{name:"boss4",hp:3500,atk:1,atkRange:250,speed:400},12:{name:"boss5",hp:4e3,atk:1,atkRange:250,speed:400},13:{name:"boss6",hp:4500,atk:1,atkRange:250,speed:400},14:{name:"boss7",hp:5e3,atk:1,atkRange:450,speed:400},15:{name:"boss8",hp:5500,atk:1,atkRange:400,speed:400},16:{name:"boss9",hp:6e3,atk:1,atkRange:300,speed:400},17:{name:"boss10",hp:6500,atk:1,atkRange:200,speed:400},18:{name:"boss11",hp:7e3,atk:1,atkRange:300,speed:400},19:{name:"boss12",hp:7500,atk:1,atkRange:450,speed:400},20:{name:"boss13",hp:8e3,atk:1,atkRange:300,speed:400}},a([s],e)}();n.default=c,cc._RF.pop()},{}],gameMgr:[function(e,t,n){"use strict";cc._RF.push(t,"ba7855a2NtE/b6oGliHwfNV","gameMgr");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.gameMgr=void 0;var r=e("../Manager/CocosZ"),s=e("../Manager/Constant"),c=e("./upgradeMgr"),l=e("./zombieBase"),u=e("./types"),p=cc._decorator,d=p.ccclass,h=p.property;n.gameMgr=null;var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodePoolObj={},t.canSHowGameBanner=!0,t.tipLayer=null,t.setMapTs=null,t.playerTs=null,t.uiGamePage=null,t.moveArea=null,t.yaogan=null,t.BtnBullet=null,t.posObj={},t.dmmArr=[],t.red=null,t.hpTip=null,t.effect_fire=null,t.effect_hit=null,t.itemList=[],t.itemEffect=[],t.spark=null,t.blood=null,t.player=null,t.jiaoyin=null,t.fjTip=null,t.mainCamereRootNode=null,t.mainCamera=null,t.atk=null,t.safeCenter=cc.v2(0,0),t.redCircle=null,t.redCircle2=null,t.mapSize=cc.winSize,t.miniMapSize=null,t.btnSkill=null,t.btnSkillAd=null,t.rangedWeaponMess=null,t.rangedWeaponAdMess=null,t.ammo=null,t.ammoAd=null,t.kt=null,t.model6_touxiang=null,t.model6_btnShuxing=null,t.model6_shuxing=null,t.model6_jingyanBar=null,t.model6_levelLabel=null,t.model6_skillScrollView=null,t.model6_skillScrollView_content=null,t.model6_skillScrollView_item=null,t.model6_timeLabel=null,t.model6_ts=null,t.model6_bossBar=null,t.timeStr="",t.totalNum=0,t.deathNum=0,t.playerRank=1,t.passCondition=1,t.bossName="",t.map=null,t.startPoint=null,t.atkRange=null,t.curTime=0,t.timeLabel=null,t.snow=null,t.qlzc=null,t.GameTime=0,t.isGameStart=!1,t.posList=[],t.currentDifficultyLevel=1,t.zombieSpawnRate=a.INITIAL_ZOMBIE_SPAWN_RATE,t.zombieMaxNum=a.INITIAL_ZOMBIE_MAX_NUM,t.bossSpawnInterval=a.INITIAL_BOSS_SPAWN_INTERVAL,t.boss_border=null,t.zombieTime=0,t.zombieCurNum=0,t.zombieLength=2,t.currentZombieIndex=0,t.zombieArr=["zombie_basic","zombie_run","zombie_drum","zombie_jump","zombie_bomb","zombie_tank","zombie_poison"],t.bossArr=["boss1","boss2","boss3","boss4","boss11","boss5","boss12","boss6","boss7","boss8","boss9","boss10","boss13"],t.boss2Arr=[],t._recursionCount=0,t.lastTime=0,t.safeTime=40,t.startPos=null,t.isUp=!1,t.isDown=!1,t.isLeft=!1,t.isRight=!1,t.isPre=!0,t.clipNameArr={},t.isFail=!1,t.isWin=!1,t.isRevive=!1,t._timeArr=[0,.04,.05,.06,.07],t._disArr=[0,3,10,20,30],t._vibrateTime=0,t}var a;return i(t,e),a=t,t.prototype.nodeGet=function(e,t){var n=null;return this.nodePoolObj[e]||(this.nodePoolObj[e]=new cc.NodePool),this.nodePoolObj[e].size()?n=this.nodePoolObj[e].get():t&&t.isValid&&(n=cc.instantiate(t)),n&&(n.name=e),n},t.prototype.nodePut=function(e,t){this.nodePoolObj[e]&&t&&t.isValid&&this.nodePoolObj[e].put(t)},t.prototype.onLoad=function(){n.gameMgr=this,n.gameMgr.mainCamera.zoomRatio=.45,r.cocosz.pauseCount=0},t.prototype.start=function(){this.mainCamereRootNode.setContentSize(cc.winSize),this.mainCamereRootNode.width+=500,this.mainCamereRootNode.height+=500,this.fjTip&&(this.fjTip.active=!0,this.fjTip.zIndex=s.ZindexLayer.zindex_max)},t.prototype.lateUpdate=function(){r.cocosz.isPause||n.gameMgr.isWin||n.gameMgr.isFail||this.cameraFollow()},t.prototype.startGame=function(){var e=this;this.tipLayer=new cc.Node,this.tipLayer.name="tipLayer",this.tipLayer.zIndex=s.ZindexLayer.zindex_roleLabel,this.tipLayer.setPosition(cc.Vec2.ZERO),this.tipLayer.setParent(n.gameMgr.map),this.schedule(function(){e.update_model6_shuxing()},1),this.initPlayer()},t.prototype.initPlayer=function(){var e=cc.instantiate(this.player);e.scale=.6,e.setPosition(cc.v2(200,0).rotateSelf(2*Math.PI*Math.random())),e.setParent(this.map),this.totalNum++,this.fjEffect()},t.prototype.fjEffect=function(){this.playerTs&&(this.uiGamePage.active=!1,this.fjTip&&(this.fjTip.active=!1),this.playerTs.node.opacity=255,this.playerTs.rig.active=!1,this.followNode=this.playerTs.node,this.uiGamePage.active=!0,this.playerTs.node.zIndex=s.ZindexLayer.zindex_player,this.playerTs.rig.active=!0,this.playerTs.playerMess.opacity=255,this.playerTs.ghAniNode.opacity=255,this.playerTs.updateAni("daiji_body",!0),this.initGame(),this.schedule(this.createZombieCount,1))},t.prototype.showGameTime=function(){if(this.model6_timeLabel&&this.model6_timeLabel.isValid){var e=this.GameTime,t=0,n=0;e>60&&(t=Math.floor(e/60),e=Math.floor(e%60),t>60&&(n=Math.floor(t/60),t=Math.floor(t%60)));var a="";a+=0==n?"":n+":",a+=t>=10?""+t:"0"+t,a+=e>=10?":"+e:":0"+e,this.timeStr=a,this.model6_timeLabel.string=a}},t.prototype.update_model6_xuedi=function(){n.gameMgr.playerTs&&n.gameMgr.playerTs.hpNumNode&&n.gameMgr.playerTs.hpNumNode.isValid&&(n.gameMgr.playerTs.hpNumNode.active=!0,n.gameMgr.playerTs.hpNumNode.width=Math.min(250,50*n.gameMgr.playerTs.totalHp),n.gameMgr.playerTs.hpNumNode.children.forEach(function(e,t){t<n.gameMgr.playerTs.totalHp?(e.active=!0,t<n.gameMgr.playerTs.HP?e.children[1].opacity=255:e.children[1].opacity=0):e.active=!1}))},t.prototype.update_model6_shuxing=function(){c.upgradeMgr&&n.gameMgr&&n.gameMgr.model6_shuxing&&n.gameMgr.model6_shuxing.isValid&&n.gameMgr.model6_shuxing.active&&(this.model6_shuxing.children[0].getComponent(cc.Label).string=c.upgradeMgr.curLevel.toString(),this.model6_shuxing.children[1].getComponent(cc.Label).string=(n.gameMgr.playerTs.atkNum*n.gameMgr.playerTs.atkRate).toFixed(0),this.model6_shuxing.children[2].getComponent(cc.Label).string=(n.gameMgr.playerTs.atkSpeed*n.gameMgr.playerTs.atkSpeedRate).toFixed(1),this.model6_shuxing.children[3].getComponent(cc.Label).string=(n.gameMgr.playerTs.reloadSpeed*n.gameMgr.playerTs.reloadRate).toFixed(1),this.model6_shuxing.children[4].getComponent(cc.Label).string=n.gameMgr.playerTs.curWeapon.bulletNum.toString(),this.model6_shuxing.children[5].getComponent(cc.Label).string=(n.gameMgr.playerTs.MoveSpeed*n.gameMgr.playerTs.speedRate).toFixed(0),this.model6_shuxing.children[6].getComponent(cc.Label).string=c.upgradeMgr.jingyanRange.toString())},t.prototype.showBossHp=function(e){e>0?(this.model6_bossBar&&cc.isValid(this.model6_bossBar)&&(this.model6_bossBar.node.active=!0,this.model6_bossBar.progress=e),this.model6_jingyanBar&&cc.isValid(this.model6_jingyanBar)&&(this.model6_jingyanBar.node.active=!1),this.model6_levelLabel&&cc.isValid(this.model6_levelLabel)&&(this.model6_levelLabel.node.active=!1)):(this.model6_bossBar&&cc.isValid(this.model6_bossBar)&&(this.model6_bossBar.node.active=!1,this.model6_bossBar.progress=e),this.model6_jingyanBar&&cc.isValid(this.model6_jingyanBar)&&(this.model6_jingyanBar.node.active=!0),this.model6_levelLabel&&cc.isValid(this.model6_levelLabel)&&(this.model6_levelLabel.node.active=!0))},t.prototype.createZombieCount=function(){var e=this;if(!(r.cocosz.isPause||n.gameMgr.isWin||n.gameMgr.isFail)){null==r.cocosz.web3Mgr.StartTime&&(r.cocosz.web3Mgr.StartTime=Date.now()),r.cocosz.web3Mgr.EndTime=Date.now(),this.GameTime++,r.cocosz.totalTime=this.GameTime,this.showGameTime(),this.GameTime%a.DIFFICULTY_INCREMENT_INTERVAL==0&&(this.currentDifficultyLevel++,this.zombieMaxNum+=20,this.bossSpawnInterval-=15,this.zombieLength=Math.min(this.zombieLength+1,this.zombieArr.length)),this.zombieTime++;var t=1;if(this.zombieTime%50==0){if(this.model6_ts){this.model6_ts.active=!0,this.scheduleOnce(function(){e.model6_ts.active=!1},3);var i=this.model6_ts.getComponent(sp.Skeleton);i.setSkin("sclx_"+r.cocosz.curLanguage),i.setAnimation(0,"animation",!0)}if(this.zombieMaxNum=20+10*Math.floor(this.zombieTime/40),this.zombieMaxNum>a.ZOMBIE_MAX_NUM&&(this.zombieMaxNum=a.ZOMBIE_MAX_NUM),this.zombieCurNum<this.zombieMaxNum){t=this.zombieMaxNum-this.zombieCurNum;for(var o=Math.ceil(t/10),s=0,c=0;c<o;c++)this.schedule(function(){s+=36,e.createCommonZombie(cc.winSize.height/2.5/e.mainCamera.zoomRatio,s)},.1,Math.ceil(t/o),c)}for(c=this.boss2Arr.length-1;c>=0&&c>=this.boss2Arr.length-2;c--){var l=this.boss2Arr[c];l&&this.createZombie(l,n.gameMgr.playerTs.node.getPosition(),cc.winSize.width/2/this.mainCamera.zoomRatio)}}else this.zombieTime%this.bossSpawnInterval==0?this.createBossZombie():(this.zombieMaxNum=5+5*Math.floor(this.zombieTime/20),this.zombieMaxNum>20&&(this.zombieMaxNum=20),this.zombieCurNum<this.zombieMaxNum&&(t=Math.ceil(4*Math.random()),this.schedule(function(){e.createCommonZombie(cc.winSize.height/2.5/e.mainCamera.zoomRatio)},.1,t)))}},t.prototype.createCommonZombie=function(e,t){var a=Math.floor(Math.random()*this.zombieLength),i=this.zombieArr[a];i&&this.createZombie(i,n.gameMgr.playerTs.node.getPosition(),e,t)},t.prototype.createBossZombie=function(){var e=this;if(this.bossArr.length){if(this.createBossBorder(),this.model6_ts){this.model6_ts.active=!0,this.scheduleOnce(function(){e.model6_ts.active=!1},3);var t=this.model6_ts.getComponent(sp.Skeleton);t.setSkin("bosslx_"+r.cocosz.curLanguage),t.setAnimation(0,"animation",!0)}var a=this.bossArr.shift(),i=n.gameMgr.playerTs.node.getPosition();this.boss_border&&(i=this.boss_border.getPosition()),a&&(this.boss2Arr.push(a),this.createZombie(a,i,300,null,!0))}},t.prototype.createBossBorder=function(){var e=r.cocosz.resMgr.getRes("boss_border",cc.Prefab);e&&(this.boss_border=cc.instantiate(e),this.boss_border.setPosition(n.gameMgr.playerTs.node.getPosition()),this.boss_border.x-this.boss_border.width/2<-n.gameMgr.mapSize.width/2?this.boss_border.x=-n.gameMgr.mapSize.width/2+this.boss_border.width/2+100:this.boss_border.x+this.boss_border.width/2>n.gameMgr.mapSize.width/2&&(this.boss_border.x=n.gameMgr.mapSize.width/2-this.boss_border.width/2-100),this.boss_border.y-this.boss_border.height/2<-n.gameMgr.mapSize.height/2?this.boss_border.y=-n.gameMgr.mapSize.height/2+this.boss_border.height/2+100:this.boss_border.y+this.boss_border.height/2>n.gameMgr.mapSize.height/2&&(this.boss_border.y=n.gameMgr.mapSize.height/2-this.boss_border.height/2-300),this.boss_border.setParent(this.map))},t.prototype.createZombie=function(e,t,a,i,o){var s=this;void 0===o&&(o=!1);var c=r.cocosz.resMgr.getRes(e,cc.Prefab);if(c){this._recursionCount=0;var u=this.getZombieBirthPos(t,a,i);if(u){var p=this.nodeGet(e,c);if(p){var d=p.getComponent(l.default);d&&o&&(d.isBoss=!0),p.setPosition(u),p.setParent(n.gameMgr.map),d&&d.initNode()}}}else r.cocosz.resMgr.loadAndCacheRes("prefab_zombie/"+e,cc.Prefab,null,function(n){n||s.createZombie(e,t,a,i,o)})},t.prototype.getZombieBirthPos=function(e,t,a){if(++this._recursionCount>100)return null;var i;i=null==a||null==a?2*Math.PI*Math.random():cc.misc.degreesToRadians(a);var o=cc.v2(t+Math.floor(200*Math.random()),0).rotateSelf(i),r=e.add(o);return r.x>-n.gameMgr.mapSize.width/2+400&&r.x<n.gameMgr.mapSize.width/2-400&&r.y<n.gameMgr.mapSize.height/2-400&&r.y>-n.gameMgr.mapSize.height/2+400?r:this.getZombieBirthPos(e,t)},t.prototype.initGame=function(){var e=this;this.startPos=this.yaogan.getPosition(),this.isGameStart=!0,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.keyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.keyUp,this),this.moveArea.on(cc.Node.EventType.TOUCH_START,function(t){var n=t.getLocation();n=e.node.convertToNodeSpaceAR(n),e.yaogan.setPosition(n)},this),this.moveArea.on(cc.Node.EventType.TOUCH_MOVE,function(t){var a=t.getLocation().sub(t.getStartLocation());a.mag()>160&&(a=a.mul(160/a.mag())),e.yaogan.children[0].setPosition(a),n.gameMgr.playerTs.moveDir=a.normalize()},this),this.moveArea.on(cc.Node.EventType.TOUCH_END,function(){e.yaogan.setPosition(e.startPos),e.yaogan.children[0].setPosition(cc.v2(0,0)),n.gameMgr.playerTs.moveDir=cc.v2(0,0)},this),this.moveArea.on(cc.Node.EventType.TOUCH_CANCEL,function(){e.yaogan.setPosition(e.startPos),e.yaogan.children[0].setPosition(cc.v2(0,0)),n.gameMgr.playerTs.moveDir=cc.v2(0,0)},this)},t.prototype.keyDown=function(e){switch(e.keyCode){case 87:this.isUp||(this.isUp=!0,this.setDir());break;case 83:this.isDown||(this.isDown=!0,this.setDir());break;case 65:this.isLeft||(this.isLeft=!0,this.setDir());break;case 68:this.isRight||(this.isRight=!0,this.setDir())}},t.prototype.keyUp=function(e){switch(e.keyCode){case 87:this.isUp=!1,this.setDir();break;case 83:this.isDown=!1,this.setDir();break;case 65:this.isLeft=!1,this.setDir();break;case 68:this.isRight=!1,this.setDir()}},t.prototype.cameraFollow=function(){var e=null,t=.1;if(this.followNode&&this.followNode.isValid&&(e=this.followNode.getPosition(),t=.1),e){var a=this.mainCamereRootNode.getPosition(),i=cc.Vec2.ZERO,o=this.mainCamera.zoomRatio,r=new cc.Size(cc.winSize.width/o,cc.winSize.height/o);e.x+r.width/2>n.gameMgr.mapSize.width/2?e.x=n.gameMgr.mapSize.width/2-r.width/2:e.x-r.width/2<-n.gameMgr.mapSize.width/2&&(e.x=-n.gameMgr.mapSize.width/2+r.width/2),e.y+r.height/2>n.gameMgr.mapSize.height/2?e.y=n.gameMgr.mapSize.height/2-r.height/2:e.y-r.height/2<-n.gameMgr.mapSize.height/2&&(e.y=-n.gameMgr.mapSize.height/2+r.height/2),e.sub(a).mag()<1e3?(cc.Vec2.lerp(i,a,e,t),this.mainCamereRootNode.setPosition(i)):(this.mainCamereRootNode.setPosition(e),n.gameMgr.setMapTs&&n.gameMgr.setMapTs.checkAllNode())}},t.prototype.setDir=function(){var e=cc.v2(0,0);this.isUp&&e.y++,this.isLeft&&e.x--,this.isRight&&e.x++,this.isDown&&e.y--,this.playerTs.moveDir=e.normalize()},t.prototype.restart=function(){},t.prototype.useMeleeWeapon=function(){},t.prototype.useRangedWeapon=function(){this.playerTs.changeCurWeapon(this.playerTs.rangedWeapon)},t.prototype.useRangedWeaponAd=function(){this.playerTs.changeCurWeapon(this.playerTs.rangedWeaponAd)},t.prototype.getNewWeapon=function(){r.cocosz.audioMgr.playEffect("changeWeapon"),this.playerTs.setNewWeapon()},t.prototype.playEffect=function(e,t,a){var i=this;if(void 0===a&&(a=.2),!(n.gameMgr.isWin||n.gameMgr.isFail||r.cocosz.isPause||this.clipNameArr[e])){if(t&&t.isValid&&t.parent&&t.parent.isValid){var o=t.getPosition();o=t.parent.convertToWorldSpaceAR(o);var s=this.playerTs.node.getPosition();if(s=this.playerTs.node.parent.convertToWorldSpaceAR(s),o.sub(s).mag()>2e3)return}r.cocosz.audioMgr.playEffect(e,!1,1),a>0&&(this.clipNameArr[e]=1,this.scheduleOnce(function(){i.clipNameArr[e]=0},a))}},t.prototype.playClip=function(e,t,a){var i=this;if(void 0===a&&(a=.2),!(n.gameMgr.isWin||n.gameMgr.isFail||r.cocosz.isPause||this.clipNameArr[e.name])){if(t&&t.isValid&&t.parent&&t.parent.isValid){var o=t.getPosition();o=t.parent.convertToWorldSpaceAR(o);var s=this.playerTs.node.getPosition();if(s=this.playerTs.node.parent.convertToWorldSpaceAR(s),o.sub(s).mag()>2e3)return}r.cocosz.audioMgr.playClip(e,!1,1),a>0&&(this.clipNameArr[e.name]=1,this.scheduleOnce(function(){i.clipNameArr[e.name]=0},a))}},t.prototype.showRoleTip=function(e,t,a){var i=this;if(void 0===a&&(a=cc.Color.WHITE),e&&e.isValid&&this.hpTip&&this.hpTip.isValid&&n.gameMgr.tipLayer){var o=this.nodeGet("hpTip",this.hpTip);if(o){o.setParent(n.gameMgr.tipLayer),o.setPosition(e.x+200*(Math.random()-.5),e.y+e.height/2),o.opacity=255,o.color=a,o.scale=a==cc.Color.WHITE?1:1.2;var r=o.getComponent(cc.Label);r&&(r.string=t),o.stopAllActions(),cc.tween(o).by(.5,{y:20,scale:1}).by(.3,{y:10,scale:-1,opacity:-255}).call(function(){i.nodePut("hpTip",o)}).start()}}},t.prototype.fail=function(){var e=this;this.isWin||this.isFail||(r.cocosz.pauseCount++,this.isFail=!0,this.unscheduleAllCallbacks(),c.upgradeMgr&&c.upgradeMgr.unscheduleAllCallbacks(),this.scheduleOnce(function(){e.qlzc.active=!0,cc.tween(e.qlzc).delay(.3).call(function(){e.qlzc.getChildByName("dian").children[0].active=!0}).delay(.3).call(function(){e.qlzc.getChildByName("dian").children[1].active=!0}).delay(.3).call(function(){e.qlzc.getChildByName("dian").children[2].active=!0}).delay(.3).call(function(){e.qlzc.getChildByName("dian").children[0].active=!1,e.qlzc.getChildByName("dian").children[1].active=!1,e.qlzc.getChildByName("dian").children[2].active=!1}).union().repeatForever().start()},2),this.scheduleOnce(function(){r.cocosz.gameMgr.gameFailed()},4))},t.prototype.win=function(){var e=this;this.isWin||this.isFail||(r.cocosz.pauseCount++,this.isWin=!0,this.unscheduleAllCallbacks(),c.upgradeMgr&&c.upgradeMgr.unscheduleAllCallbacks(),this.scheduleOnce(function(){e.qlzc.active=!0,cc.tween(e.qlzc).delay(.3).call(function(){e.qlzc.getChildByName("dian").children[0].active=!0}).delay(.3).call(function(){e.qlzc.getChildByName("dian").children[1].active=!0}).delay(.3).call(function(){e.qlzc.getChildByName("dian").children[2].active=!0}).delay(.3).call(function(){e.qlzc.getChildByName("dian").children[0].active=!1,e.qlzc.getChildByName("dian").children[1].active=!1,e.qlzc.getChildByName("dian").children[2].active=!1}).union().repeatForever().start()},2),this.scheduleOnce(function(){r.cocosz.gameMgr.gameSuccess()},4))},t.prototype.revive=function(){this.isRevive=!0,this.playerTs.revive()},t.prototype.shakeEffect=function(e,t,n,a){void 0===e&&(e=1),void 0===t&&(t=1),void 0===n&&(n=!0),void 0===a&&(a=u.VibrateType.Short);var i=this._timeArr[e],o=this._disArr[e];e>0&&t>0&&(this.mainCamera.node.stopAllActions(),this.mainCamera.node.setPosition(0,0,0),cc.tween(this.mainCamera.node).to(i,{position:cc.v3(o,o)}).to(i,{position:cc.v3(0,-o)}).to(i,{position:cc.v3(-o,o)}).to(i,{position:cc.v3(-o,-o)}).to(i,{position:cc.v3(0,o)}).to(i,{position:cc.v3(0,0)}).union().repeat(t).start())},t.prototype.guideSkip=function(){},t.DIFFICULTY_INCREMENT_INTERVAL=180,t.INITIAL_ZOMBIE_SPAWN_RATE=1,t.INITIAL_ZOMBIE_MAX_NUM=30,t.ZOMBIE_MAX_NUM=500,t.INITIAL_BOSS_SPAWN_INTERVAL=300,o([h(cc.Node)],t.prototype,"red",void 0),o([h(cc.Prefab)],t.prototype,"hpTip",void 0),o([h(cc.Prefab)],t.prototype,"effect_fire",void 0),o([h(cc.Prefab)],t.prototype,"effect_hit",void 0),o([h(cc.Prefab)],t.prototype,"itemList",void 0),o([h(cc.Prefab)],t.prototype,"itemEffect",void 0),o([h(cc.Prefab)],t.prototype,"spark",void 0),o([h(cc.Prefab)],t.prototype,"blood",void 0),o([h(cc.Prefab)],t.prototype,"player",void 0),o([h(cc.SpriteFrame)],t.prototype,"jiaoyin",void 0),o([h(cc.Node)],t.prototype,"fjTip",void 0),o([h(cc.Node)],t.prototype,"mainCamereRootNode",void 0),o([h(cc.Camera)],t.prototype,"mainCamera",void 0),a=o([d],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","./types":"types","./upgradeMgr":"upgradeMgr","./zombieBase":"zombieBase"}],jingyan:[function(e,t,n){"use strict";cc._RF.push(t,"14607c2NPFLXrODbf9T8Km8","jingyan");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Manager/CocosZ"),s=e("../Manager/Constant"),c=e("./gameMgr"),l=e("./types"),u=e("./upgradeMgr"),p=cc._decorator,d=p.ccclass,h=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isRun=!1,t.moveSpeed=1e3,t._time=-1,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.init=function(){var e=this;this.isRun=!1,cc.game.on(s.default.E_Skill_Citie,function(){e.isRun=!0},this)},t.prototype.finish=function(){u.upgradeMgr.curJingyan+=1,cc.game.emit(s.default.E_GAME_LOGIC,{type:s.default.E_Jingyan_Finish}),r.cocosz.isPause||(c.gameMgr.playEffect("jingyan"),c.gameMgr.shakeEffect(0,0,!0,l.VibrateType.Long)),cc.game.targetOff(this),c.gameMgr&&c.gameMgr.isValid&&c.gameMgr.nodePut("jingyan",this.node)},t.prototype.update=function(e){0==this.isRun?++this._time%10==0&&this.activating():this.followTo(e)},t.prototype.activating=function(){if(u.upgradeMgr&&u.upgradeMgr.isValid&&c.gameMgr&&c.gameMgr.playerTs&&c.gameMgr.playerTs.isValid){var e=this.node.getPosition(),t=c.gameMgr.playerTs.node.getPosition();e.sub(t).mag()<u.upgradeMgr.jingyanRange&&(this.isRun=!0)}},t.prototype.followTo=function(e){if(u.upgradeMgr&&u.upgradeMgr.isValid&&c.gameMgr&&c.gameMgr.playerTs&&c.gameMgr.playerTs.isValid){var t=this.node.getPosition(),n=c.gameMgr.playerTs.node.getPosition().subSelf(t),a=this.moveSpeed*e;n.mag()<a?this.finish():this.node.setPosition(t.addSelf(n.normalizeSelf().mulSelf(a)))}},o([d],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","./gameMgr":"gameMgr","./types":"types","./upgradeMgr":"upgradeMgr"}],mb:[function(e,t,n){"use strict";cc._RF.push(t,"bbc16OLUIxBPILLHZnxIsqr","mb");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Manager/CocosZ"),s=e("../Manager/Constant"),c=e("./gameMgr"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clip=null,t._spAni=null,t.time=-1,t.isAtk=!1,t.isHart=!1,t.canChangeState=!0,t}return i(t,e),t.prototype.onLoad=function(){this._spAni=this.node.getChildByName("ani").getComponent(sp.Skeleton)},t.prototype.start=function(){this.node.zIndex=s.ZindexLayer.zindex_mb,this._spAni.setAnimation(0,"daiji",!1)},t.prototype.update=function(){if(!r.cocosz.isPause&&c.gameMgr.isGameStart&&!c.gameMgr.isWin&&!c.gameMgr.isFail&&++this.time%15==0)if(c.gameMgr&&c.gameMgr.playerTs&&0==c.gameMgr.playerTs.isDeath){var e=this.node.getPosition(),t=c.gameMgr.playerTs.node.getPosition(),n=e.subSelf(t).mag();n<400?(this.atkStart(),n<300&&this.atkEnemy()):this.atkEnd()}else this.atkEnd()},t.prototype.atkEnemy=function(){this.isHart&&c.gameMgr&&c.gameMgr.playerTs&&c.gameMgr.playerTs.hart(1,null)},t.prototype.atkStart=function(){var e=this;this.canChangeState&&0==this.isAtk&&(this.canChangeState=!1,this.isAtk=!0,this.node.stopAllActions(),cc.tween(this.node).call(function(){e._spAni.setAnimation(0,"doudong",!0)}).delay(.5).call(function(){e.clip&&e.clip.isValid&&c.gameMgr.playClip(e.clip,e.node),e._spAni.setAnimation(0,"zheng",!1),e._spAni.addAnimation(0,"zheng2",!0),e.isHart=!0}).delay(3).call(function(){e.canChangeState=!0}).start())},t.prototype.atkEnd=function(){this.canChangeState&&1==this.isAtk&&(this.isAtk=!1,this.isHart=!1,this._spAni.setAnimation(0,"daiji",!1))},o([p({type:cc.AudioClip,tooltip:"\u97f3\u6548"})],t.prototype,"clip",void 0),o([u],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","./gameMgr":"gameMgr"}],person:[function(e,t,n){"use strict";cc._RF.push(t,"9c57aW3ydVKJ6Xst8KQr8d9","person");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Manager/CocosZ"),s=e("../Manager/Constant"),c=e("./gameDate"),l=e("./gameMgr"),u=e("./weapon"),p=e("LanguageData"),d=cc._decorator,h=d.ccclass,g=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ghAniNode=null,t.ycAniNode=null,t.personAtk=0,t.playerName="",t.personLevel=0,t.atkNum=40,t.atkRange=800,t.atkSpeed=4,t.reloadSpeed=2,t.totalHp=300,t.curHp=300,t.atkRate=1,t.speedRate=1,t.atkSpeedRate=1,t.reloadRate=1,t.bulletRate=1,t.meleeAtkRate=1,t.damageReduction=0,t.recoverItemNum=0,t.killNum=0,t.curKillNum=0,t.MoveSpeed=600,t.moveDir=cc.v2(0,0),t.atkDir=cc.v2(0,0),t.footNum=0,t.lastPos=cc.v2(0,0),t.canMove=!0,t.canMoveDir=!0,t.detectRange=1e3,t.mat_common=null,t.mat_attacked=null,t.body=null,t.hpBar=null,t.hpSpr=null,t.shieldBar=null,t.atkBar=null,t.playerMess=null,t.ani=null,t.id=0,t.isPlayer=!1,t.atkTarget=null,t.weapon=null,t.weapon_dao=null,t.hpNumNode=null,t._shield=0,t.maxShield=100,t.rig=null,t.curTime=0,t._playerMessY=200,t.isReady=!1,t.curSkin=0,t.weaponAdArr=[9,10,14,17,18],t.weaponAdIndex=Math.floor(Math.random()*t.weaponAdArr.length),t.meleeWeaponNum=3,t.rangedWeaponNum=1,t.rangedWeaponAdNum=1,t.meleeWeapon=null,t.rangedWeapon=null,t.rangedWeaponAd=null,t.curWeapon=null,t.startPosNode=null,t.lastTime=0,t._aniName="",t.isAtk=!1,t.atkList=[],t.curItem=0,t.curItemEffect=null,t.itemTarget=null,t.grassID=0,t.houseID=0,t.isInHouse=!1,t.newWeapon=-1,t.newWeaponItem=null,t.poisonCount=0,t.isDeath=!1,t.isAttackedEffect=!1,t.maxNum=0,t.isAvoidInjury=0,t.killer=null,t.revivePos=cc.v2(0,0),t}var n;return i(t,e),n=t,Object.defineProperty(t.prototype,"HP",{get:function(){return this.curHp},set:function(e){(e=Math.floor(e))<0?e=0:e>this.totalHp&&(e=this.totalHp),this.curHp=e,this.hpBar&&this.hpBar.isValid&&(this.hpBar.progress=this.curHp/this.totalHp),this.isPlayer&&l.gameMgr.update_model6_xuedi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Shiled",{get:function(){return this._shield},set:function(e){cc.Tween.stopAllByTarget(this.shieldBar),this._shield=e,this._shield<0?(this._shield=0,this.shieldBar.node.opacity=0):this.shieldBar.node.opacity=255,cc.tween(this.shieldBar).to(.3,{progress:this._shield/this.maxShield}).start()},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){},t.prototype.start=function(){this.playerMess&&this.playerMess.isValid?(this._playerMessY=this.playerMess.y,this.playerMess.setParent(this.node.parent),this.playerMess.zIndex=s.ZindexLayer.zindex_hp,this.updateMess()):this.hpBar&&this.hpBar.isValid&&(this._playerMessY=this.hpBar.node.y,this.hpBar.node.setParent(this.node.parent),this.hpBar.node.zIndex=s.ZindexLayer.zindex_hp,this.updateMess())},t.prototype.update=function(){},t.prototype.lateUpdate=function(){},t.prototype.updateMess=function(){this.playerMess&&this.playerMess.isValid?this.node&&this.node.isValid&&this.node.active&&this.node.opacity&&this.HP?(this.playerMess.active=!0,this.playerMess.setPosition(this.node.x,this.node.y+this._playerMessY)):this.playerMess.active=!1:this.hpBar&&this.hpBar.isValid&&this.hpBar.node&&this.hpBar.node.isValid&&(this.node&&this.node.isValid&&this.node.active&&this.node.opacity&&this.HP?(this.hpBar.node.active=!0,this.hpBar.node.setPosition(this.node.x,this.node.y+this._playerMessY)):this.hpBar.node.active=!1)},t.prototype.updateGhAni=function(){this.ghAniNode&&this.ghAniNode.isValid&&(this.node&&this.node.isValid&&this.node.active&&this.node.opacity&&this.HP?(this.ghAniNode.active=!0,this.ghAniNode.angle=this.node.angle,this.ghAniNode.setPosition(this.node.x,this.node.y-90)):this.ghAniNode.active=!1)},t.prototype.updateYcAni=function(){this.ycAniNode&&this.ycAniNode.isValid&&(this.node&&this.node.isValid&&this.node.active&&this.node.opacity&&this.HP&&!this.moveDir.equals(cc.Vec2.ZERO)?(this.ycAniNode.active=!0,this.ycAniNode.setPosition(this.node.x,this.node.y-50),this.ycAniNode.scaleX=this.moveDir.x>0?1:-1):this.ycAniNode.active=!1)},t.prototype.setProperty=function(){var e=this;this.ani=this.body.getComponent(cc.Animation),this.node.getComponent(cc.CircleCollider).radius=this.detectRange,this.isPlayer&&(this.atkRange=1e3),this.personLevel=Math.floor(6*Math.random());var t,n=u.default.meleeWeapon[Math.floor(Math.random()*u.default.meleeWeapon.length)],a=u.default.rangeWeapon[Math.floor(13*Math.random())];(this.isPlayer&&(n=r.cocosz.dataMgr.CurMelee+1,a=r.cocosz.dataMgr.CurRange+1,r.cocosz.gameMgr.gameCtr.curUseSkinId<0?this.curSkin=r.cocosz.dataMgr.CurSkinId:this.curSkin=r.cocosz.gameMgr.gameCtr.curUseSkinId,this.personLevel=r.cocosz.dataMgr.getSkinInfo(this.curSkin).Level,this.personAtk=c.default.SkinMess[""+(this.curSkin+1)].atk[this.personLevel],this.totalHp=c.default.SkinMess[""+(this.curSkin+1)].xuedi,this.HP=this.totalHp),this.setNewWeapon(n-1),this.setNewWeapon(a-1),this.changeCurWeapon(this.rangedWeapon,!1),this.isPlayer&&cc.tween(l.gameMgr.rangedWeaponAdMess).call(function(){e.refreshWeaponAd()}).delay(10).union().repeatForever().start(),this.hpBar.node.active=!1,this.atkBar.node.active=!1,this.MoveSpeed=200+c.default.SkinMess[""+(this.curSkin+1)].speed[this.personLevel],this.personLevel>0)?(this.ghAniNode.color=cc.Color.WHITE,(t=this.ghAniNode.getComponent(sp.Skeleton))&&t.setSkin(["","y","p","r"][Math.ceil(this.personLevel/2)])):(this.ghAniNode.color=cc.Color.BLACK,(t=this.ghAniNode.getComponent(sp.Skeleton)).setSkin("r"),t.setAnimation(0,"animation",!0));this.body.getChildByName("skin").getComponent(cc.Sprite).spriteFrame=r.cocosz.resMgr.getRes("player_"+this.curSkin,cc.SpriteFrame),this.playerName||(this.playerName=p.t("game.player")+this.id);var i=this.playerMess.getChildByName("nameLabel");i&&(i.active=!1),this.lastPos=this.node.getPosition(),this.isReady=!0},t.prototype.refreshWeaponAd=function(){if(!r.cocosz.isPause&&this.isPlayer){++this.weaponAdIndex>=this.weaponAdArr.length&&(this.weaponAdIndex=0);var e=this.weaponAdArr[this.weaponAdIndex],t=u.default.WeaponName[e],n=r.cocosz.resMgr.getRes("weapon_"+t,cc.Prefab),a=cc.instantiate(n),i=a.getComponent(u.default);i.person=this,this.body.addChild(a),a.active=!1,i.weaponType=u.WeaponType.weapon_rangeAd,this.rangedWeaponAd&&this.rangedWeaponAd.destroy(),this.rangedWeaponAd=a,this.rangedWeaponAdNum=i.weaponNum;var o="w_"+u.default.WeaponName[this.rangedWeaponAdNum-1],s=r.cocosz.resMgr.getRes(o,cc.SpriteFrame);l.gameMgr.rangedWeaponAdMess.children[3].getComponent(cc.Sprite).spriteFrame=s,l.gameMgr.rangedWeaponAdMess.children[4].getComponent(cc.Sprite).spriteFrame=r.cocosz.resMgr.getRes("w_"+(e+1),cc.SpriteFrame),l.gameMgr.rangedWeaponAdMess.children[5].getComponent(cc.Label).string=i.atkNum.toString(),i.setBulletUI()}},t.prototype.setNewWeapon=function(e){if(void 0===e&&(e=this.newWeapon),!(e<0)){var t=u.default.WeaponName[e],n=r.cocosz.resMgr.getRes("weapon_"+t,cc.Prefab),a=cc.instantiate(n),i=a.getComponent(u.default);if(i.person=this,this.body.addChild(a),a.active=!1,i.isRangeWeapon)if(this.curWeapon&&this.curWeapon.weaponType==u.WeaponType.weapon_rangeAd){if(i.weaponType=u.WeaponType.weapon_rangeAd,this.rangedWeaponAd&&this.rangedWeaponAd.destroy(),this.rangedWeaponAd=a,this.rangedWeaponAdNum=i.weaponNum,this.isPlayer){var o="w_"+u.default.WeaponName[this.rangedWeaponAdNum-1],s=r.cocosz.resMgr.getRes(o,cc.SpriteFrame);l.gameMgr.rangedWeaponAdMess.children[3].getComponent(cc.Sprite).spriteFrame=s,l.gameMgr.rangedWeaponAdMess.children[4].getComponent(cc.Sprite).spriteFrame=r.cocosz.resMgr.getRes("w_"+(e+1),cc.SpriteFrame),l.gameMgr.rangedWeaponAdMess.children[5].getComponent(cc.Label).string=i.atkNum.toString(),i.setBulletUI()}}else i.weaponType=u.WeaponType.weapon_range,this.rangedWeapon&&this.rangedWeapon.destroy(),this.rangedWeapon=a,this.rangedWeaponNum=i.weaponNum,this.isPlayer&&(o="w_"+u.default.WeaponName[this.rangedWeaponNum-1],s=r.cocosz.resMgr.getRes(o,cc.SpriteFrame),l.gameMgr.rangedWeaponMess.children[3].getComponent(cc.Sprite).spriteFrame=s,l.gameMgr.rangedWeaponMess.children[4].getComponent(cc.Sprite).spriteFrame=r.cocosz.resMgr.getRes("w_"+(e+1),cc.SpriteFrame),l.gameMgr.rangedWeaponMess.children[5].getComponent(cc.Label).string=i.atkNum.toString(),i.setBulletUI());else i.weaponType=u.WeaponType.weapon_melee,this.meleeWeapon&&this.meleeWeapon.destroy(),this.meleeWeapon=a,this.meleeWeaponNum=i.weaponNum;this.curWeapon&&this.curWeapon.isRangeWeapon===i.isRangeWeapon&&this.changeCurWeapon(a,!1),this.newWeapon=-1,this.newWeaponItem&&this.newWeaponItem.isValid&&this.newWeaponItem.destroy(),this.newWeaponItem=null}},t.prototype.changeCurWeapon=function(e,t){if(void 0===t&&(t=!0),e&&e.isValid&&(!this.curWeapon||!this.curWeapon.isValid||e!=this.curWeapon.node)){var n=Number(new Date);if(!(t&&n-this.lastTime<1e3)){this.lastTime=n,this.curWeapon&&cc.isValid(this.curWeapon)&&(this.curWeapon.node.active=!1),e.active=!0;var a=e.getComponent(u.default);if(a){if(this.isPlayer){var i=null;if(a.weaponType==u.WeaponType.weapon_melee?l.gameMgr.BtnBullet.active=!1:a.weaponType==u.WeaponType.weapon_range?i=l.gameMgr.rangedWeaponMess:a.weaponType==u.WeaponType.weapon_rangeAd&&(i=l.gameMgr.rangedWeaponAdMess),i.children[0].active=!0,this.curWeapon&&this.curWeapon.isValid){r.cocosz.audioMgr.playEffect("changeWeapon");var o=null;this.curWeapon.weaponType==u.WeaponType.weapon_melee||(this.curWeapon.weaponType==u.WeaponType.weapon_range?o=l.gameMgr.rangedWeaponMess:this.curWeapon.weaponType==u.WeaponType.weapon_rangeAd&&(o=l.gameMgr.rangedWeaponAdMess)),o!==i&&(o.children[0].active=!1,o.children[1].active=!0,cc.tween(o.children[1].getComponent(cc.Sprite)).set({fillRange:-1}).to(1,{fillRange:0}).call(function(){o.isValid&&(o.children[1].active=!1)}).start())}}a.isRangeWeapon&&(this.startPosNode=e.getChildByName("startPos")),this.curWeapon=a,this.atkNum=this.curWeapon.atkNum*(this.curWeapon.isRangeWeapon?1:this.meleeAtkRate),this.atkSpeed=this.curWeapon.atkSpeed,this.reloadSpeed=this.curWeapon.reload}}}},t.prototype.atkStart=function(){},t.prototype.atkEnemy=function(){},t.prototype.atkComplete=function(){},t.prototype.setWeaponAngle=function(e){this.curWeapon&&this.curWeapon.isValid&&this.curWeapon.isRangeWeapon&&(e.equals(cc.Vec2.ZERO)?this.curWeapon.node.angle=0:(e.x<0?this.curWeapon.node.angle=cc.v2(e).signAngle(cc.v2(-1,0))/Math.PI*180:this.curWeapon.node.angle=-cc.v2(e).signAngle(cc.v2(1,0))/Math.PI*180,e.y>0?this.curWeapon.node&&(this.rangedWeapon.zIndex=-1):this.curWeapon.node&&(this.rangedWeapon.zIndex=1)))},t.prototype.updateAni=function(e,t){void 0===t&&(t=!1),t?this._playAni(e):l.gameMgr.isGameStart&&(e=this.isDeath?"die":this.moveDir.equals(cc.Vec2.ZERO)?"daiji_body":"run_body",this._playAni(e))},t.prototype._playAni=function(e){null==this.ani?null!=this.body&&(this.ani=this.body.getComponent(cc.Animation),this.ani.play(e),this._aniName=e):e&&e!=this._aniName&&(this.ani.play(e),this._aniName=e)},t.prototype.getCurSpeed=function(){var e=this.MoveSpeed*this.speedRate*(this.curWeapon&&this.curWeapon.isRangeWeapon?1:1.2);return e>1e3&&(e=1e3),e},t.prototype.updateRBody=function(e){this.rig.type==cc.RigidBodyType.Dynamic&&this.canMove&&(e.equals(cc.Vec2.ZERO)?this.rig.linearVelocity=cc.Vec2.ZERO:this.rig.linearVelocity=e.mul(this.getCurSpeed()))},t.prototype.updatePerson=function(){var e=null;if(this.atkDir&&!this.atkDir.equals(cc.Vec2.ZERO))e=this.atkDir;else{if(!this.moveDir||this.moveDir.equals(cc.Vec2.ZERO))return;e=this.moveDir}e.x<0?this.body.scaleX=-Math.abs(this.body.scaleX):this.body.scaleX=Math.abs(this.body.scaleX),this.setWeaponAngle(e)},t.prototype.updateAtk=function(){if(this.atkList.length>0){for(var e=1e3,t=-1,a=0;a<this.atkList.length;a++){this.atkList[a].getComponent(n);var i=this.atkList[a].getPosition().sub(this.node.getPosition()).mag();i<e&&(e=i,t=a)}t>=0?(this.atkDir=cc.v2(this.atkList[t].getPosition().sub(this.node.getPosition()).normalize()),this.atkTarget=this.atkList[t]):this.atkDir=0==this.moveDir.mag()?this.atkDir:cc.v2(this.moveDir)}else this.atkDir=0==this.moveDir.mag()?this.atkDir:cc.v2(this.moveDir)},t.prototype.onCollisionEnter=function(){},t.prototype.onCollisionExit=function(){},t.prototype.hart=function(e,t,n,a,i){void 0===n&&(n=null),void 0===a&&(a=!0),void 0===i&&(i=!0)},t.prototype.avoidInjury=function(e){var t=this;this.isAvoidInjury++,this.scheduleOnce(function(){t.isAvoidInjury--},e)},t.prototype.death=function(){if(this.isDeath=!0,this.ghAniNode&&this.ghAniNode.isValid&&(this.ghAniNode.active=!1),this.playerMess&&this.playerMess.isValid&&(this.playerMess.active=!1),l.gameMgr.playEffect("death",this.node),this.unscheduleAllCallbacks(),this.updateAni("die"),this.meleeWeapon){var e=this.meleeWeapon.getComponent(cc.Animation);e&&e.stop()}this.curWeapon&&this.curWeapon.isValid&&(this.curWeapon.node.active=!1),this.rig&&(this.rig.active=!1),this.node.getComponent(cc.BoxCollider).enabled=!1,this.node.getComponent(cc.CircleCollider).enabled=!1,l.gameMgr.deathNum++,this.isPlayer&&(cc.director.getScheduler().setTimeScale(.3),setTimeout(function(){cc.director.getScheduler().setTimeScale(1)},900)),this.isPlayer&&(l.gameMgr.isWin||l.gameMgr.isFail||(this.revivePos=this.node.getPosition(),this.scheduleOnce(function(){r.cocosz.uiMgr.openPanel(s.PanelName.UIRevivePanel)},2)))},t.prototype.revive=function(){if(l.gameMgr&&!l.gameMgr.isWin&&!l.gameMgr.isFail){if(l.gameMgr.deathNum--,this.ghAniNode&&this.ghAniNode.isValid&&(this.ghAniNode.active=!0),this.playerMess&&this.playerMess.isValid&&(this.playerMess.active=!0),this.rangedWeapon&&this.rangedWeapon.getComponent(u.default).reset(),this.rangedWeaponAd&&this.rangedWeaponAd.getComponent(u.default).reset(),this.meleeWeapon){var e=this.meleeWeapon.getComponent(cc.Animation);e&&e.play()}this.curWeapon&&this.curWeapon.isValid&&(this.curWeapon.node.active=!0);var t=this.revivePos;this.node.setPosition(t),this.HP=this.totalHp,this.body.setPosition(cc.v2(0,0)),this.body.angle=0,this.node.scaleX<0&&(this.node.scaleX*=-1),this.rig&&(this.rig.active=!0),this.node.getComponent(cc.BoxCollider).enabled=!0,this.node.getComponent(cc.CircleCollider).enabled=!0,this.isDeath=!1,this.canMove=!0}},t.prototype.createItem=function(){},o([g(cc.Material)],t.prototype,"mat_common",void 0),o([g(cc.Material)],t.prototype,"mat_attacked",void 0),o([g(cc.Node)],t.prototype,"body",void 0),o([g(cc.ProgressBar)],t.prototype,"hpBar",void 0),o([g(cc.Node)],t.prototype,"hpSpr",void 0),o([g(cc.ProgressBar)],t.prototype,"shieldBar",void 0),o([g(cc.ProgressBar)],t.prototype,"atkBar",void 0),n=o([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","./gameDate":"gameDate","./gameMgr":"gameMgr","./weapon":"weapon",LanguageData:"LanguageData"}],player:[function(e,t,n){"use strict";cc._RF.push(t,"be2012PJ+xL2Y4UzVB0obJ4","player");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Manager/CocosZ"),s=e("../Manager/Constant"),c=e("./bullet"),l=e("./gameDate"),u=e("./gameMgr"),p=e("./person"),d=e("./upgradeMgr"),h=e("./weapon"),g=(e("LanguageData"),cc._decorator),f=g.ccclass,m=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastAtkTime=0,t.atkBulletNum=1,t}return i(t,e),t.prototype.onLoad=function(){this.isPlayer=!0,this.id=1,u.gameMgr.playerTs=this,this.hpSpr&&(this.hpSpr.color=cc.Color.GREEN),this.atkBar&&(this.atkBar.node.children[1].color=cc.Color.YELLOW),this.rig=this.node.getComponent(cc.RigidBody),this.rig&&(this.rig.linearDamping=.2),this.playerMess=this.node.getChildByName("playerMess"),this.hpNumNode=this.playerMess.getChildByName("hpNum"),this.ghAniNode=this.node.getChildByName("gh"),this.ycAniNode=this.node.getChildByName("yc"),u.gameMgr.followNode=this.node,this.rig&&this.rig.isValid&&(this.rig.enabledContactListener=!0)},t.prototype.start=function(){e.prototype.start.call(this),this.setProperty(),this.node.zIndex=s.ZindexLayer.zindex_player,this.ghAniNode&&this.ghAniNode.isValid&&(this.ghAniNode.setParent(this.node.parent),this.ghAniNode.zIndex=s.ZindexLayer.zinedx_gh,this.updateGhAni()),this.ycAniNode&&this.ycAniNode.isValid&&(this.ycAniNode.setParent(this.node.parent),this.ycAniNode.zIndex=s.ZindexLayer.zinedx_footYc,this.updateYcAni()),this.hpSpr&&(this.hpSpr.color=cc.Color.GREEN)},t.prototype.lateUpdate=function(){this.curTime++,r.cocosz.isPause||this.isDeath||u.gameMgr.isWin||u.gameMgr.isFail?this.rig.linearVelocity=cc.v2(0,0):(this.curTime%15==0&&(this.updateAni(),this.createFootPrint()),this.updateAtk(),this.updatePerson(),this.updateRBody(this.moveDir),this.updateMess(),this.updateGhAni(),this.updateYcAni(),this.atkTarget&&this.atkTarget.isValid&&this.atkEnemy())},t.prototype.recoverEffect=function(){cc.instantiate(u.gameMgr.itemEffect[0]).parent=this.node},t.prototype.atkEnemy=function(){var e=this;if(this.curWeapon&&this.curWeapon.isValid&&!this.isAtk){if(this.curWeapon&&this.curWeapon.isRangeWeapon){if(this.curWeapon._isReload||this.curWeapon.curBullet<=0)return;1==this.curWeapon.curBullet&&cc.game.emit(s.default.E_GAME_LOGIC,{type:s.default.E_Bullet_Last,node:this.node}),this.curWeapon.curBullet--;var t=(this.atkSpeed>.1?.1:this.atkSpeed)/3;cc.tween(this.rangedWeapon.children[0]).by(t,{x:-20,angle:20}).by(t,{x:20,angle:-20}).start();var n=this.startPosNode.getPosition();if(this.curWeapon.atkEffect){var a=cc.instantiate(this.curWeapon.atkEffect);9==this.curWeapon.weaponNum||15==this.curWeapon.weaponNum?(this.node.parent.addChild(a,s.ZindexLayer.zindex_effect_fire,"effect"),a.setPosition(this.startPosNode.parent.convertToWorldSpaceAR(n).sub(cc.v2(cc.winSize.width/2,cc.winSize.height/2))),this.body.scaleX>0?a.angle=this.rangedWeapon.angle:a.angle=180-this.rangedWeapon.angle):(this.curWeapon.node.addChild(a,1,"effect"),a.setPosition(n))}}else{u.gameMgr.shakeEffect(2,1,!1);var i=this.meleeWeapon.getComponent(cc.Animation);i&&i.isValid&&i.play("atk_dao"),this.scheduleOnce(function(){i&&i.isValid&&i.play("daiji_dao")},.18)}var o;if(o=this.atkDir&&!this.atkDir.equals(cc.Vec2.ZERO)?this.atkDir:this.moveDir&&!this.moveDir.equals(cc.Vec2.ZERO)?this.moveDir:this.body.scaleX>0?cc.Vec2.RIGHT:cc.Vec2.RIGHT.negSelf(),this.atkBulletNum>1)for(var r=0;r<this.atkBulletNum;r++){var c=15*((this.atkBulletNum-1)/2-r),p=o.rotate(cc.misc.degreesToRadians(c));this.createBullet(p)}else this.createBullet(o);this.isAtk=!0,this.curWeapon.isRangeWeapon&&this.curWeapon.curBullet<=0?cc.tween(this.node).delay(this.curWeapon.reload).call(function(){e.isAtk=!1}).start():cc.tween(this.node).delay(this.atkSpeed).call(function(){e.isAtk=!1}).start();var d=h.default.WeaponName[this.curWeapon.weaponNum-1];l.default.Weapon[d]&&l.default.Weapon[d].music?u.gameMgr.playEffect("shot_"+l.default.Weapon[d].music,this.node):u.gameMgr.playEffect("shot_"+h.default.WeaponName[this.curWeapon.weaponNum-1],this.node)}},t.prototype.createBullet=function(e){var t=cc.instantiate(this.curWeapon.bullet);if(this.curWeapon.isRangeWeapon){t.parent=this.node.parent;var n=t.parent.convertToNodeSpaceAR(this.startPosNode.convertToWorldSpaceAR(cc.Vec2.ZERO));if(t.setPosition(n),t.angle=-cc.v2(e).signAngle(cc.v2(1,0))/Math.PI*180,2==this.curWeapon.weaponNum&&(t.angle+=5-10*Math.random()),this.curWeapon.flySpeed>0){var a=t.getPosition(),i=a.add(e.mul(this.curWeapon.atkRangeNum));if(cc.tween(t).to(i.sub(a).mag()/this.curWeapon.flySpeed,{position:cc.v3(i)}).call(function(){var e=t.getComponent(c.default);if(e.boomEffect){var n=cc.instantiate(e.boomEffect);n.parent=e.node.parent,n.setPosition(e.node.getPosition());var a=n.getComponent(c.default);if(a.atk=e.atk,a.atker=e.atker,a.id=e.id,u.gameMgr.playEffect("explo",n),e.hitEffect){var i=t.getPosition(),o=cc.instantiate(e.hitEffect);o.parent=t.parent,o.setPosition(i),o.zIndex=s.ZindexLayer.zindex_effect_hit}}t.destroy()}).start(),this.curWeapon.shellCall){var o=cc.instantiate(this.curWeapon.shellCall);o.setParent(u.gameMgr.map),o.setPosition(this.node.position),o.scaleX=this.body.scale}}else cc.tween(t).delay(.4).call(function(){t.destroy()}).start();(r=t.getComponent(c.default)).id=this.id,r.atker=this.node,r.atk=(this.atkNum+this.personAtk)*this.atkRate,r.dir=e}else{var r;this.node.addChild(t,-1),t.color=this.curWeapon.bulletCollor,this.atkDir.x<0?t.scaleX*=-1/this.node.scaleX:t.scaleX/=this.node.scaleX,t.scaleY/=this.node.scaleY,cc.tween(t).delay(.2).call(function(){t.destroy()}).start(),(r=t.getComponent(c.default)).id=this.id,r.atker=this.node,r.atk=(this.atkNum+this.personAtk)*this.atkRate,r.dir=e}},t.prototype.hart=function(e,t,n,a){var i=this;if(void 0===n&&(n=null),void 0===a&&(a=!0),!(r.cocosz.isPause||this.isDeath||this.isAvoidInjury)){if(d.upgradeMgr){if(d.upgradeMgr.isHaveSkill(d.SkillType.\u62a4\u7532\u9774\u5b50)&&this.moveDir.mag()>0&&Math.random()<.4)return;if(d.upgradeMgr.isHaveSkill(d.SkillType.\u795e\u5723\u5b88\u62a4)&&d.upgradeMgr.hudun&&d.upgradeMgr.hudun.active)return void d.upgradeMgr.updateHudun()}if(n&&n.mag()>3&&n.normalizeSelf().mulSelf(3),e=(1-this.damageReduction)*e,this.Shiled>0){if(this.Shiled-=e,!(this.Shiled<0))return;e=-this.Shiled,this.Shiled=0}if(this.HP-=e,a&&(t?(o=t.getComponent(p.default))&&o.curWeapon&&o.curWeapon.isRangeWeapon?u.gameMgr.playEffect("hurt_range",this.node):u.gameMgr.playEffect("hurt_melee",this.node):u.gameMgr.playEffect("hurt",this.node)),cc.tween(u.gameMgr.red).to(.5,{opacity:255},{easing:"sineOut"}).to(.5,{opacity:0},{easing:"sineIn"}).start(),this.HP<=0){var o;if(r.cocosz.audioMgr.playEffect("GameOver"),this.death(),t&&((o=t.getComponent(p.default)).killNum++,o.curKillNum++,o.curKillNum>o.maxNum&&(o.maxNum=o.curKillNum),this.killer=o,this.curKillNum=0),n){var c=this.node.getPosition(),l=c.add(n.normalizeSelf().mulSelf(200)),h=cc.v2((c.x+l.x)/2,c.y+200);cc.tween(this.node).bezierTo(.3,c,h,l).start()}cc.game.emit(s.default.E_GAME_LOGIC,{type:s.default.E_Player_Death})}else if(this.avoidInjury(2),cc.game.emit(s.default.E_GAME_LOGIC,{type:s.default.E_Player_Hart}),!this.isAttackedEffect){if(this.isAttackedEffect=!0,this.rig.type==cc.RigidBodyType.Dynamic&&n){this.canMove=!1,this.scheduleOnce(function(){i.canMove=!0},.1);var g=n.mulSelf(400*n.mag()).addSelf(this.rig.linearVelocity);g.mag()>500&&g.normalizeSelf().mulSelf(500),this.rig.linearVelocity=g}var f=this.body.getComponentsInChildren(cc.Sprite);cc.tween(this.body).call(function(){f.forEach(function(e){e.isValid&&e.setMaterial(0,i.mat_attacked)})}).delay(.1).call(function(){f.forEach(function(e){e.isValid&&e.setMaterial(0,i.mat_common)})}).delay(.1).union().repeat(5).call(function(){i.isAttackedEffect=!1}).start()}}},t.prototype.createFootPrint=function(){if(0!=this.node.opacity){var e=this.node.getPosition();if(!(e.sub(this.lastPos).mag()<5)&&(this.lastPos=cc.v2(e),this.footNum++,this.isPlayer&&this.footNum%3==0&&u.gameMgr.playEffect("footsteps",this.node),"map2"==u.gameMgr.map.name)){var t=new cc.Node;t.addComponent(cc.Sprite).spriteFrame=u.gameMgr.jiaoyin,cc.tween(t).delay(.5).to(.5,{opacity:0}).call(function(){t.destroy()}).start(),t.parent=this.node.parent,t.zIndex=s.ZindexLayer.zinedx_footPrint,this.moveDir.mag()>0&&(t.angle=360-cc.v2(this.moveDir).signAngle(cc.v2(1,0))/Math.PI*180),e.y-=100*this.node.scale;var n=cc.v2(20,0).rotate(t.angle/180*Math.PI).rotate(this.footNum%2==0?Math.PI/2:-Math.PI/2);e.addSelf(n),t.setPosition(e)}}},t.prototype.onCollisionEnter=function(e,t){if(0==t.tag&&1==e.tag){var n=e.node.getComponent(p.default);n&&n.id!=this.id&&(this.atkList.push(e.node),!cc.isValid(this.atkTarget)&&e.node.isValid&&(this.atkTarget=e.node))}},t.prototype.onCollisionExit=function(e,t){if(0==t.tag){var n=this.atkList.indexOf(e.node);1==e.tag&&n>=0&&(this.atkList.splice(n,1),0==this.atkList.length?this.atkTarget=null:cc.isValid(this.atkTarget)&&e.node.uuid!=this.atkTarget.uuid||(this.atkTarget=this.atkList[0]))}},t.prototype.onPreSolve=function(e,t,n){"zombie"==n.node.group&&(e.disabled=!0)},o([f],t)}(p.default));n.default=m,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","./bullet":"bullet","./gameDate":"gameDate","./gameMgr":"gameMgr","./person":"person","./upgradeMgr":"upgradeMgr","./weapon":"weapon",LanguageData:"LanguageData"}],"polyglot.min":[function(e,t,n){"use strict";cc._RF.push(t,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min"),function(e,a){"function"==typeof define&&define.amd?define([],function(){return a(e)}):"object"==typeof n?t.exports=a(e):e.Polyglot=a(e)}(void 0,function(e){function t(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||c}function n(e){var t,n,a,i={};for(t in e)if(e.hasOwnProperty(t))for(a in n=e[t])i[n[a]]=t;return i}function a(e){return e.replace(/^\s+|\s+$/g,"")}function i(e,t,n){var i;return null!=n&&e?a((i=e.split(u))[r(t,n)]||i[0]):e}function o(e){var t=n(d);return t[e]||t.en}function r(e,t){return p[o(e)](t)}function s(e,t){for(var n in t)"_"!==n&&t.hasOwnProperty(n)&&(e=e.replace(new RegExp("%\\{"+n+"\\}","g"),t[n]));return e}function c(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}function l(e){var t={};for(var n in e)t[n]=e[n];return t}t.VERSION="0.4.3",t.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},t.prototype.extend=function(e,t){var n;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],t&&(a=t+"."+a),"object"==typeof n?this.extend(n,a):this.phrases[a]=n)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(e){this.clear(),this.extend(e)},t.prototype.t=function(e,t){var n,a;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?n=this.phrases[e]:"string"==typeof t._?n=t._:this.allowMissing?n=e:(this.warn('Missing translation for key: "'+e+'"'),a=e),"string"==typeof n&&(t=l(t),a=s(a=i(n,this.currentLocale,t.smart_count),t)),a},t.prototype.has=function(e){return e in this.phrases};var u="||||",p={chinese:function(){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},d={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t}),cc._RF.pop()},{}],redPoint:[function(e,t,n){"use strict";cc._RF.push(t,"7a7b3Y69OtMNbE1nJjYg0PX","redPoint");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,s=e("../Manager/CocosZ"),c=e("../Manager/Constant"),l=e("../game/gameDate"),u=cc._decorator,p=u.ccclass,d=u.property;(function(e){e[e.none=0]="none",e[e.sign=1]="sign",e[e.turntable=2]="turntable",e[e.online=3]="online"})(r||(r={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=r.none,t.refreshOnClick=!0,t.isRefresh=!1,t.isTweenAngle=!1,t.isTweenScale=!1,t.isListen=!1,t}return i(t,e),t.prototype.start=function(){var e=this;this.node.opacity=0,this.setRedPoint(),this.isRefresh&&cc.tween(this.node).delay(1).call(function(){e.setRedPoint()}).union().repeatForever().start(),this.isTweenAngle&&cc.tween(this.node).by(.25,{angle:15}).by(.5,{angle:-30}).by(.25,{angle:15}).delay(1).union().repeatForever().start(),this.isTweenScale&&cc.tween(this.node).by(.25,{scale:.1}).by(.5,{scale:-.2}).by(.25,{scale:.1}).delay(1).union().repeatForever().start(),this.isListen&&cc.game.on(c.default.E_GAME_LOGIC,this._onGameMessageHandler,this)},t.prototype.onDestroy=function(){cc.game.targetOff(this)},t.prototype._onGameMessageHandler=function(e){e.type},t.prototype.onClick=function(){this.type,this.refreshOnClick&&this.setRedPoint()},t.prototype.show=function(){this.node.opacity=255,this.node.parent&&this.node.parent.on(cc.Node.EventType.TOUCH_END,this.onClick,this)},t.prototype.hide=function(){this.node.opacity=0,this.node.parent&&this.node.parent.off(cc.Node.EventType.TOUCH_END,this.onClick,this)},t.prototype.setRedPoint=function(){switch(this.type){case r.sign:(new Date).toDateString()!=s.cocosz.dataMgr.LastDailyBonusTime?this.show():this.hide();break;case r.turntable:s.cocosz.useCJTimes<c.default.commonCJTimes?this.show():this.hide();break;case r.online:for(var e=s.cocosz.dataMgr.receiveToday,t=0;t<e.length;t++)if(!e[t]&&s.cocosz.dataMgr.OnlineToday>l.default.TimeReward[t].time)return void this.show();this.hide()}},o([d({type:cc.Enum(r),tooltip:"\u7ea2\u70b9\u7c7b\u578b"})],t.prototype,"type",void 0),o([d({tooltip:"\u70b9\u51fb\u7236\u8282\u70b9\u5237\u65b0\u7ea2\u70b9"})],t.prototype,"refreshOnClick",void 0),o([d({tooltip:"\u662f\u5426\u5237\u65b0"})],t.prototype,"isRefresh",void 0),o([d({tooltip:"\u662f\u5426\u7f13\u52a8\u89d2\u5ea6"})],t.prototype,"isTweenAngle",void 0),o([d({tooltip:"\u662f\u5426\u7f13\u52a8\u7f29\u653e"})],t.prototype,"isTweenScale",void 0),o([d({tooltip:"\u662f\u5426\u76d1\u542c"})],t.prototype,"isListen",void 0),o([p],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","../game/gameDate":"gameDate"}],setMap:[function(e,t,n){"use strict";cc._RF.push(t,"09313S8CXZCU4lptDwQuJIg","setMap");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Manager/CocosZ"),s=e("./gameMgr"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dmmArr=[],t.dikuai=null,t.time=-1,t.mainCameraPos=cc.Vec2.ZERO,t.distanceX=2500,t.distanceY=1500,t}return i(t,e),t.prototype.onLoad=function(){s.gameMgr.setMapTs=this,s.gameMgr.dmmArr=this.dmmArr,this.dikuai=this.node.getChildByName("dikuai"),this.dikuai&&(this.dikuai.zIndex=cc.macro.MIN_ZINDEX)},t.prototype.onDestroy=function(){s.gameMgr.setMapTs=null},t.prototype.start=function(){for(var e=0;e<this.node.children.length;e++)this.node.children[e]},t.prototype.lateUpdate=function(){r.cocosz.isPause||s.gameMgr.isWin||s.gameMgr.isFail||this.time++%30==0&&this.checkAllNode()},t.prototype.checkAllNode=function(){s.gameMgr&&s.gameMgr.mainCamereRootNode&&(this.mainCameraPos=s.gameMgr.mainCamereRootNode.getPosition(),this.distanceX=cc.winSize.width/2/s.gameMgr.mainCamera.zoomRatio+500,this.distanceY=cc.winSize.height/2/s.gameMgr.mainCamera.zoomRatio+500);for(var e=["guide","guidePath","player","colllider","dikuai","point","itemPoint","tree","tipLayer","jingyanLayer","posLayer"],t=0;t<this.node.childrenCount;t++){var n=this.node.children[t];0==e.includes(n.name)&&this.checkNode(n)}var a=this.node.getChildByName("dikuai");if(a)for(t=0;t<a.childrenCount;t++)n=a.children[t],this.checkNode(n)},t.prototype.checkNode=function(e,t){if(void 0===t&&(t=!1),t&&s.gameMgr&&s.gameMgr.mainCamereRootNode&&(this.mainCameraPos=s.gameMgr.mainCamereRootNode.getPosition(),this.distanceX=cc.winSize.width/2/s.gameMgr.mainCamera.zoomRatio+500,this.distanceY=cc.winSize.height/2/s.gameMgr.mainCamera.zoomRatio+500),e&&e.isValid&&e.activeInHierarchy&&!(e.parent.name!=this.node.name&&"dikuai"!=e.parent.name||0!=e.opacity&&255!=e.opacity))return e.x+e.width*Math.abs(e.scaleX)/2<this.mainCameraPos.x-this.distanceX||e.x-e.width*Math.abs(e.scaleX)/2>this.mainCameraPos.x+this.distanceX||e.y+e.height*Math.abs(e.scaleY)/2<this.mainCameraPos.y-this.distanceY||e.y-e.height*Math.abs(e.scaleY)/2>this.mainCameraPos.y+this.distanceY?(e.opacity=0,!1):(e.opacity=255,!0)},t.prototype.release=function(e){var t=this;if(this.dikuai&&this.dikuai.isValid&&this.dikuai.childrenCount){for(var n=0;n<2;n++)(a=this.dikuai.children[n])&&a.isValid&&a.destroy();setTimeout(function(){t.release(e)})}else if(this.node.childrenCount){for(n=0;n<10;n++){var a;(a=this.node.children[n])&&a.isValid&&a.destroy()}setTimeout(function(){t.release(e)})}else e&&e()},o([u([cc.SpriteFrame])],t.prototype,"dmmArr",void 0),o([l],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","./gameMgr":"gameMgr"}],showEffect:[function(e,t,n){"use strict";cc._RF.push(t,"1b984pSECdBZZxcU1QfL4H3","showEffect");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./gameMgr"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.texMess=new cc.Vec4(0,0,0,0),t.intervalTime=.05,t.effectType=0,t}return i(t,e),t.prototype.start=function(){var e=this;if(r.gameMgr&&r.gameMgr.setMapTs.checkNode(this.node,!0),this.node.name.includes("bullet_boom")&&r.gameMgr.mainCamereRootNode.getBoundingBoxToWorld().intersects(this.node.getBoundingBoxToWorld())&&r.gameMgr.shakeEffect(3,1,!0),0==this.effectType)if(this.getComponent(cc.Sprite)&&"fire"==this.getComponent(cc.Sprite).getMaterial(0).name){var t=this.getComponent(cc.Sprite).getMaterial(0);t.setProperty("totalTex",this.texMess);var n=1;this.schedule(function(){r.gameMgr.mainCamera.containsNode(e.node)?e.node.opacity=255:e.node.opacity=0,t.setProperty("curTex",n),++n>e.texMess.x&&cc.tween(e.node).to(.2,{opacity:0}).call(function(){e.node.destroy()}).start()},this.intervalTime,this.texMess.x)}else this.node.destroy();else if(1==this.effectType)this.scheduleOnce(function(){e.node.destroy()},2);else if(3==this.effectType)cc.tween(this.node).set({scale:3}).to(.5,{scale:1}).to(.5,{opacity:0}).call(function(){e.node.destroy()}).start();else if(4==this.effectType)cc.tween(this.node).to(1.5,{angle:720,scale:.5}).to(.3,{opacity:0}).call(function(){e.node.destroy()}).start();else if(5==this.effectType)this.node.children[0].getComponent(sp.Skeleton).setCompleteListener(function(){cc.isValid(e.node.isValid)&&e.node.destroy()}),this.scheduleOnce(function(){cc.isValid(e.node.isValid)&&e.node.destroy()},2);else if(6==this.effectType)cc.tween(this.node).delay(.5).to(.2,{opacity:0}).call(function(){e.node.destroy()}).start();else if(7==this.effectType){var a=this.node.children[0];cc.tween(a).bezierTo(.6,cc.Vec2.ZERO,cc.v2(-50,50),cc.v2(-50-50*Math.random(),-150)).to(1,{opacity:0},{easing:"fade"}).call(function(){e.node.destroy()}).start()}else 8==this.effectType&&cc.tween(this.node).to(.5,{opacity:0}).call(function(){e.node.destroy()}).start()},o([l()],t.prototype,"texMess",void 0),o([l()],t.prototype,"intervalTime",void 0),o([l()],t.prototype,"effectType",void 0),o([c],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./gameMgr":"gameMgr"}],types:[function(e,t,n){"use strict";cc._RF.push(t,"25d06v6Q5xC7YodLjqkHBPy","types"),Object.defineProperty(n,"__esModule",{value:!0}),n.VibrateType=void 0,function(e){e.Short="short",e.Long="long"}(n.VibrateType||(n.VibrateType={})),cc._RF.pop()},{}],upgradeMgr:[function(e,t,n){"use strict";cc._RF.push(t,"f4901QXz85C5Y7PEKsAdvsM","upgradeMgr");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.upgradeMgr=n.SkillType=void 0;var r,s=e("../Manager/CocosZ"),c=e("../Manager/Constant"),l=e("./bullet"),u=e("./gameMgr"),p=e("./jingyan"),d=e("./zombieBase"),h=cc._decorator,g=h.ccclass,f=h.property;(function(e){e[e["\u6574\u88c5\u5f85\u53d1"]=0]="\u6574\u88c5\u5f85\u53d1",e[e["\u7784\u51c6"]=1]="\u7784\u51c6",e[e["\u5f3a\u5316"]=2]="\u5f3a\u5316",e[e["\u77ac\u65a9"]=3]="\u77ac\u65a9",e[e["\u5f3a\u529b\u5c04\u51fb"]=4]="\u5f3a\u529b\u5c04\u51fb",e[e["\u7a83\u9b42\u5f39\u5939"]=5]="\u7a83\u9b42\u5f39\u5939",e[e["\u79d1\u6280\u5b50\u5f39"]=6]="\u79d1\u6280\u5b50\u5f39",e[e["\u7ad9\u59ff\u5c04\u51fb"]=7]="\u7ad9\u59ff\u5c04\u51fb",e[e["\u5b50\u5f39\u788e\u7247"]=8]="\u5b50\u5f39\u788e\u7247",e[e["\u53cc\u53d1"]=9]="\u53cc\u53d1",e[e["\u8c22\u5e55"]=10]="\u8c22\u5e55",e[e["\u67aa\u6797\u5f39\u96e8"]=11]="\u67aa\u6797\u5f39\u96e8",e[e["\u75be\u8d70"]=12]="\u75be\u8d70",e[e["\u8dd1\u52a8\u5c04\u51fb"]=13]="\u8dd1\u52a8\u5c04\u51fb",e[e["\u610f\u6c14\u98ce\u53d1"]=14]="\u610f\u6c14\u98ce\u53d1",e[e["\u62a4\u7532\u9774\u5b50"]=15]="\u62a4\u7532\u9774\u5b50",e[e["\u78c1\u573a"]=16]="\u78c1\u573a",e[e["\u7075\u80fd\u8865\u7ed9"]=17]="\u7075\u80fd\u8865\u7ed9",e[e["\u5bb9\u5149\u7115\u53d1"]=18]="\u5bb9\u5149\u7115\u53d1",e[e["\u9e70\u773c"]=19]="\u9e70\u773c",e[e["\u751f\u547d\u529b"]=20]="\u751f\u547d\u529b",e[e["\u518d\u751f"]=21]="\u518d\u751f",e[e["\u8fdb\u5316"]=22]="\u8fdb\u5316",e[e["\u8403\u53d6"]=23]="\u8403\u53d6",e[e["\u706b\u7130\u7cbe\u901a"]=24]="\u706b\u7130\u7cbe\u901a",e[e["\u96f7\u7535\u7cbe\u901a"]=25]="\u96f7\u7535\u7cbe\u901a",e[e["\u51b0\u971c\u7cbe\u901a"]=26]="\u51b0\u971c\u7cbe\u901a",e[e["\u53cc\u91cd\u9644\u9b54"]=27]="\u53cc\u91cd\u9644\u9b54",e[e["\u9f99\u5375"]=28]="\u9f99\u5375",e[e["\u901a\u7075\u5315\u9996"]=29]="\u901a\u7075\u5315\u9996",e[e["\u901a\u7075\u9570\u5200"]=30]="\u901a\u7075\u9570\u5200",e[e["\u795e\u5723\u5b88\u62a4"]=31]="\u795e\u5723\u5b88\u62a4",e[e["\u98de\u8f6e"]=32]="\u98de\u8f6e",e[e["\u95ea\u7535"]=33]="\u95ea\u7535",e[e["\u71c3\u70e7\u74f6"]=34]="\u71c3\u70e7\u74f6"})(r=n.SkillType||(n.SkillType={})),n.upgradeMgr=null;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.zombieKillNum=0,t.bossKillId=[],t.jingyanLayer=null,t.jingyanPre=null,t.jingyanRange=200,t._jingyanArr=[5,10,20,30,40,50,60,80,100,120,140,160,180,200,220,240,260,280,300,340,380,420,460,500,550,600,750,920,1060,1400,2e3],t.upgradeSkillArr=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t.upgradeSkillMaxLevelArr=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3],t.skill_14=1,t.skill_18=0,t.skill_magic=0,t._maxLevel=30,t._curLevel=0,t._curMaxJingyan=t._jingyanArr[t.curLevel],t._curJingyan=0,t.canUpgrade=!0,t.skillImgArr=[],t._canAccelerate=!0,t._bishou=null,t.hudun=null,t._zaishengCdTime=0,t._feilun=null,t._posArr=[[[500,0]],[[500,0],[-500,0]],[[500,0],[-300,400],[-300,-400]],[[500,0],[-500,0],[0,500],[0,-500]]],t._shandianCount=0,t._shandianNum=[1,1,3,5],t._shandiCdTime=0,t._fireCount=0,t._fireNum=[1,1,2,3],t._fireCdTime=0,t}return i(t,e),Object.defineProperty(t.prototype,"curLevel",{get:function(){return this._curLevel},set:function(e){e<0?e=0:e>this._maxLevel&&(e=this._maxLevel),e>=this._curLevel&&(this._curLevel=e,u.gameMgr.model6_levelLabel.string=""+this._curLevel,this.upgradeEffect(),s.cocosz.pauseCount++,s.cocosz.uiMgr.openPanel(c.PanelName.UIUpgradePanel),this._curJingyan-=this._curMaxJingyan,this._curMaxJingyan=this._jingyanArr[this.curLevel])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curJingyan",{get:function(){return this._curJingyan},set:function(e){e<0&&(e=0),this._curJingyan=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){n.upgradeMgr=this,cc.game.on(c.default.E_GAME_LOGIC,this._onGameMessageHandler,this),this.jingyanPre=s.cocosz.resMgr.getRes("jingyan",cc.Prefab),this.jingyanLayer=new cc.Node,this.jingyanLayer.name="jingyanLayer",this.jingyanLayer.zIndex=c.ZindexLayer.zinedx_jingyan,this.jingyanLayer.setPosition(cc.Vec2.ZERO),this.jingyanLayer.setParent(this.node)},t.prototype.start=function(){},t.prototype.onDestroy=function(){n.upgradeMgr=null,cc.game.targetOff(this)},t.prototype.update=function(){if(u.gameMgr&&u.gameMgr.model6_jingyanBar){var e=u.gameMgr.model6_jingyanBar.progress,t=this.curJingyan/this._curMaxJingyan;0==t&&(t=.001),u.gameMgr.model6_jingyanBar.progress=cc.misc.lerp(e,t,.2)}this.canUpgrade&&!s.cocosz.isPause&&this.curLevel<this._maxLevel&&this._curJingyan>=this._curMaxJingyan&&(this.curLevel+=1)},t.prototype.isHaveSkill=function(e){return this.upgradeSkillArr[e]>0},t.prototype.setSkillImg=function(e){var t="zombieSkill_icon_"+e+(this.upgradeSkillMaxLevelArr[e]>1?"_"+this.upgradeSkillArr[e]:""),n=s.cocosz.resMgr.getRes(t,cc.SpriteFrame);if(n&&u.gameMgr.model6_skillScrollView_content&&u.gameMgr.model6_skillScrollView_content.isValid&&(!this.skillImgArr[e]&&u.gameMgr.model6_skillScrollView_item&&(this.skillImgArr[e]=cc.instantiate(u.gameMgr.model6_skillScrollView_item),this.skillImgArr[e].active=!0,this.skillImgArr[e].setParent(u.gameMgr.model6_skillScrollView_content),u.gameMgr.model6_skillScrollView_content.width>u.gameMgr.model6_skillScrollView.node.width&&u.gameMgr.model6_skillScrollView.scrollToRight()),this.skillImgArr[e])){var a=this.skillImgArr[e].getComponent(cc.Sprite);a&&(a.spriteFrame=n)}},t.prototype.setSkillCD=function(e,t){if(this.skillImgArr[e]){var n=this.skillImgArr[e].getChildByName("skillCD");if(n){n.active=!0,n.opacity=255,cc.tween(n.children[0].getComponent(cc.Sprite)).set({fillRange:1}).to(t,{fillRange:0}).call(function(){n.opacity=0}).start();var a=t,i=n.children[1].getComponent(cc.Label);cc.tween(n).call(function(){i.string=a.toString(),a--}).delay(1).union().repeat(t).start()}}},t.prototype.getSkill=function(e){var t=this;switch(this.upgradeSkillArr[e]++,this.setSkillImg(e),e){case r.\u6574\u88c5\u5f85\u53d1:u.gameMgr.playerTs&&u.gameMgr.playerTs.curWeapon&&(u.gameMgr.playerTs.curWeapon.bulletNum+=4);break;case r.\u7784\u51c6:u.gameMgr.playerTs&&(u.gameMgr.playerTs.atkRate*=1.25);break;case r.\u5f3a\u5316:u.gameMgr.playerTs&&u.gameMgr.playerTs.curWeapon&&(u.gameMgr.playerTs.curWeapon.bulletNum+=2,u.gameMgr.playerTs.atkRate*=1.1);break;case r.\u77ac\u65a9:break;case r.\u5f3a\u529b\u5c04\u51fb:u.gameMgr.playerTs&&(u.gameMgr.playerTs.atkRate*=1.2);break;case r.\u7a83\u9b42\u5f39\u5939:break;case r.\u79d1\u6280\u5b50\u5f39:u.gameMgr.playerTs&&(u.gameMgr.playerTs.atkSpeedRate-=.1);break;case r.\u7ad9\u59ff\u5c04\u51fb:var n=!0;this.schedule(function(){n&&0==u.gameMgr.playerTs.moveDir.mag()?(n=!1,u.gameMgr.playerTs.atkRate*=1.3):!n&&u.gameMgr.playerTs.moveDir.mag()>0&&(n=!0,u.gameMgr.playerTs.atkRate/=1.3)},.1);break;case r.\u5b50\u5f39\u788e\u7247:break;case r.\u53cc\u53d1:u.gameMgr.playerTs&&(u.gameMgr.playerTs.atkBulletNum+=1);break;case r.\u8c22\u5e55:break;case r.\u67aa\u6797\u5f39\u96e8:u.gameMgr.playerTs&&(u.gameMgr.playerTs.atkBulletNum*=2);break;case r.\u75be\u8d70:u.gameMgr.playerTs&&(u.gameMgr.playerTs.speedRate*=1.1);break;case r.\u8dd1\u52a8\u5c04\u51fb:var a=!0;this.schedule(function(){a&&u.gameMgr.playerTs.isAtk?(a=!1,u.gameMgr.playerTs.speedRate*=1.2):a||u.gameMgr.playerTs.isAtk||(a=!0,u.gameMgr.playerTs.speedRate/=1.2)},.1);break;case r.\u610f\u6c14\u98ce\u53d1:this.schedule(function(){if(u.gameMgr.playerTs){var e=t.skill_14+.1;e>1.4?e=1.4:e<1&&(e=1),u.gameMgr.playerTs.atkRate*=e/t.skill_14,u.gameMgr.playerTs.speedRate*=e/t.skill_14,t.skill_14=e}},10);break;case r.\u62a4\u7532\u9774\u5b50:break;case r.\u78c1\u573a:this.jingyanRange+=200;break;case r.\u7075\u80fd\u8865\u7ed9:case r.\u5bb9\u5149\u7115\u53d1:this.jingyanRange+=50;break;case r.\u9e70\u773c:this.jingyanRange+=50,cc.tween(u.gameMgr.mainCamera).to(1,{zoomRatio:.6}).start();break;case r.\u751f\u547d\u529b:u.gameMgr.playerTs&&(u.gameMgr.playerTs.totalHp+=1,u.gameMgr.playerTs.HP=u.gameMgr.playerTs.totalHp,this.scheduleOnce(function(){u.gameMgr.playerTs.recoverEffect()},1));break;case r.\u518d\u751f:this.schedule(function(){t._updateZaisheng()},1);break;case r.\u8fdb\u5316:u.gameMgr.playerTs&&(u.gameMgr.playerTs.atkRate*=1.1,u.gameMgr.playerTs.totalHp+=1,u.gameMgr.playerTs.HP+=1,this.scheduleOnce(function(){u.gameMgr.playerTs.recoverEffect()},1));break;case r.\u8403\u53d6:case r.\u706b\u7130\u7cbe\u901a:case r.\u51b0\u971c\u7cbe\u901a:case r.\u53cc\u91cd\u9644\u9b54:break;case r.\u901a\u7075\u5315\u9996:(i=s.cocosz.resMgr.getRes("zombieSkill_bishou",cc.Prefab))&&u.gameMgr&&u.gameMgr.playerTs&&(this._bishou=cc.instantiate(i),this._bishou.setParent(this.node),this._bishou.zIndex=cc.macro.MAX_ZINDEX,this._bishou.active=!1,this.updateBishou());break;case r.\u795e\u5723\u5b88\u62a4:if((i=s.cocosz.resMgr.getRes("zombieSkill_hudun",cc.Prefab))&&u.gameMgr&&u.gameMgr.playerTs){this.hudun=cc.instantiate(i),this.hudun.setParent(u.gameMgr.playerTs.node),this.hudun.setPosition(0,0),this.hudun.zIndex=cc.macro.MAX_ZINDEX-1;break}case r.\u98de\u8f6e:var i;(i=s.cocosz.resMgr.getRes("zombieSkill_feilun",cc.Prefab))&&u.gameMgr&&u.gameMgr.playerTs&&(this._feilun&&this._feilun.isValid&&this._feilun.destroy(),this._feilun=cc.instantiate(i),this._feilun.setParent(u.gameMgr.playerTs.node),this._feilun.setPosition(cc.Vec2.ZERO),this._feilun.active=!0,this._feilun.zIndex=cc.macro.MAX_ZINDEX,this.updateFeilun(this.upgradeSkillArr[r.\u98de\u8f6e]));break;case r.\u95ea\u7535:1==this.upgradeSkillArr[r.\u95ea\u7535]&&this.schedule(this.updateShandian,1);break;case r.\u71c3\u70e7\u74f6:1==this.upgradeSkillArr[r.\u71c3\u70e7\u74f6]&&this.schedule(this.updateFire,1)}},t.prototype._onGameMessageHandler=function(e){var t=this;switch(e.type){case c.default.E_Jingyan_Finish:this.isHaveSkill(r.\u7075\u80fd\u8865\u7ed9)?u.gameMgr&&u.gameMgr.playerTs&&Math.random()<.01&&(u.gameMgr.playerTs.curWeapon.curBullet+=1):this.isHaveSkill(r.\u5bb9\u5149\u7115\u53d1)&&this.skill_18<3&&(0==this.skill_18&&this.accelerate(),this.skill_18++);break;case c.default.E_Zombie_Hart:if(e.node&&e.node.isValid)if(this.isHaveSkill(r.\u77ac\u65a9)&&this.canAddMagic(e.node,r.\u77ac\u65a9))this.skill_effect_3(e.node);else{var n=[];if(this.isHaveSkill(r.\u706b\u7130\u7cbe\u901a)&&this.canAddMagic(e.node,r.\u706b\u7130\u7cbe\u901a)&&n.push(r.\u706b\u7130\u7cbe\u901a),this.isHaveSkill(r.\u51b0\u971c\u7cbe\u901a)&&this.canAddMagic(e.node,r.\u51b0\u971c\u7cbe\u901a)&&n.push(r.\u51b0\u971c\u7cbe\u901a),n.length)switch(n[Math.floor(Math.random()*n.length)]){case r.\u706b\u7130\u7cbe\u901a:this.skill_effect_24(e.node);break;case r.\u51b0\u971c\u7cbe\u901a:this.skill_effect_26(e.node)}}break;case c.default.E_Zombie_Death:if(e.node){if(this.isHaveSkill(r.\u5b50\u5f39\u788e\u7247)&&e.from){var a=30*Math.random();this.createBullet(e.node,30+a,40),this.createBullet(e.node,150+a,40),this.createBullet(e.node,270+a,40)}else this.isHaveSkill(r.\u8403\u53d6)&&u.gameMgr&&u.gameMgr.playerTs&&u.gameMgr.playerTs.HP<u.gameMgr.playerTs.totalHp&&Math.random()<.05&&(u.gameMgr.playerTs.HP+=1,u.gameMgr.playerTs.recoverEffect());var i=e.node.getComponent(d.default);i&&(this.zombieKillNum++,s.cocosz.zombieKillNum=this.zombieKillNum,i.isBoss&&this.bossKillId.push(i.zombieId))}break;case c.default.E_Bullet_Last:this.isHaveSkill(r.\u8c22\u5e55)&&u.gameMgr.playerTs&&(this.createBullet(e.node,36,40),this.createBullet(e.node,108,40),this.createBullet(e.node,180,40),this.createBullet(e.node,252,40),this.createBullet(e.node,324,40),this.scheduleOnce(function(){t.createBullet(e.node,72,40),t.createBullet(e.node,144,40),t.createBullet(e.node,216,40),t.createBullet(e.node,288,40),t.createBullet(e.node,360,40)},0));break;case c.default.E_Bullet_Reload:this.isHaveSkill(r.\u7a83\u9b42\u5f39\u5939)&&u.gameMgr.playerTs&&(u.gameMgr.playerTs.atkRate*=1.3,this.scheduleOnce(function(){u.gameMgr.playerTs.atkRate/=1.3},1));break;case c.default.E_Player_Hart:this.isHaveSkill(r.\u610f\u6c14\u98ce\u53d1)&&(this.skill_14=1);break;case c.default.E_Player_Death:this.hudun&&(this.hudun.opacity=0)}},t.prototype.createJingyan=function(e){if(this.jingyanPre&&this.jingyanLayer){var t=u.gameMgr.nodeGet("jingyan",this.jingyanPre),n=t.getComponent(p.default);n&&n.init(),t.setPosition(e),t.setParent(this.jingyanLayer)}},t.prototype.upgradeEffect=function(){if(u.gameMgr.playerTs&&u.gameMgr.playerTs.isValid){var e=s.cocosz.resMgr.getRes("zombieSkill_sjgx",cc.Prefab);if(e){var t=cc.instantiate(e);t.setPosition(cc.Vec2.ZERO),t.setParent(u.gameMgr.playerTs.node),u.gameMgr.playEffect("LevelUp")}}},t.prototype.createBullet=function(e,t,n){if(this.bulletPrefab){var a=cc.v2(1,0).rotateSelf(cc.misc.degreesToRadians(t)),i=cc.instantiate(this.bulletPrefab);i.parent=this.node,i.setPosition(e.getPosition()),i.angle=t;var o=i.getPosition(),r=o.add(a.mul(1e3));cc.tween(i).to(r.sub(o).mag()/2500,{position:cc.v3(r)}).call(function(){var e=i.getComponent(l.default);if(e.boomEffect){var t=cc.instantiate(e.boomEffect);t.parent=e.node.parent,t.setPosition(e.node.getPosition()),t.zIndex=c.ZindexLayer.zindex_bomb;var n=t.getComponent(l.default);if(n.atk=e.atk,n.atker=e.atker,n.id=e.id,u.gameMgr.playEffect("explo",t),e.hitEffect){var a=i.getPosition(),o=cc.instantiate(e.hitEffect);o.parent=i.parent,o.setPosition(a),o.zIndex=c.ZindexLayer.zindex_effect_hit}}i.destroy()}).start();var s=i.getComponent(l.default);s.id=1,s.atker=null,s.atk=n,s.dir=a}},t.prototype.accelerate=function(){var e=this;if(0==this.skill_18){if(!this._canAccelerate)return this._canAccelerate=!0,void(u.gameMgr.playerTs&&(u.gameMgr.playerTs.speedRate/=1.5));this._canAccelerate=!1,u.gameMgr.playerTs&&(u.gameMgr.playerTs.speedRate*=1.5)}this.scheduleOnce(function(){e.skill_18--,e.accelerate()},1)},t.prototype.magic_hart_rate=function(){return this.isHaveSkill(r.\u53cc\u91cd\u9644\u9b54)&&this.skill_magic>1?1.5:1},t.prototype.canAddMagic=function(e,t){if(!e||!e.isValid)return!1;var n=e.getComponent(d.default);if(!n)return!1;if(n.HP<=0)return!1;for(var a=0;a<e.childrenCount;a++)if(e.children[a].name=="zombieSkill_"+r.\u77ac\u65a9)return!1;if(!(t>=0))return!1;if(t==r.\u77ac\u65a9){if(n.isBoss||n.totalHp>0&&n.HP/n.totalHp>.4)return!1}else{for(a=0;a<e.childrenCount;a++)if(e.children[a].name.includes("zombieSkill"))return!1;if(n.isBoss){if(t==r.\u706b\u7130\u7cbe\u901a)return Math.random()<.2;if(t==r.\u51b0\u971c\u7cbe\u901a)return Math.random()<.2}}return!0},t.prototype.skill_effect_3=function(e){if(e&&e.isValid){var t=e.getComponent(d.default);if(t){var n=s.cocosz.resMgr.getRes("zombieSkill_3",cc.Prefab);if(n){var a=cc.instantiate(n);a.setPosition(0,0),a.setParent(e),t.moveDir=cc.Vec2.ZERO,t.canMoveDir=!1,t.updateMove(),cc.tween(t).delay(.5).call(function(){t&&t.isValid&&t.hart(t.HP,null,null,!1,!1,cc.Color.RED)}).delay(.5).call(function(){a&&a.isValid&&a.destroy()}).start()}}}},t.prototype.skill_effect_24=function(e){var t=this;if(e&&e.isValid){var n=e.getComponent(d.default);if(n){var a=s.cocosz.resMgr.getRes("zombieSkill_24",cc.Prefab);if(a){var i=cc.instantiate(a);i.setPosition(0,0),i.setParent(e),i.zIndex=cc.macro.MAX_ZINDEX,n.fire_start(),cc.tween(i).delay(.2).call(function(){n.isValid&&n.HP>0?n.hart(5*t.magic_hart_rate(),null,null,!1,!1,cc.Color.RED):i.destroy()}).union().repeat(20).call(function(){n.fire_end(),i.destroy()}).start(),u.gameMgr.playEffect("ranshao",e,1)}}}},t.prototype.skill_effect_26=function(e){if(e&&e.isValid){var t=e.getComponent(d.default);if(t){var n=s.cocosz.resMgr.getRes("zombieSkill_26",cc.Prefab);if(n){var a=cc.instantiate(n);if(a.setPosition(0,0),a.setParent(e),a.zIndex=cc.macro.MAX_ZINDEX,t.zombieId>=8?a.scale=4:a.scale=2,t.isValid){t.frozenStart();var i=t.isBoss?.5:2;this.scheduleOnce(function(){t&&t.isValid&&t.frozenEnd(),a&&a.isValid&&a.destroy()},i)}u.gameMgr.playEffect("bingdong",e,1)}}}},t.prototype.updateBishou=function(){var e=this;if(this._bishou&&this._bishou.isValid&&u.gameMgr&&u.gameMgr.playerTs)if(u.gameMgr.playerTs.atkTarget&&u.gameMgr.playerTs.atkTarget.isValid){var t=this._bishou.getComponent(l.default);t.isHartMusic=!1,t.hitAudio="hurt",t.atk=50*u.gameMgr.playerTs.atkRate,t.atkedArr=[];var n=u.gameMgr.playerTs.node.getPosition(),a=u.gameMgr.playerTs.atkTarget.getPosition().subSelf(n);a.mag()<400&&a.normalizeSelf().mulSelf(400);var i=n.add(cc.v2(1,0).mulSelf(400).rotateSelf(this._bishou.angle/180*Math.PI)),o=n.add(a),r=a.mag()/800;0==this._bishou.active&&(this._bishou.active=!0,this._bishou.setPosition(n)),cc.tween(this._bishou).bezierTo(r,n,i,o).call(function(){e.updateBishou()}).start()}else this._bishou.active=!1,this.scheduleOnce(function(){e.updateBishou()},1)},t.prototype.updateHudun=function(){var e=this;this.hudun&&this.hudun.active&&(this.hudun.active=!1,u.gameMgr.playEffect("ShieldDestroy"),this.setSkillCD(r.\u795e\u5723\u5b88\u62a4,60),this.scheduleOnce(function(){u.gameMgr&&u.gameMgr.playerTs&&u.gameMgr.playerTs.isValid&&(e.hudun.active=!0,u.gameMgr.playerTs.HP?e.hudun.opacity=255:e.hudun.opacity=0)},60))},t.prototype._updateZaisheng=function(){this._zaishengCdTime>0?this._zaishengCdTime--:s.cocosz.isPause||u.gameMgr.playerTs&&!u.gameMgr.playerTs.isDeath&&u.gameMgr.playerTs.HP<u.gameMgr.playerTs.totalHp&&(u.gameMgr.playerTs.HP+=1,u.gameMgr.playerTs.recoverEffect(),this._zaishengCdTime=90,this.setSkillCD(r.\u518d\u751f,this._zaishengCdTime))},t.prototype.updateFeilun=function(e){if(this._feilun&&this._feilun.isValid&&u.gameMgr&&u.gameMgr.playerTs){cc.tween(this._feilun).by(10,{angle:-1800}).repeatForever().start();for(var t=[1,2,3,4][e],n=function(n){var i=a._feilun.children[n];if(i)if(n<t){if(i.active=!0,3==e){var o=a._feilun.getChildByName("back").getComponent(cc.Sprite).spriteFrame;i.getComponent(cc.Sprite).spriteFrame=o}i.setPosition(a._posArr[e][n][0],a._posArr[e][n][1]),cc.tween(i).call(function(){u.gameMgr.playEffect("chilunStart"),i.getComponent(cc.Collider).enabled=!0}).to(1,{scale:2.5}).delay(8).to(1,{scale:0}).call(function(){i.getComponent(cc.Collider).enabled=!1}).delay(2).union().repeatForever().start();var r=i.getComponent(l.default);r&&(r.isHartMusic=!1,r.hitAudio="chilun",r.atk=80+20*e*u.gameMgr.playerTs.atkRate)}else i.active=!1},a=this,i=0;i<4;i++)n(i)}},t.prototype.updateShandian=function(){if(this._shandiCdTime>0)this._shandiCdTime--;else if(!s.cocosz.isPause){var e=this.upgradeSkillArr[r.\u95ea\u7535];0==this._shandianCount&&(this._shandianCount=this._shandianNum[e]);for(var t=[],n=function(e){var n=!0,a=u.gameMgr.playerTs.atkList[e];a.children.forEach(function(e){"zombieSkill_shandian"==e.name&&(n=!1)}),n&&t.push(a)},a=u.gameMgr.playerTs.atkList.length-1;a>=0;a--)n(a);if(t.length){var i=s.cocosz.resMgr.getRes("zombieSkill_shandian",cc.Prefab);if(i){var o=t.shift();if(o&&o.isValid){this._shandianCount--;var c=cc.instantiate(i);if(c.setPosition(0,-o.height/2*o.scaleY),c.setParent(o),c.zIndex=cc.macro.MAX_ZINDEX,3==e){var l=c.getComponent(sp.Skeleton);l&&l.setSkin("y")}this.schedule(function(){c&&c.isValid&&c.destroy()},1);var p=o.getComponent(d.default);p&&p.isValid&&p.HP>0&&p.hart(200*this.magic_hart_rate(),null,null,!1,!1,cc.Color.RED),u.gameMgr.playEffect("LuoLei",o)}}else s.cocosz.resMgr.getRes("prefab_zombie_skill/zombieSkill_shandian",cc.Prefab)}0==this._shandianCount&&(this._shandiCdTime=3+e,this.setSkillCD(r.\u95ea\u7535,this._shandiCdTime))}},t.prototype.updateFire=function(){if(this._fireCdTime>0)this._fireCdTime--;else if(!s.cocosz.isPause){var e=this.upgradeSkillArr[r.\u71c3\u70e7\u74f6];if(this._fireCount=this._fireNum[e],!s.cocosz.isPause&&u.gameMgr&&u.gameMgr.playerTs&&u.gameMgr.playerTs.atkTarget&&u.gameMgr.playerTs.atkTarget.isValid){var t=s.cocosz.resMgr.getRes("zombieSkill_fire",cc.Prefab);if(t){var n=u.gameMgr.playerTs.atkTarget.getPosition().subSelf(u.gameMgr.playerTs.node.getPosition());n.normalizeSelf().mulSelf(400);for(var a=function(a){var o=((i._fireCount-1)/2-a)*(Math.PI/2),r=u.gameMgr.playerTs.node.getPosition(),s=r.add(cc.v2(n).rotateSelf(o)),p=cc.v2((r.x+s.x)/2,r.y+900),d=cc.instantiate(t);d.children[1].active=3!=e,d.children[2].active=3==e,d.setPosition(r),d.setParent(u.gameMgr.map),d.zIndex=cc.macro.MAX_ZINDEX,cc.tween(d).parallel(cc.tween().bezierTo(1,r,p,s),cc.tween().to(1,{angle:720*(n.x>0?1:-1)})).call(function(){d.zIndex=c.ZindexLayer.zinedx_floorSkill,d.children[1].active=d.children[2].active=!1,d.children[0].active=!0,d.getComponent(cc.Collider).enabled=!0;var t=d.getComponent(l.default);t.isHartMusic=!1,t.atk=11,t.hartInterval=.2;var n=d.children[0].getComponent(sp.Skeleton);n.setSkin(3==e?"l":"h"),n.setAnimation(0,"k",!1),n.setAnimation(0,"ranshao",!0),u.gameMgr.playEffect("Ranshaopingposui",d),u.gameMgr.playEffect("ranshao",d)}).delay(3).to(.3,{opacity:50}).call(function(){d.destroy()}).start()},i=this,o=0;o<this._fireCount;o++)a(o)}this._fireCdTime=4,this.setSkillCD(r.\u71c3\u70e7\u74f6,4)}}},o([f(cc.Prefab)],t.prototype,"bulletPrefab",void 0),o([g],t)}(cc.Component);n.default=m,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","./bullet":"bullet","./gameMgr":"gameMgr","./jingyan":"jingyan","./zombieBase":"zombieBase"}],weapon:[function(e,t,n){"use strict";cc._RF.push(t,"76f86dlCpdKv7l4KtsVUJq2","weapon");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0}),n.WeaponType=void 0;var r,s=e("../Manager/CocosZ"),c=e("../Manager/Constant"),l=e("../Manager/Msg"),u=e("./gameDate"),p=e("./gameMgr"),d=e("LanguageData"),h=cc._decorator,g=h.ccclass,f=h.property;(function(e){e[e.weapon_melee=0]="weapon_melee",e[e.weapon_range=1]="weapon_range",e[e.weapon_rangeAd=2]="weapon_rangeAd"})(r=n.WeaponType||(n.WeaponType={}));var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.can_effect_hit=!1,t.hand_effect=null,t.hand_2=null,t.weaponNum=1,t.bullet=null,t.bulletCollor=cc.Color.WHITE,t.shellCall=null,t.atkEffect=null,t.atkNum=10,t.atkRangeNum=1e3,t.flySpeed=2e3,t.atkSpeed=.4,t.bulletNum=5,t.bulletTotal=5,t.reload=3,t.audioName="read",t.weaponLevel=0,t.weaponType=r.weapon_melee,t.person=null,t._curBullet=0,t._arrName=["","y","p","r"],t._isReload=!1,t}var n;return i(t,e),n=t,Object.defineProperty(t.prototype,"isRangeWeapon",{get:function(){return n.rangeWeapon.includes(this.weaponNum)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curBullet",{get:function(){return this._curBullet},set:function(e){e>this.bulletNum?e=this.bulletNum:e<0&&(e=0),this.isRangeWeapon&&(this._curBullet=e,this._curBullet<=0&&this.reloadBullet(),this.setBulletUI())},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.person&&!this.person.isPlayer||(this.weaponLevel=s.cocosz.dataMgr.getGunInfo(this.weaponNum-1).Level),this.atkNum=u.default.Weapon[n.WeaponName[this.weaponNum-1]].atk[this.weaponLevel],this.atkSpeed=u.default.Weapon[n.WeaponName[this.weaponNum-1]].atkSpeed[this.weaponLevel],this.bulletNum=u.default.Weapon[n.WeaponName[this.weaponNum-1]].bulletNum,this.bulletTotal=u.default.Weapon[n.WeaponName[this.weaponNum-1]].bulletTotal[this.weaponLevel],this.reload=u.default.Weapon[n.WeaponName[this.weaponNum-1]].reload,this.atkRangeNum=u.default.Weapon[n.WeaponName[this.weaponNum-1]].atkRange,this.person&&(this.bulletTotal=Math.ceil(this.bulletTotal*this.person.bulletRate)),this._curBullet=0,this.addBullet(),this.setSD()},t.prototype.start=function(){},t.prototype.setBulletUI=function(){this.person&&this.person.isPlayer&&(this.weaponType==r.weapon_range?p.gameMgr.ammo&&p.gameMgr.ammo.isValid&&(p.gameMgr.ammo.string=this._curBullet+"/\u221e"):this.weaponType==r.weapon_rangeAd&&p.gameMgr.ammoAd&&p.gameMgr.ammoAd.isValid&&(p.gameMgr.ammoAd.string=this._curBullet+"/\u221e"))},t.prototype.setSD=function(){var e=this;this.person&&this.node.walk(function(t){if("sd"==t.name)if(e.weaponLevel>0){t.active=!0;var n=t.getComponent(sp.Skeleton);n&&n.setSkin(e._arrName[e.weaponLevel])}else t.active=!1},null)},t.prototype.reset=function(){this.bulletTotal=u.default.Weapon[n.WeaponName[this.weaponNum-1]].bulletTotal[this.weaponLevel],this.person&&(this.bulletTotal=Math.ceil(this.bulletTotal*this.person.bulletRate)),this._curBullet=0,this.addBullet()},t.prototype.addBullet=function(){this.isRangeWeapon&&(this.person&&this.person.isPlayer?this.curBullet<this.bulletNum&&this.bulletTotal>0&&(this.curBullet=this.bulletNum,cc.game.emit(c.default.E_GAME_LOGIC,{type:c.default.E_Bullet_Reload})):this.curBullet=this.bulletNum)},t.prototype.reloadBullet=function(){var e=this;if(this.isRangeWeapon&&0==this._isReload)if(this._isReload=!0,this.person&&this.person.isPlayer)if(this.bulletTotal>0){s.cocosz.audioMgr.playEffect("reload");var t=0;if(this.hand_effect&&(t=this.hand_effect.y,cc.tween(this.hand_effect).by(.5,{y:50}).by(.5,{y:-50}).union().repeat(this.reload).start()),cc.tween(p.gameMgr.rangedWeaponMess.children[0]).to(.2,{color:cc.Color.RED}).to(.2,{color:cc.Color.WHITE}).start(),s.cocosz.scheduleOnce(function(){e&&e.isValid&&(e._isReload=!1,e.addBullet(),e.hand_effect&&(e.hand_effect.stopAllActions(),e.hand_effect.y=t),cc.tween(p.gameMgr.rangedWeaponMess.children[0]).to(.2,{color:cc.Color.GREEN}).to(.2,{color:cc.Color.WHITE}).start())},this.reload*this.person.reloadRate),p.gameMgr.BtnBullet.active&&p.gameMgr.BtnBullet.children[3]&&p.gameMgr.BtnBullet.children[3].active){p.gameMgr.BtnBullet.children[3].active=!1,p.gameMgr.BtnBullet.children[0].active=!0;var n=p.gameMgr.playerTs.curWeapon.reload*p.gameMgr.playerTs.reloadRate;p.gameMgr.BtnBullet.children[1].active=!0;var a=p.gameMgr.BtnBullet.children[1].getComponent(cc.Sprite);cc.tween(a).set({fillRange:0}).to(n,{fillRange:-1}).call(function(){p.gameMgr.BtnBullet.children[0].active=!1,p.gameMgr.BtnBullet.children[1].active=!1,p.gameMgr.BtnBullet.children[2].active=!1,p.gameMgr.BtnBullet.children[3].active=!0}).start(),p.gameMgr.BtnBullet.children[2].active=!0;var i=p.gameMgr.BtnBullet.children[2].getComponent(cc.Label);cc.tween(i).call(function(){i.string=(n*(1+a.fillRange)).toFixed(1)}).delay(.1).union().repeat(n/.1).start()}}else this._isReload=!1,l.default.Show(d.t("msg.myzd")),s.cocosz.audioMgr.playEffect("bag",!1,1);else s.cocosz.scheduleOnce(function(){e&&e.isValid&&(e._isReload=!1,e.addBullet())},this.reload)},t.WeaponName=["ak","cfq","dao","gj","jgb","sd","hdl","sq","ju","ld","nnp","gtst","tb","mb","mq","szg","rsq","cjj","jtl","sq2","tj","fs"],t.meleeWeapon=[3,4,5,13,14],t.rangeWeapon=[1,2,6,7,8,9,10,11,12,15,16,17,18,19,20,21,22],o([f({tooltip:"\u662f\u5426\u64ad\u653e\u5f00\u706b\u5347\u7ea7\u6548\u679c"})],t.prototype,"can_effect_hit",void 0),o([f(cc.Node)],t.prototype,"hand_effect",void 0),o([f(cc.Node)],t.prototype,"hand_2",void 0),o([f],t.prototype,"weaponNum",void 0),o([f(cc.Prefab)],t.prototype,"bullet",void 0),o([f(cc.Color)],t.prototype,"bulletCollor",void 0),o([f(cc.Prefab)],t.prototype,"shellCall",void 0),o([f(cc.Prefab)],t.prototype,"atkEffect",void 0),o([f],t.prototype,"atkNum",void 0),o([f],t.prototype,"atkRangeNum",void 0),o([f],t.prototype,"flySpeed",void 0),o([f({tooltip:"\u5f00\u706b\u65f6\u95f4"}),f],t.prototype,"atkSpeed",void 0),o([f({tooltip:"\u5f39\u5939\u5f39\u836f\u6570\u91cf"})],t.prototype,"bulletNum",void 0),o([f({tooltip:"\u603b\u5f39\u836f\u6570\u91cf"})],t.prototype,"bulletTotal",void 0),o([f({tooltip:"\u88c5\u5f39\u65f6\u95f4"})],t.prototype,"reload",void 0),o([f({tooltip:"\u88c5\u5f39\u97f3\u6548"})],t.prototype,"audioName",void 0),n=o([g],t)}(cc.Component);n.default=m,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","../Manager/Msg":"Msg","./gameDate":"gameDate","./gameMgr":"gameMgr",LanguageData:"LanguageData"}],zombieBase:[function(e,t,n){"use strict";cc._RF.push(t,"4f9b3rBNdNPy6WqLrNu03ZA","zombieBase");var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__decorate||function(e,t,n,a){var i,o=arguments.length,r=o<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r,s=e("../Manager/CocosZ"),c=e("../Manager/Constant"),l=e("./gameDate"),u=e("./gameMgr"),p=e("./person"),d=e("./upgradeMgr"),h=e("./bullet"),g=cc._decorator,f=g.ccclass,m=g.property;(function(e){e[e.front=0]="front",e[e.area=1]="area",e[e.charge=2]="charge",e[e.range=3]="range"})(r||(r={}));var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.zombieId=0,t.bullet_prefab=null,t.sp_hongzhaquan=null,t.audio_attack1=null,t.audio_attack2=null,t.audio_hart=null,t.audio_die=null,t.isBoss=!1,t._aniLayer=null,t._spAni=null,t._divToPlayer=cc.Vec2.ZERO,t._time=-1,t._canColor=!0,t._canAtk=!0,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.id=94,l.default.ZombieMess[this.zombieId]&&(this.totalHp=l.default.ZombieMess[this.zombieId].hp,this.atkNum=l.default.ZombieMess[this.zombieId].atk,this.atkRange=l.default.ZombieMess[this.zombieId].atkRange,this.MoveSpeed=l.default.ZombieMess[this.zombieId].speed),this.isBoss?this.node.scale=1:this.node.scale=.8,this.rig=this.node.getComponent(cc.RigidBody),this.rig&&(this.rig.linearDamping=.2),this._aniLayer=this.node.getChildByName("aniLayer"),this._aniLayer&&(this._spAni=this._aniLayer.getChildByName("ani").getComponent(sp.Skeleton)),this._spAni&&(this._spAni.setStartListener(function(){e.startListenerCall()}),this._spAni.setCompleteListener(function(){e.endListenerCall()}))},t.prototype.onDestroy=function(){cc.game.targetOff(this)},t.prototype.start=function(){},t.prototype.initNode=function(){var e=this;if(u.gameMgr&&u.gameMgr.setMapTs.checkNode(this.node,!0),cc.game.on(c.default.E_GAME_LOGIC,this._onGameMessageHandler,this),u.gameMgr.zombieCurNum++,this.node.stopAllActions(),this.node.zIndex=c.ZindexLayer.zindex_zombie+this.zombieId,this.node.opacity=255,this.atkDir=cc.Vec2.ZERO,this.curHp=this.totalHp,this.isDeath=!1,this.isAtk=!1,this._canAtk=!0,this.canMoveDir=!0,this.canMove=!0,this._spAni&&this._spAni.isValid)if(this._spAni.node.scaleX=Math.abs(this._spAni.node.scaleX),this._spAni.node.opacity=255,this._spAni.node.color=cc.Color.WHITE,this.isBoss)this._spAni.setAnimation(0,"spawn",!1),this.scheduleOnce(function(){var t=e.node.getComponent(cc.BoxCollider);t&&(t.enabled=!0)},2);else{this._spAni.setAnimation(0,"idle",!0);var t=this.node.getComponent(cc.BoxCollider);t&&(t.enabled=!0)}this.sp_hongzhaquan&&(this.sp_hongzhaquan.node.setParent(this.node.parent),this.sp_hongzhaquan.node.zIndex=c.ZindexLayer.zinedx_floorTip,this.sp_hongzhaquan.setCompleteListener(function(){e.sp_hongzhaquan&&e.sp_hongzhaquan.isValid&&(e.sp_hongzhaquan.node.active=!1)})),this.isBoss&&(cc.game.emit(c.default.E_GAME_LOGIC,{type:c.default.E_Commonzombie_Destory}),u.gameMgr&&u.gameMgr.showBossHp(1),this.node.getChildByName("boos")&&(this.node.getChildByName("boos").active=!0))},t.prototype.putNodePool=function(){cc.game.targetOff(this),this.isBoss&&(this.node.getChildByName("boos")&&(this.node.getChildByName("boos").active=!1),u.gameMgr&&(u.gameMgr&&u.gameMgr.showBossHp(0),u.gameMgr.boss_border&&cc.isValid(u.gameMgr.boss_border)&&(u.gameMgr.boss_border.destroy(),u.gameMgr.boss_border=null)),this.isBoss=!1),this.sp_hongzhaquan&&this.sp_hongzhaquan.isValid&&(this.sp_hongzhaquan.node.setParent(this.node),this.sp_hongzhaquan.node.active=!1),u.gameMgr.zombieCurNum--,u.gameMgr&&u.gameMgr.isValid&&u.gameMgr.nodePut(this.node.name,this.node)},t.prototype.startListenerCall=function(){var e=this;if(this._spAni.animation.includes("spawn")){this._spAni.timeScale=.4,this.scheduleOnce(function(){e._spAni.timeScale=1},1),this.canMoveDir=!1;var t=this.node.getPosition(),n=u.gameMgr.playerTs.node.getPosition().subSelf(t);this._spAni.node.scaleX=(n.x>0?1:-1)*Math.abs(this._spAni.node.scaleX)}else this._spAni.animation.includes("attack")?(this.isAtk=!0,this.canMoveDir=!1,[8,9,18].includes(this.zombieId)&&"attack2"==this._spAni.animation?(this.speedRate*=2.5,this.updateRBody(this.moveDir),this.scheduleOnce(function(){e.speedRate/=2.5,e.moveDir=cc.Vec2.ZERO,e.updateRBody(e.moveDir)},.2)):[10,11,12,13].includes(this.zombieId)&&"attack2"==this._spAni.animation?(this.speedRate*=3,this.updateRBody(this.moveDir),this.scheduleOnce(function(){e.speedRate/=3,e.moveDir=cc.Vec2.ZERO,e.updateRBody(e.moveDir)},.2)):[14,19].includes(this.zombieId)&&this._spAni.animation.includes("attack")?(this.speedRate*=3,this.updateRBody(this.moveDir),this.scheduleOnce(function(){e.speedRate/=3,e.moveDir=cc.Vec2.ZERO,e.updateRBody(e.moveDir)},.2)):15==this.zombieId&&"attack"==this._spAni.animation?(this.speedRate*=3,this.updateRBody(this.moveDir),this.scheduleOnce(function(){e.speedRate/=3,e.moveDir=cc.Vec2.ZERO,e.updateRBody(e.moveDir)},.4)):16==this.zombieId&&"attack"==this._spAni.animation?(this.speedRate*=2,this.updateRBody(this.moveDir),this.scheduleOnce(function(){e.speedRate/=2,e.moveDir=cc.Vec2.ZERO,e.updateRBody(e.moveDir)},.3)):17==this.zombieId&&this._spAni.animation.includes("attack")?(this.speedRate*=2,this.updateRBody(this.moveDir),this.scheduleOnce(function(){e.speedRate/=2,e.moveDir=cc.Vec2.ZERO,e.updateRBody(e.moveDir)},.3)):(this.moveDir=cc.Vec2.ZERO,this.updateRBody(this.moveDir))):this._spAni.animation.includes("jump_up")&&(this.canMoveDir=!1)},t.prototype.endListenerCall=function(){this._spAni.animation.includes("spawn")?(this._spAni.setAnimation(0,"idle",!0),this.canMoveDir=!0,this.updateMove(),this.updatePerson(),this.updateRBody(this.moveDir)):this._spAni.animation.includes("attack")?(this._spAni.setAnimation(0,"idle",!0),this.isAtk=!1,this.canMoveDir=!0,this.updateMove(),this.updatePerson(),this.updateRBody(this.moveDir),this.atkDir=cc.Vec2.ZERO):this._spAni.animation.includes("jump_down")&&(this._spAni.setAnimation(0,"idle",!0),this.canMoveDir=!0,this.moveDir=cc.Vec2.ZERO,this.updateRBody(this.moveDir))},t.prototype._onGameMessageHandler=function(e){var t=this;switch(e.type){case c.default.E_Allzombie_Destory:this.hart(9999999,null,null,!0,!0,cc.Color.WHITE,!0);break;case c.default.E_Commonzombie_Destory:this.isBoss||cc.tween(this.node).to(.3,{opacity:1},{easing:"fade"}).call(function(){t.putNodePool()}).start()}},t.prototype.lateUpdate=function(){this.isDeath||s.cocosz.isPause||!u.gameMgr.isGameStart||u.gameMgr.isWin||u.gameMgr.isFail?this.updateRBody(cc.Vec2.ZERO):(this._time++,this._time%15==0&&(this._time%30==0&&(this.updateDiv(),this.updateMove()),this.updateAtk(),this.updateAni(),this.updatePerson(),this.updateRBody(this.moveDir)))},t.prototype.updateDiv=function(){var e=this.node.getPosition(),t=u.gameMgr.playerTs.node.getPosition();this._divToPlayer=t.subSelf(e)},t.prototype.updateMove=function(){this.rig.type==cc.RigidBodyType.Dynamic&&this.canMove&&this.canMoveDir&&u.gameMgr.playerTs&&(u.gameMgr.playerTs.isDeath?this._divToPlayer.mag()<(this.isBoss?800:1500)?this.moveDir=this._divToPlayer.normalize().negSelf():this.moveDir=cc.v2(this._divToPlayer.normalize()).rotateSelf(2*Math.PI*Math.random()):3==this.zombieId&&Math.random()<.2?this._spAni.animation.includes("jump")||(this._spAni.setAnimation(0,"jump_up",!1),this._spAni.addAnimation(0,"jump_down",!1),this.moveDir=this._divToPlayer.normalize()):this._divToPlayer.mag()>=.8*this.atkRange?this.moveDir=cc.v2(this._divToPlayer.normalize()).rotateSelf(Math.PI/2*(.5-Math.random())):this.moveDir=cc.Vec2.ZERO)},t.prototype.updateAtk=function(){if(this.canAtk())if(u.gameMgr.playerTs&&!u.gameMgr.playerTs.isDeath)if(this._divToPlayer.mag()<this.atkRange)this.atkDir=this._divToPlayer.normalize(),this.atk();else switch(this.zombieId){case 8:case 9:case 10:case 11:case 12:case 13:case 18:this._divToPlayer.mag()<600&&Math.random()<.1*(this.isBoss?2:1)&&(this.atkDir=this._divToPlayer.normalize(),this.moveDir=this._divToPlayer.normalize(),this.atk("attack2"));break;case 14:case 16:case 19:case 15:this._divToPlayer.mag()<800&&Math.random()<.1*(this.isBoss?2:1)&&(this.atkDir=this._divToPlayer.normalize(),this.moveDir=this._divToPlayer.normalize(),this.atk("attack"));break;case 16:this._divToPlayer.mag()<600&&Math.random()<.1*(this.isBoss?2:1)&&(this.atkDir=this._divToPlayer.normalize(),this.moveDir=this._divToPlayer.normalize(),this.atk("attack"));break;case 17:this._divToPlayer.mag()<600&&Math.random()<.15*(this.isBoss?2:1)&&(this.atkDir=this._divToPlayer.normalize(),this.moveDir=this._divToPlayer.normalize(),this.atk());break;case 20:this._divToPlayer.mag()<600?Math.random()<.15*(this.isBoss?2:1)&&(this.atkDir=this._divToPlayer.normalize(),this.moveDir=this._divToPlayer.normalize(),this.atk("attack")):this.sp_hongzhaquan.isValid&&!this.sp_hongzhaquan.node.active&&this._divToPlayer.mag()>800&&this.atk("bullet_chui")}else this.atkDir=cc.Vec2.ZERO},t.prototype.updateAni=function(){0==this.isDeath?0==this._spAni.timeScale||this._spAni.animation.includes("spawn")||this._spAni.animation.includes("attack")||this._spAni.animation.includes("jump")||(this.moveDir&&this.moveDir.mag()?17==this.zombieId?!this._spAni.animation.includes("wing")&&this._spAni.setAnimation(0,"wing",!0):!this._spAni.animation.includes("run")&&this._spAni.setAnimation(0,"run",!0):!this._spAni.animation.includes("idle")&&this._spAni.setAnimation(0,"idle",!0)):this._spAni&&this._spAni.skeletonData&&this._spAni.skeletonData.skeletonJson.animations.die&&!this._spAni.animation.includes("die")&&this._spAni.setAnimation(0,"die",!1)},t.prototype.updatePerson=function(){var e=null;this.atkDir&&this.atkDir.mag()?e=this.atkDir:this.moveDir&&this.moveDir.mag()&&(e=this.moveDir),e&&(this._spAni.node.scaleX=Math.abs(this._spAni.node.scaleX)*(e.x>0?1:-1))},t.prototype.updateRBody=function(e,t){void 0===t&&(t=!1),this.rig.type==cc.RigidBodyType.Dynamic&&(this.canMove||t)&&(e&&!e.equals(cc.Vec2.ZERO)?this.rig.linearVelocity=e.mul(Math.floor(this.MoveSpeed*this.speedRate*(1-.2*Math.random()))):this.rig.linearVelocity=cc.Vec2.ZERO)},t.prototype.atk=function(e){var t=this;void 0===e&&(e="");var n=r.front,a=this.atkRange,i=0,o=2,s=this.audio_attack1;switch(this.zombieId){case 0:case 1:Math.random()<.5?e="attack":(e="attack2",s=this.audio_attack2),i=.3;break;case 2:case 3:e="attack1",i=.3;break;case 4:e="attack",i=.3;break;case 5:case 6:e="attack",i=4,n=r.range,o=2,this._canAtk=!1;break;case 7:break;case 8:case 18:"attack2"==e?(e="attack2",a=300,i=.3,n=r.area,s=this.audio_attack2):(e="attack",a=350,i=.3);break;case 9:"attack2"==e?(e="attack2",a=450,i=.3,s=this.audio_attack2):(e="attack",a=350,i=.3);break;case 10:"attack2"==e?(e="attack2",a=200,i=.3,s=this.audio_attack2):(e="attack",a=200,i=.3);break;case 11:case 12:case 13:"attack2"==e?(e="attack2",a=250,i=.3,s=this.audio_attack2):(e="attack",a=250,i=.3);break;case 14:case 19:Math.random()<.6?(e="attack",a=350,i=.3,n=r.charge,s=this.audio_attack1):(e="attack2",a=350,i=.3,s=this.audio_attack2);break;case 15:"attack"==e?(e="attack",a=250,i=.3,n=r.charge):(e="attack2",a=400,i=.3);break;case 16:"attack"==e||Math.random()<.4?(e="attack",a=450,i=.3,n=r.area):(e="attack2",a=300,i=.3);break;case 17:Math.random()<.5?(e="attack",a=200,i=.3):(e="attack2",a=200,i=.3,n=r.charge);break;case 20:"bullet_chui"==e?(n=r.range,e="attack2",o=1.5):"attack"==e?(e="attack",a=500,i=.3):(e="attack2",a=300,i=.3)}e&&this._spAni.setAnimation(0,e,!1),s&&s.isValid&&u.gameMgr.playClip(s,this.node,.5);var l=function(){if(u.gameMgr.playerTs&&!u.gameMgr.playerTs.isDeath){var e=t.node.getPosition(),i=u.gameMgr.playerTs.node.getPosition().subSelf(e);i.mag()<a&&(n==r.front?(i.mag()<200||i.x*t._spAni.node.scale>0&&Math.abs(i.y/i.x)<1.4)&&u.gameMgr.playerTs.hart(1,t.node,i.normalizeSelf(),!0):n===r.charge?(u.gameMgr.playerTs.hart(1,t.node,i.normalizeSelf(),!0),t.unschedule(l)):u.gameMgr.playerTs.hart(1,t.node,i.normalizeSelf(),!0))}};if(n==r.front||n==r.area)this.scheduleOnce(l,i);else if(n==r.charge)this.schedule(l,0,15);else if(n==r.range){var p=this.node.getPosition(),d=u.gameMgr.playerTs.node.getPosition(),g=cc.v2((p.x+d.x)/2,p.y+1500);if(this.bullet_prefab){var f=cc.instantiate(this.bullet_prefab),m=f.getComponent(h.default);m.id=this.id,m.atker=this.node,m.atk=this.atkNum,m.isAngle=!0,f.setPosition(p),f.zIndex=c.ZindexLayer.zindex_bullet_sky,f.parent=this.node.parent,cc.tween(f).call(function(){t.sp_hongzhaquan&&t.sp_hongzhaquan.isValid&&(t.sp_hongzhaquan.node.active=!0,t.sp_hongzhaquan.node.setPosition(d),t.sp_hongzhaquan.setAnimation(0,"animation",!1))}).bezierTo(o,p,g,d).call(function(){if(m.boomEffect){var e=cc.instantiate(m.boomEffect);e.parent=m.node.parent,e.setPosition(m.node.getPosition());var t=e.getComponent(h.default);if(t.atk=m.atk,t.atker=m.atker,t.id=m.id,u.gameMgr.playEffect("explo",e),m.hitEffect){var n=f.getPosition(),a=cc.instantiate(m.hitEffect);a.parent=f.parent,a.setPosition(n),a.zIndex=c.ZindexLayer.zindex_effect_hit}}f.destroy()}).start(),this.scheduleOnce(function(){t._canAtk=!0},i)}}},t.prototype.hart=function(e,t,n,a,i,o,r){var l=this;if(void 0===a&&(a=!0),void 0===i&&(i=!0),void 0===r&&(r=!1),!(this.isDeath||0==r&&s.cocosz.isPause)){if(n&&n.mag()>3&&n.normalizeSelf().mulSelf(3),e=(1-this.damageReduction)*e,u.gameMgr.showRoleTip(this.node,Math.min(this.HP,e).toFixed(0),o),this.HP-=e,this.isBoss&&u.gameMgr&&u.gameMgr.showBossHp(this.HP/this.totalHp),!this.isAttackedEffect&&this._spAni&&this._spAni.node&&this._spAni.node.isValid&&(this.isAttackedEffect=!0,a&&this.audio_hart&&u.gameMgr.playClip(this.audio_hart,this.node,.5),cc.tween(this._aniLayer).to(.1,{scale:.7},{easing:"sineIn"}).to(.1,{scale:1},{easing:"sineOut"}).call(function(){l.isAttackedEffect=!1}).start(),this._canColor&&cc.tween(this._spAni.node).to(.1,{color:new cc.Color(0,0,0,255)}).to(.1,{color:cc.Color.WHITE}).start(),this.rig.type==cc.RigidBodyType.Dynamic&&n&&this.canMove&&this.canMoveDir)){this.canMove=!1,this.scheduleOnce(function(){l.canMove=!0},.1);var p=n.mulSelf(400*n.mag()).addSelf(this.rig.linearVelocity),d=this.isBoss?100:300;p.mag()>d&&p.normalizeSelf().mulSelf(d),this.rig.linearVelocity=p}this.HP<=0?(this.death(),cc.game.emit(c.default.E_GAME_LOGIC,{type:c.default.E_Zombie_Death,node:this.node,from:t})):t&&i&&cc.game.emit(c.default.E_GAME_LOGIC,{type:c.default.E_Zombie_Hart,node:this.node})}},t.prototype.death=function(){var e=this;if(this.isAtk=!1,this.isDeath=!0,this._spAni.timeScale=1,this.node.getComponents(cc.Collider).forEach(function(e){return e.enabled=!1}),cc.tween(this._spAni.node).to(1,{opacity:0}).start(),this.audio_die&&u.gameMgr.playClip(this.audio_die,null,.2),this.updateAni(),this.zombieId<8){var t=s.cocosz.resMgr.getRes("effect_death",cc.Prefab);if(t){var n=cc.instantiate(t);n.zIndex=c.ZindexLayer.zinedx_floorSkill,n.setPosition(this.node.position),n.setParent(this.node.parent)}}this.createItem(),this.scheduleOnce(function(){e.putNodePool()},2)},t.prototype.createItem=function(){if(!u.gameMgr.isWin&&!u.gameMgr.isFail&&d.upgradeMgr&&d.upgradeMgr.isValid)for(var e=this.zombieId<8?1:10,t=0;t<e;t++){var n=this.node.getPosition();t>0&&n.addSelf(cc.v2(20*t,0).rotateSelf(2*Math.PI*Math.random())),d.upgradeMgr.createJingyan(n)}},t.prototype.frozenStart=function(){this._canColor=!1,this._spAni.node.stopAllActions(),this._spAni.node.color=cc.Color.BLUE,this._spAni&&(this._spAni.timeScale=0),this.isAtk=!1,this.canMoveDir=!1,this.moveDir=cc.Vec2.ZERO,this.updateRBody(this.moveDir,!0)},t.prototype.frozenEnd=function(){this.isDeath||(this._canColor=!0,this._spAni.node.color=cc.Color.WHITE,this._spAni&&(this._spAni.timeScale=1,this._spAni.setAnimation(0,"idle",!0)),this.canMoveDir=!0,this.isAtk=!1,this.atkDir=cc.Vec2.ZERO,this.updateMove(),this.updatePerson(),this.updateRBody(this.moveDir))},t.prototype.fire_start=function(){this._canColor=!1,this._spAni.node.stopAllActions(),this._spAni.node.color=cc.Color.RED},t.prototype.fire_end=function(){this._canColor=!0,this._spAni.node.color=cc.Color.WHITE},t.prototype.canAtk=function(){return!(!this._canAtk||this.isAtk||0==this._spAni.timeScale||this._spAni.animation.includes("spawn")||this._spAni.animation.includes("jump"))},o([m({tooltip:"\u50f5\u5c38id"})],t.prototype,"zombieId",void 0),o([m({type:cc.Prefab,tooltip:"\u5b50\u5f39\u9884\u5236\u4f53",visible:function(){return[5,6,20].includes(this.zombieId)}})],t.prototype,"bullet_prefab",void 0),o([m({type:sp.Skeleton,tooltip:"\u8b66\u544a\u5708",visible:function(){return[5,6,20].includes(this.zombieId)}})],t.prototype,"sp_hongzhaquan",void 0),o([m({type:cc.AudioClip,tooltip:"\u653b\u51fb\u97f3\u65481"})],t.prototype,"audio_attack1",void 0),o([m({type:cc.AudioClip,tooltip:"\u653b\u51fb\u97f3\u65482"})],t.prototype,"audio_attack2",void 0),o([m({type:cc.AudioClip,tooltip:"\u53d7\u4f24\u97f3\u6548"})],t.prototype,"audio_hart",void 0),o([m({type:cc.AudioClip,tooltip:"\u6b7b\u4ea1\u97f3\u6548"})],t.prototype,"audio_die",void 0),o([f],t)}(p.default);n.default=_,cc._RF.pop()},{"../Manager/CocosZ":"CocosZ","../Manager/Constant":"Constant","./bullet":"bullet","./gameDate":"gameDate","./gameMgr":"gameMgr","./person":"person","./upgradeMgr":"upgradeMgr"}]},{},["BgScroll","AudioMgr","CocosZ","Constant","DataMgr","FlyCoin","GameABI","GameCtr","GameMgr","Msg","ResMgr","SceneMgr","TweenEffect","UIMgr","UIPage","Web3Mgr","CoinBord","GuideLayer","ShareOrVideo","UIADPanel","UIGameLoadingPage","UIGamePage","UIHomePage","UILoadingPage","UIOverPage","UIPausePanel","UIRankingsPage","UIRevivePanel","UITurntablePage","UIUpgradePanel","redPoint","const","bullet","gameDate","gameMgr","jingyan","mb","person","player","setMap","showEffect","types","upgradeMgr","weapon","zombieBase","LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min"]);